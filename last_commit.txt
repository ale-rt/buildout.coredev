Repository: plone.app.collection


Branch: refs/heads/1.1.x
Date: 2016-08-30T18:36:06+03:00
Author: ichim-david (ichim-david) <ichim.david@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/7d7667c59aa36c1220e36723914860cd0415ffc4

- Check with getattr if item isPrincipiaFolderish as Comment does

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 80c9317..9e918bf 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
 
 
 1.1.6 (2016-02-27)
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 5504a4e..41ec4a7 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -170,7 +170,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


Repository: plone.app.collection


Branch: refs/heads/1.1.x
Date: 2016-08-30T20:52:44+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/7f1697c8d2ae73a6d377b16392faae60718ce51f

Merge pull request #37 from ichim-david/1.1.x

Check with getattr if item isPrincipiaFolderish

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 80c9317..9e918bf 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
 
 
 1.1.6 (2016-02-27)
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 5504a4e..41ec4a7 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -170,7 +170,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


