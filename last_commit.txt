Repository: plone.releaser


Branch: refs/heads/master
Date: 2017-08-08T14:03:06-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.releaser/commit/2b0a9f391abb0662eceee48f0a67c69e33e59cf0

Handle failure when getting commits since last release.

Files changed:
M plone/releaser/package.py

diff --git a/plone/releaser/package.py b/plone/releaser/package.py
index d2e8a82..92ebfed 100644
--- a/plone/releaser/package.py
+++ b/plone/releaser/package.py
@@ -116,11 +116,15 @@ def __call__(self, action=ACTION_INTERACTIVE):
             latest_ignored_commit = self.commit_ignores.get(self.name)
             commits_since_ignore = None
             if latest_ignored_commit is not None:
-                commits_since_ignore = self._commits_between(
-                    repo,
-                    latest_ignored_commit,
-                    self.source.branch
-                )
+                try:
+                    commits_since_ignore = self._commits_between(
+                        repo,
+                        latest_ignored_commit,
+                        self.source.branch
+                    )
+                except git.exc.GitCommandError:
+                    print('\nCould not read commits for package {0}'.format(self.name))
+                    return
 
             # if there are no changes since the last release (i.e. last tag)
             if not commits_since_release \


