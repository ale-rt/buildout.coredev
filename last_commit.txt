Repository: plone.formwidget.datetime


Branch: refs/heads/master
Date: 2016-07-05T23:16:07+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.formwidget.datetime/commit/64123d645cc11d89fbd2c62f5a64d79e3d77b471

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.rst
M plone/formwidget/datetime/setuphandlers.py
M plone/formwidget/datetime/z3cform/widget.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f91454b..95caa5d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -12,6 +12,8 @@ Fixes:
 
 - Marked in setup.py as also compatible with Plone 4.3, next to 5.0.  [maurits]
 
+- Use zope.interface decorator.
+  [gforcada]
 
 1.3 (2016-02-11)
 ----------------
diff --git a/plone/formwidget/datetime/setuphandlers.py b/plone/formwidget/datetime/setuphandlers.py
index 9eb63e3..b936267 100644
--- a/plone/formwidget/datetime/setuphandlers.py
+++ b/plone/formwidget/datetime/setuphandlers.py
@@ -1,9 +1,9 @@
-from zope.interface import implements
+from zope.interface import implementer
 from Products.CMFPlone.interfaces import INonInstallable
 
 
+@implementer(INonInstallable)
 class HiddenProfiles(object):
-    implements(INonInstallable)
 
     def getNonInstallableProfiles(self):
         """Prevents profiles, which should not be user-installable from showing
diff --git a/plone/formwidget/datetime/z3cform/widget.py b/plone/formwidget/datetime/z3cform/widget.py
index 0300440..2882362 100644
--- a/plone/formwidget/datetime/z3cform/widget.py
+++ b/plone/formwidget/datetime/z3cform/widget.py
@@ -11,7 +11,7 @@
 from z3c.form.widget import FieldWidget
 from zope.component import adapter
 from zope.i18n.format import DateTimeParseError
-from zope.interface import implementer, implementsOnly
+from zope.interface import implementer, implementer_only
 from zope.schema.interfaces import IField
 
 
@@ -52,12 +52,12 @@ def update(self):
         addFieldClass(self)
 
 
+@implementer_only(IDateWidget)
 class DateWidget(base.AbstractDateWidget, AbstractDXDateWidget):
     """ Date widget.
     Please note: zope.schema date/datetime field values are python datetime
     instances.
     """
-    implementsOnly(IDateWidget)
 
 
 @implementer(IFieldWidget)
@@ -67,9 +67,9 @@ def DateFieldWidget(field, request):
     return FieldWidget(field, DateWidget(request))
 
 
+@implementer_only(IDatetimeWidget)
 class DatetimeWidget(base.AbstractDatetimeWidget, AbstractDXDateWidget):
     """ DateTime widget """
-    implementsOnly(IDatetimeWidget)
 
     def extract(self, default=NOVALUE):
         # get normal input fields
@@ -133,9 +133,9 @@ def DatetimeFieldWidget(field, request):
     return FieldWidget(field, DatetimeWidget(request))
 
 
+@implementer_only(IMonthYearWidget)
 class MonthYearWidget(base.AbstractMonthYearWidget, AbstractDXDateWidget):
     """ Month and year widget """
-    implementsOnly(IMonthYearWidget)
 
     def extract(self, default=NOVALUE):
         day = self.request.get(self.name + '-day', default)
@@ -155,9 +155,9 @@ def MonthYearFieldWidget(field, request):
     return FieldWidget(field, MonthYearWidget(request))
 
 
+@implementer_only(IYearWidget)
 class YearWidget(base.AbstractYearWidget, AbstractDXDateWidget):
     """ Year widget """
-    implementsOnly(IYearWidget)
 
     def extract(self, default=NOVALUE):
         day = self.request.get(self.name + '-day', default)


Repository: plone.formwidget.datetime


Branch: refs/heads/master
Date: 2016-07-07T00:58:49+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.datetime/commit/5b7c123ca7cdfa3c40fc77a6457abaae88ade4f2

Merge pull request #18 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.rst
M plone/formwidget/datetime/setuphandlers.py
M plone/formwidget/datetime/z3cform/widget.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f91454b..95caa5d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -12,6 +12,8 @@ Fixes:
 
 - Marked in setup.py as also compatible with Plone 4.3, next to 5.0.  [maurits]
 
+- Use zope.interface decorator.
+  [gforcada]
 
 1.3 (2016-02-11)
 ----------------
diff --git a/plone/formwidget/datetime/setuphandlers.py b/plone/formwidget/datetime/setuphandlers.py
index 9eb63e3..b936267 100644
--- a/plone/formwidget/datetime/setuphandlers.py
+++ b/plone/formwidget/datetime/setuphandlers.py
@@ -1,9 +1,9 @@
-from zope.interface import implements
+from zope.interface import implementer
 from Products.CMFPlone.interfaces import INonInstallable
 
 
+@implementer(INonInstallable)
 class HiddenProfiles(object):
-    implements(INonInstallable)
 
     def getNonInstallableProfiles(self):
         """Prevents profiles, which should not be user-installable from showing
diff --git a/plone/formwidget/datetime/z3cform/widget.py b/plone/formwidget/datetime/z3cform/widget.py
index 0300440..2882362 100644
--- a/plone/formwidget/datetime/z3cform/widget.py
+++ b/plone/formwidget/datetime/z3cform/widget.py
@@ -11,7 +11,7 @@
 from z3c.form.widget import FieldWidget
 from zope.component import adapter
 from zope.i18n.format import DateTimeParseError
-from zope.interface import implementer, implementsOnly
+from zope.interface import implementer, implementer_only
 from zope.schema.interfaces import IField
 
 
@@ -52,12 +52,12 @@ def update(self):
         addFieldClass(self)
 
 
+@implementer_only(IDateWidget)
 class DateWidget(base.AbstractDateWidget, AbstractDXDateWidget):
     """ Date widget.
     Please note: zope.schema date/datetime field values are python datetime
     instances.
     """
-    implementsOnly(IDateWidget)
 
 
 @implementer(IFieldWidget)
@@ -67,9 +67,9 @@ def DateFieldWidget(field, request):
     return FieldWidget(field, DateWidget(request))
 
 
+@implementer_only(IDatetimeWidget)
 class DatetimeWidget(base.AbstractDatetimeWidget, AbstractDXDateWidget):
     """ DateTime widget """
-    implementsOnly(IDatetimeWidget)
 
     def extract(self, default=NOVALUE):
         # get normal input fields
@@ -133,9 +133,9 @@ def DatetimeFieldWidget(field, request):
     return FieldWidget(field, DatetimeWidget(request))
 
 
+@implementer_only(IMonthYearWidget)
 class MonthYearWidget(base.AbstractMonthYearWidget, AbstractDXDateWidget):
     """ Month and year widget """
-    implementsOnly(IMonthYearWidget)
 
     def extract(self, default=NOVALUE):
         day = self.request.get(self.name + '-day', default)
@@ -155,9 +155,9 @@ def MonthYearFieldWidget(field, request):
     return FieldWidget(field, MonthYearWidget(request))
 
 
+@implementer_only(IYearWidget)
 class YearWidget(base.AbstractYearWidget, AbstractDXDateWidget):
     """ Year widget """
-    implementsOnly(IYearWidget)
 
     def extract(self, default=NOVALUE):
         day = self.request.get(self.name + '-day', default)


