Repository: plone.app.querystring


Branch: refs/heads/1.3.x
Date: 2017-01-16T15:56:33+01:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/fdf25cc8a9682ef4e06471bcecc9d73ac1aa57a4

Import DateTimeError from DateTime.interfaces, class attribute DateTime.DateTimeError was removed in DateTime 3.0

Files changed:
M CHANGES.rst
M plone/app/querystring/queryparser.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 795abf2..550bf5c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,17 +4,11 @@ Changelog
 1.3.16 (unreleased)
 -------------------
 
-Breaking changes:
-
-- *add item here*
-
-New features:
-
-- *add item here*
-
 Bug fixes:
 
-- *add item here*
+- Import DateTimeError from DateTime.interfaces, class attribute
+  DateTime.DateTimeError was removed in DateTime 3.0
+  [vincentfretin]
 
 
 1.3.15 (2016-05-25)
diff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py
index 774f8cc..f98e960 100644
--- a/plone/app/querystring/queryparser.py
+++ b/plone/app/querystring/queryparser.py
@@ -1,5 +1,6 @@
 from Acquisition import aq_parent
 from collections import namedtuple
+from DateTime.interfaces import DateTimeError
 from DateTime import DateTime
 from plone.app.layout.navigation.root import getNavigationRoot
 from plone.registry.interfaces import IRegistry
@@ -209,11 +210,11 @@ def _moreThanRelativeDate(context, row):
 def _betweenDates(context, row):
     try:
         start_date = DateTime(row.values[0])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         start_date = DateTime(0)
     try:
         end_date = DateTime(row.values[1])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         row = Row(index=row.index,
                   operator=row.operator,
                   values=start_date)


