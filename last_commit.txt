Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2017-10-26T23:36:24+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/c6cb007cbd59d8dae31aa0b62437cd865aed363a

Accept both FileUpload object and instance in tests.

I thought I saw that master was only used on Plone 5.2, but is is also on 5.1.

Files changed:
M plone/formwidget/namedfile/widget.rst

diff --git a/plone/formwidget/namedfile/widget.rst b/plone/formwidget/namedfile/widget.rst
index 7918502..fceee62 100644
--- a/plone/formwidget/namedfile/widget.rst
+++ b/plone/formwidget/namedfile/widget.rst
@@ -134,12 +134,12 @@ Now build a FileUpload::
   >>> file_widget.request = make_request(form={'widget.name.file': myUpload})
   >>> file_widget.update()
   >>> file_widget.extract()
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
   >>> image_widget.request = make_request(form={'widget.name.image': myUpload})
   >>> image_widget.update()
   >>> image_widget.extract()
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
 The rendering is unchanged::
 
@@ -288,7 +288,7 @@ empty, the behaviour is the same as before::
   >>> file_widget.request = make_request(form={'widget.name.file': myUpload})
   >>> file_widget.update()
   >>> file_widget.extract()
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
 Set the current image, which is shown as thumb on the page, and then
 setup the widget with a new value::
@@ -299,7 +299,7 @@ setup the widget with a new value::
   >>> image_widget.request = make_request(form={'widget.name.image': myUpload})
   >>> image_widget.update()
   >>> image_widget.extract()
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
 If the widgets are rendered again, the newly uploaded files will be shown::
 
@@ -653,7 +653,7 @@ Let's upload data::
   >>> file_widget.update()
   >>> uploaded = file_widget.extract()
   >>> uploaded
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
   >>> content.file_field = ascii_file_converter.toFieldValue(uploaded)
   >>> content.file_field
@@ -671,7 +671,7 @@ Check that we have a good image that PIL can handle:
   >>> image_widget.update()
   >>> uploaded = image_widget.extract()
   >>> uploaded
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
   >>> content.image_field = ascii_image_converter.toFieldValue(uploaded)
   >>> print(content.image_field)
@@ -728,7 +728,7 @@ Now overwrite with other data::
   >>> file_widget.update()
   >>> uploaded = file_widget.extract()
   >>> uploaded
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
   >>> content.file_field = ascii_file_converter.toFieldValue(uploaded)
   >>> content.file_field
@@ -743,7 +743,7 @@ Now overwrite with other data::
   >>> image_widget.update()
   >>> uploaded = image_widget.extract()
   >>> uploaded
-  <ZPublisher.HTTPRequest.FileUpload object at ...>
+  <ZPublisher.HTTPRequest.FileUpload ...>
 
   >>> content.image_field = ascii_file_converter.toFieldValue(uploaded)
   >>> content.image_field


