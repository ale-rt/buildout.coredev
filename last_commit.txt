Repository: Products.CMFQuickInstallerTool


Branch: refs/heads/master
Date: 2016-10-22T18:35:52-04:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/61a63484e947ee4d278364d27bbcc74d87856aca

Fix imports since Globals was removed in Zope4

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/QuickInstallerTool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 261ee35..4e6af40 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix imports since Globals was removed in Zope4
+  [pbauer]
 
 
 3.0.14 (2016-10-03)
diff --git a/Products/CMFQuickInstallerTool/QuickInstallerTool.py b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
index d304db7..19ab0c8 100644
--- a/Products/CMFQuickInstallerTool/QuickInstallerTool.py
+++ b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
@@ -6,8 +6,7 @@
 from Acquisition import aq_inner
 from Acquisition import aq_parent
 from App.class_init import InitializeClass
-from Globals import DevelopmentMode
-from Globals import INSTANCE_HOME
+from App.config import getConfiguration
 from OFS.ObjectManager import ObjectManager
 from OFS.SimpleItem import SimpleItem
 from Products.CMFCore.permissions import ManagePortal
@@ -813,12 +812,12 @@ def getAlreadyRegistered(self):
     def isDevelopmentMode(self):
         """Is the Zope server in debug mode?
         """
-        return not not DevelopmentMode
+        return bool(getConfiguration().debug_mode)
 
     @security.protected(ManagePortal)
     def getInstanceHome(self):
         """Return location of $INSTANCE_HOME
         """
-        return INSTANCE_HOME
+        return os.environ.get('INSTANCE_HOME')
 
 InitializeClass(QuickInstallerTool)


Repository: Products.CMFQuickInstallerTool


Branch: refs/heads/master
Date: 2017-01-31T16:01:17+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/c0b7ad5d60195e308edeeb9bc816acaf8382a804

Merge pull request #16 from plone/plonezope4

Fix imports since Globals was removed in Zope4

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/QuickInstallerTool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 261ee35..4e6af40 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix imports since Globals was removed in Zope4
+  [pbauer]
 
 
 3.0.14 (2016-10-03)
diff --git a/Products/CMFQuickInstallerTool/QuickInstallerTool.py b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
index d304db7..19ab0c8 100644
--- a/Products/CMFQuickInstallerTool/QuickInstallerTool.py
+++ b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
@@ -6,8 +6,7 @@
 from Acquisition import aq_inner
 from Acquisition import aq_parent
 from App.class_init import InitializeClass
-from Globals import DevelopmentMode
-from Globals import INSTANCE_HOME
+from App.config import getConfiguration
 from OFS.ObjectManager import ObjectManager
 from OFS.SimpleItem import SimpleItem
 from Products.CMFCore.permissions import ManagePortal
@@ -813,12 +812,12 @@ def getAlreadyRegistered(self):
     def isDevelopmentMode(self):
         """Is the Zope server in debug mode?
         """
-        return not not DevelopmentMode
+        return bool(getConfiguration().debug_mode)
 
     @security.protected(ManagePortal)
     def getInstanceHome(self):
         """Return location of $INSTANCE_HOME
         """
-        return INSTANCE_HOME
+        return os.environ.get('INSTANCE_HOME')
 
 InitializeClass(QuickInstallerTool)


