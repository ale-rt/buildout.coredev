Repository: Products.CMFPlone


Branch: refs/heads/4.3.x
Date: 2016-06-11T22:25:12+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/a5b828ebd8ab47e6dd55e2710bd1ff38b5c1652f

Removed docstrings from PropertyManager methods to avoid publishing them.

Files changed:
M Products/CMFPlone/patches/publishing.py
M docs/CHANGES.rst

diff --git a/Products/CMFPlone/patches/publishing.py b/Products/CMFPlone/patches/publishing.py
index 3eae7e0..baec076 100644
--- a/Products/CMFPlone/patches/publishing.py
+++ b/Products/CMFPlone/patches/publishing.py
@@ -1,4 +1,6 @@
 # From Products.PloneHotfix20160419
+# Plus extras for properties.
+from OFS.PropertyManager import PropertyManager
 from OFS.ZDOM import Document
 from OFS.ZDOM import Node
 from Products.CMFPlone.Portal import PloneSite
@@ -62,3 +64,21 @@ class ATCTBTreeFolder(object):
         if (method is not None and hasattr(method, 'im_func') and
                 hasattr(method.im_func, '__doc__')):
             del method.im_func.__doc__
+
+property_methods = (
+    'getProperty',
+    'propertyValues',
+    'propertyItems',
+    'propertyMap',
+    'hasProperty',
+    'getPropertyType',
+    'propertyIds',
+    'propertyLabel',
+    'propertyDescription'
+)
+
+for method_name in property_methods:
+    method = getattr(PropertyManager, method_name, None)
+    if (method is not None and hasattr(method, 'im_func') and
+            hasattr(method.im_func, '__doc__')):
+        del method.im_func.__doc__
diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 5abde8b..623af44 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -14,6 +14,8 @@ Changelog
 
 Fixes:
 
+- Removed docstrings from PropertyManager methods to avoid publishing them.  [maurits]
+
 - Added publishing patch from Products.PloneHotfix20160419.
   This avoids publishing some methods inherited from Zope or CMF.  [maurits]
 


