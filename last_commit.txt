Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-06-06T11:21:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.releaser/commit/ae17b55c3094d87f6a8b9dea17954be4325959df

Ask before pushing to coredev, after updating the checkouts and versions.

Files changed:
M CHANGES.rst
M plone/releaser/release.py

diff --git a/CHANGES.rst b/CHANGES.rst
index af3e0ae..5b40044 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,7 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Ask before pushing to coredev, after updating the checkouts and versions.  [maurits]
 
 Bug fixes:
 
diff --git a/plone/releaser/release.py b/plone/releaser/release.py
index bb9f689..a5b691c 100644
--- a/plone/releaser/release.py
+++ b/plone/releaser/release.py
@@ -186,8 +186,9 @@ def update_core(data):
         g.add('checkouts.cfg')
         print "Committing changes."
         g.commit(message=message)
-        print "Pushing changes to server."
-        g.push()
+        if ask("Ok to push coredev?", default=True):
+            print "Pushing changes to server."
+            g.push()
 
 
 def update_versions(package_name, new_version):


Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-06-08T22:48:17+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/c29903aee3c6e21d5c3e266e9463bd491c4fb9d9

Merge pull request #9 from plone/maurits-ask-push-coredev

Split updating/pushing coredev

Files changed:
M CHANGES.rst
M plone/releaser/release.py

diff --git a/CHANGES.rst b/CHANGES.rst
index af3e0ae..5b40044 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,7 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Ask before pushing to coredev, after updating the checkouts and versions.  [maurits]
 
 Bug fixes:
 
diff --git a/plone/releaser/release.py b/plone/releaser/release.py
index bb9f689..a5b691c 100644
--- a/plone/releaser/release.py
+++ b/plone/releaser/release.py
@@ -186,8 +186,9 @@ def update_core(data):
         g.add('checkouts.cfg')
         print "Committing changes."
         g.commit(message=message)
-        print "Pushing changes to server."
-        g.push()
+        if ask("Ok to push coredev?", default=True):
+            print "Pushing changes to server."
+            g.push()
 
 
 def update_versions(package_name, new_version):


