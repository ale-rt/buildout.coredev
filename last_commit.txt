Repository: Products.statusmessages


Branch: refs/heads/master
Date: 2016-07-05T23:20:23+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.statusmessages/commit/3835dcea7dad3d2dde49c775760e99bbc120dcd7

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.txt
M Products/statusmessages/adapter.py
M Products/statusmessages/message.py

diff --git a/CHANGES.txt b/CHANGES.txt
index c9c2d98..684597a 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Use zope.interface decorator.
+  [gforcada]
 
 4.1.0 (2016-05-25)
 ------------------
diff --git a/Products/statusmessages/adapter.py b/Products/statusmessages/adapter.py
index b4a04c0..4395093 100644
--- a/Products/statusmessages/adapter.py
+++ b/Products/statusmessages/adapter.py
@@ -2,7 +2,7 @@
 
 from zope.annotation.interfaces import IAnnotations
 from zope.i18n import translate
-from zope.interface import implements
+from zope.interface import implementer
 
 from Products.statusmessages import STATUSMESSAGEKEY
 from Products.statusmessages.message import decode
@@ -12,6 +12,7 @@
 import logging
 logger = logging.getLogger('statusmessages')
 
+@implementer(IStatusMessage)
 class StatusMessage(object):
     """Adapter for the BrowserRequest to handle status messages.
 
@@ -22,7 +23,6 @@ class StatusMessage(object):
       >>> verifyClass(IStatusMessage, StatusMessage)
       True
     """
-    implements(IStatusMessage)
 
     def __init__(self, context):
         self.context = context # the context must be the request
diff --git a/Products/statusmessages/message.py b/Products/statusmessages/message.py
index 617756c..ef67073 100644
--- a/Products/statusmessages/message.py
+++ b/Products/statusmessages/message.py
@@ -1,6 +1,6 @@
 import struct
 
-from zope.interface import implements
+from zope.interface import implementer
 
 from Products.statusmessages.interfaces import IMessage
 
@@ -16,6 +16,7 @@ def _unicode(value):
     return unicode(value, 'utf-8', 'ignore')
 
 
+@implementer(IMessage)
 class Message:
     """A single status message.
 
@@ -55,7 +56,6 @@ class Message:
       'test'
 
     """
-    implements(IMessage)
 
     def __init__(self, message, type=''):
         self.message = message


Repository: Products.statusmessages


Branch: refs/heads/master
Date: 2016-07-10T20:31:34+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.statusmessages/commit/9df1e095a92048e6806dbf5795680c983f6ec979

Merge pull request #3 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.txt
M Products/statusmessages/adapter.py
M Products/statusmessages/message.py

diff --git a/CHANGES.txt b/CHANGES.txt
index c9c2d98..684597a 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Use zope.interface decorator.
+  [gforcada]
 
 4.1.0 (2016-05-25)
 ------------------
diff --git a/Products/statusmessages/adapter.py b/Products/statusmessages/adapter.py
index b4a04c0..4395093 100644
--- a/Products/statusmessages/adapter.py
+++ b/Products/statusmessages/adapter.py
@@ -2,7 +2,7 @@
 
 from zope.annotation.interfaces import IAnnotations
 from zope.i18n import translate
-from zope.interface import implements
+from zope.interface import implementer
 
 from Products.statusmessages import STATUSMESSAGEKEY
 from Products.statusmessages.message import decode
@@ -12,6 +12,7 @@
 import logging
 logger = logging.getLogger('statusmessages')
 
+@implementer(IStatusMessage)
 class StatusMessage(object):
     """Adapter for the BrowserRequest to handle status messages.
 
@@ -22,7 +23,6 @@ class StatusMessage(object):
       >>> verifyClass(IStatusMessage, StatusMessage)
       True
     """
-    implements(IStatusMessage)
 
     def __init__(self, context):
         self.context = context # the context must be the request
diff --git a/Products/statusmessages/message.py b/Products/statusmessages/message.py
index 617756c..ef67073 100644
--- a/Products/statusmessages/message.py
+++ b/Products/statusmessages/message.py
@@ -1,6 +1,6 @@
 import struct
 
-from zope.interface import implements
+from zope.interface import implementer
 
 from Products.statusmessages.interfaces import IMessage
 
@@ -16,6 +16,7 @@ def _unicode(value):
     return unicode(value, 'utf-8', 'ignore')
 
 
+@implementer(IMessage)
 class Message:
     """A single status message.
 
@@ -55,7 +56,6 @@ class Message:
       'test'
 
     """
-    implements(IMessage)
 
     def __init__(self, message, type=''):
         self.message = message


