Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2016-05-04T13:28:59+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.ATContentTypes/commit/e10d8266b9b3961ad0496a9e8deb5f332dfd3ff6

Removed docstrings from some methods to avoid publishing them.

From Products.PloneHotfix20160419.

Files changed:
M CHANGES.rst
M Products/ATContentTypes/tool/factory.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9192c5b..440fe52 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ New:
 
 Fixes:
 
+- Removed docstrings from some methods to avoid publishing them.  From
+  Products.PloneHotfix20160419.  [maurits]
+
 - Fixed AttributeError ``unmarkCreationFlag`` during installation.
   This could happen when there was already a Members folder from
   ``plone.app.contenttypes``.  Fixes issue
diff --git a/Products/ATContentTypes/tool/factory.py b/Products/ATContentTypes/tool/factory.py
index 7364ee4..cd63911 100644
--- a/Products/ATContentTypes/tool/factory.py
+++ b/Products/ATContentTypes/tool/factory.py
@@ -94,11 +94,12 @@ class TempFolder(TempFolderBase):
     # that includes the acquisition parent of portal_factory (otherwise we get
     # portal_root/portal_factory/... no matter where the object will reside)
     def getPhysicalPath(self):
-        '''Returns a path (an immutable sequence of strings)
-        that can be used to access this object again
-        later, for example in a copy/paste operation.  getPhysicalRoot()
-        and getPhysicalPath() are designed to operate together.
-        '''
+        # Get the physical path of the object.
+        #
+        # Returns a path (an immutable sequence of strings) that can be used to
+        # access this object again later, for example in a copy/paste
+        # operation.  getPhysicalRoot() and getPhysicalPath() are designed to
+        # operate together.
         portal_factory = aq_parent(aq_inner(self))
         path = aq_parent(portal_factory).getPhysicalPath() + \
             (portal_factory.getId(), self.getId(), )


Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2016-05-04T13:28:59+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.ATContentTypes/commit/c094c822e53f08db433a7a7c9100b0fee8f651a2

Removed more docstrings.

Files changed:
M Products/ATContentTypes/content/base.py
M Products/ATContentTypes/content/document.py
M Products/ATContentTypes/content/event.py
M Products/ATContentTypes/content/file.py
M Products/ATContentTypes/content/folder.py
M Products/ATContentTypes/content/image.py
M Products/ATContentTypes/content/link.py
M Products/ATContentTypes/content/newsitem.py
M Products/ATContentTypes/content/topic.py
M Products/ATContentTypes/criteria/base.py
M Products/ATContentTypes/criteria/date.py
M Products/ATContentTypes/criteria/portaltype.py
M Products/ATContentTypes/criteria/simpleint.py
M Products/ATContentTypes/tool/atct.py
M Products/ATContentTypes/tool/factory.py
M Products/ATContentTypes/tool/metadata.py
M Products/ATContentTypes/tool/topic.py

diff --git a/Products/ATContentTypes/content/base.py b/Products/ATContentTypes/content/base.py
index 4509824..a756db3 100644
--- a/Products/ATContentTypes/content/base.py
+++ b/Products/ATContentTypes/content/base.py
@@ -109,11 +109,10 @@ class ATCTMixin(BrowserDefaultMixin):
 
     @security.protected(ModifyPortalContent)
     def initializeArchetype(self, **kwargs):
-        """called by the generated add* factory in types tool
-
-        Overwritten to call edit() instead of update() to have the cmf
-        compatibility method.
-        """
+        # Called by the generated add* factory in types tool.
+        #
+        # Overwritten to call edit() instead of update() to have the cmf
+        # compatibility method.
         try:
             self.initializeLayers()
             self.markCreationFlag()
@@ -134,8 +133,7 @@ def initializeArchetype(self, **kwargs):
 
     @security.private
     def copyLayoutFromParent(self):
-        """Copies the layout from the parent object if it's of the same type.
-        """
+        # Copies the layout from the parent object if it's of the same type.
         parent = aq_parent(aq_inner(self))
         if parent is not None:
             # Only set the layout if we are the same type as out parent object
@@ -150,9 +148,8 @@ def copyLayoutFromParent(self):
 
     @security.protected(ModifyPortalContent)
     def edit(self, *args, **kwargs):
-        """Reimplementing edit() to have a compatibility method for the old
-        cmf edit() method
-        """
+        # Reimplementing edit() to have a compatibility method for the old
+        # cmf edit() method
         initializing = kwargs.get('_initializing_', False)
         if initializing:
             del kwargs['_initializing_']
@@ -174,14 +171,12 @@ def edit(self, *args, **kwargs):
 
     @security.private
     def cmf_edit(self, *args, **kwargs):
-        """Overwrite this method to make AT compatible with the crappy
-        CMF edit()
-        """
+        # Overwrite this method to make AT compatible with the crappy
+        # CMF edit()
         raise NotImplementedError("cmf_edit method isn't implemented")
 
     def exclude_from_nav(self):
-        """Accessor for excludeFromNav field
-        """
+        # Accessor for excludeFromNav field.
         field = self.getField('excludeFromNav')
         if field is not None:
             return field.get(self)
@@ -190,8 +185,7 @@ def exclude_from_nav(self):
 
     @security.protected(View)
     def get_size(self):
-        """ZMI / Plone get size method
-        """
+        # ZMI / Plone get size method.
         f = self.getPrimaryField()
         if f is None:
             return 0
@@ -208,10 +202,8 @@ class ATCTContent(ATCTMixin, BaseContent):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set title according to the id on webdav/ftp PUTs.
-        """
+        # After webdav/ftp PUT method.
+        # Set title according to the id on webdav/ftp PUTs.
         id = self.getId()
         title = self.Title()
         if not title:
@@ -268,8 +260,7 @@ def index_html(self, REQUEST=None, RESPONSE=None):
 
     @security.protected(View)
     def get_data(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         data = aq_base(self.getPrimaryField().getAccessor(self)())
         return str(getattr(data, 'data', data))
 
@@ -277,14 +268,12 @@ def get_data(self):
 
     @security.protected(View)
     def size(self):
-        """Get size (image_view.pt)
-        """
+        # Get size (image_view.pt).
         return self.get_size()
 
     @security.protected(View)
     def get_content_type(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         f = self.getPrimaryField().getAccessor(self)()
         # 'application/octet-stream'
         return f and f.getContentType() or 'text/plain'
@@ -316,8 +305,7 @@ def manage_edit(self, title, content_type, precondition='',
             return self.manage_main(self, REQUEST, manage_tabs_message=message)
 
     def _cleanupFilename(self, filename, request=None):
-        """Cleans the filename from unwanted or evil chars
-        """
+        # Cleans the filename from unwanted or evil chars.
         if filename and not isinstance(filename, unicode):
             encoding = self.getCharset()
             filename = unicode(filename, encoding)
@@ -326,10 +314,8 @@ def _cleanupFilename(self, filename, request=None):
         return filename and filename.encode(encoding) or None
 
     def _setATCTFileContent(self, value, **kwargs):
-        """Set ID based on name of uploaded file, Title.
-
-        Or possibly other conditions.
-        """
+        # Set ID based on name of uploaded file, Title.
+        # Or possibly other conditions.
         field = self.getPrimaryField()
         # set first then get the filename
         field.set(self, value, **kwargs)  # set is ok
@@ -373,8 +359,7 @@ def _should_set_id_to_filename(self, filename, title):
 
     @security.protected(View)
     def post_validate(self, REQUEST=None, errors=None):
-        """Validates upload file and id
-        """
+        # Validates upload file and id.
         id = REQUEST.form.get('id')
         field = self.getPrimaryField()
         f_name = field.getName()
@@ -414,11 +399,9 @@ def post_validate(self, REQUEST=None, errors=None):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set the title according to the uploaded filename if the title
-        is empty or set it to the id if no filename is given.
-        """
+        # After webdav/ftp PUT method.
+        # Set the title according to the uploaded filename if the title
+        # is empty or set it to the id if no filename is given.
         id = self.getId()
         title = self.Title()
         if not title:
@@ -449,7 +432,7 @@ class ATCTFolder(ATCTMixin, BaseFolder):
 
     @security.protected(View)
     def get_size(self):
-        """Returns 1 as folders have no size."""
+        # Returns 1 as folders have no size.
         return 1
 
 InitializeClass(ATCTFolder)
@@ -469,15 +452,13 @@ def __browser_default__(self, request):
 
     @security.protected(View)
     def get_size(self):
-        """Returns 1 as folders have no size."""
+        # Returns 1 as folders have no size.
         return 1
 
     @security.private
     def manage_afterMKCOL(self, id, result, REQUEST=None, RESPONSE=None):
-        """After MKCOL handler
-
-        Set title according to the id
-        """
+        # After MKCOL handler.
+        # Set title according to the id.
         # manage_afterMKCOL is called in the context of the parent
         # folder, *not* in the context of the new folder!
         new = getattr(self, id)
diff --git a/Products/ATContentTypes/content/document.py b/Products/ATContentTypes/content/document.py
index 2167138..c992be8 100644
--- a/Products/ATContentTypes/content/document.py
+++ b/Products/ATContentTypes/content/document.py
@@ -80,28 +80,24 @@ class ATDocumentBase(ATCTContent, HistoryAwareMixin):
 
     @security.protected(View)
     def CookedBody(self, stx_level='ignored'):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getText()
 
     @security.protected(ModifyPortalContent)
     def EditableBody(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getRawText()
 
     @security.protected(ModifyPortalContent)
     def setFormat(self, value):
-        """CMF compatibility method
-
-        The default mutator is overwritten to:
-
-          o add a conversion from stupid CMF content type
-            (e.g. structured-text) to real mime types used by MTR.
-
-          o Set format to default format if value is empty
-
-        """
+        # CMF compatibility method.
+        #
+        # The default mutator is overwritten to:
+        #
+        #   o add a conversion from stupid CMF content type
+        #     (e.g. structured-text) to real mime types used by MTR.
+        #
+        #   o Set format to default format if value is empty
         if not value:
             value = zconf.ATDocument.default_content_type
         else:
@@ -110,10 +106,8 @@ def setFormat(self, value):
 
     @security.protected(ModifyPortalContent)
     def setText(self, value, **kwargs):
-        """Body text mutator
-
-        * hook into mxTidy an replace the value with the tidied value
-        """
+        # Body text mutator.
+        # hook into mxTidy an replace the value with the tidied value
         field = self.getField('text')
 
         # When an object is initialized the first time we have to
@@ -135,8 +129,7 @@ def setText(self, value, **kwargs):
 
     @security.private
     def guessMimetypeOfText(self):
-        """For ftp/webdav upload: get the mimetype from the id and data
-        """
+        # For ftp/webdav upload: get the mimetype from the id and data.
         mtr = getToolByName(self, 'mimetypes_registry')
         id = self.getId()
         data = self.getRawText()
@@ -159,9 +152,8 @@ def guessMimetypeOfText(self):
 
     @security.private
     def getTidyOutput(self, field):
-        """Get the tidied output for a specific field from the request
-        if available
-        """
+        # Get the tidied output for a specific field from the request
+        # if available.
         request = getattr(self, 'REQUEST', None)
         if request is not None and isinstance(request, HTTPRequest):
             tidyAttribute = '%s_tidier_data' % field.getName()
@@ -177,9 +169,8 @@ def _notifyOfCopyTo(self, container, op=0):
 
     @security.private
     def manage_afterAdd(self, item, container):
-        """Fix text when created througt webdav
-        Guess the right mimetype from the id/data
-        """
+        # Fix text when created through webdav.
+        # Guess the right mimetype from the id/data.
         ATCTContent.manage_afterAdd(self, item, container)
         field = self.getField('text')
 
@@ -205,11 +196,8 @@ def cmf_edit(self, text_format, text, file='', safety_belt='', **kwargs):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set title according to the id on webdav/ftp PUTs.
-        """
-
+        # After webdav/ftp PUT method.
+        # Set title according to the id on webdav/ftp PUTs.
         if '' == data:
             file.seek(0)
             content = file.read(65536)
diff --git a/Products/ATContentTypes/content/event.py b/Products/ATContentTypes/content/event.py
index 9886139..c751a1f 100644
--- a/Products/ATContentTypes/content/event.py
+++ b/Products/ATContentTypes/content/event.py
@@ -231,10 +231,8 @@ def cmf_edit(
 
     @security.protected(View)
     def post_validate(self, REQUEST=None, errors=None):
-        """Validates start and end date
-
-        End date must be after start date
-        """
+        # Validates start and end date.
+        # End date must be after start date.
         if 'startDate' in errors or 'endDate' in errors:
             # No point in validating bad input
             return
diff --git a/Products/ATContentTypes/content/file.py b/Products/ATContentTypes/content/file.py
index 6fa4a88..d6b0e4d 100644
--- a/Products/ATContentTypes/content/file.py
+++ b/Products/ATContentTypes/content/file.py
@@ -94,8 +94,7 @@ def index_html(self, REQUEST=None, RESPONSE=None):
 
     @security.protected(ModifyPortalContent)
     def setFile(self, value, **kwargs):
-        """Set id to uploaded id
-        """
+        # Set id to uploaded id.
         self._setATCTFileContent(value, **kwargs)
 
     def __str__(self):
@@ -105,8 +104,7 @@ def __str__(self):
 
     @security.public
     def getIcon(self, relative_to_portal=0):
-        """Calculate the icon using the mime type of the file
-        """
+        # Calculate the icon using the mime type of the file.
         field = self.getField('file')
         if not field or not self.get_size():
             # field is empty
@@ -144,8 +142,7 @@ def getIcon(self, relative_to_portal=0):
 
     @security.protected(View)
     def icon(self):
-        """for ZMI
-        """
+        # for ZMI
         return self.getIcon()
 
     @security.private
diff --git a/Products/ATContentTypes/content/folder.py b/Products/ATContentTypes/content/folder.py
index d9425db..cf08dfb 100644
--- a/Products/ATContentTypes/content/folder.py
+++ b/Products/ATContentTypes/content/folder.py
@@ -54,10 +54,9 @@ class ObsoleteATFolder(ATCTOrderedFolder):
 
     @security.protected(View)
     def getNextPreviousParentValue(self):
-        """If the parent node is also an IATFolder and has next/previous
-        navigation enabled, then let this folder have it enabled by
-        default as well.
-        """
+        # If the parent node is also an IATFolder and has next/previous
+        # navigation enabled, then let this folder have it enabled by
+        # default as well.
         parent = self.__parent__
         if IATFolder.providedBy(parent):
             return parent.getNextPreviousEnabled()
diff --git a/Products/ATContentTypes/content/image.py b/Products/ATContentTypes/content/image.py
index 102f590..72bcb05 100644
--- a/Products/ATContentTypes/content/image.py
+++ b/Products/ATContentTypes/content/image.py
@@ -90,7 +90,7 @@ def exportImage(self, format, width, height):
 
     @security.protected(ModifyPortalContent)
     def setImage(self, value, refresh_exif=True, **kwargs):
-        """Set ID to uploaded file name if Title is empty."""
+        # Set ID to uploaded file name if Title is empty.
         # set exif first because rotation might screw up the exif data
         # the exif methods can handle str, Pdata, OFSImage and file
         # like objects
@@ -98,15 +98,14 @@ def setImage(self, value, refresh_exif=True, **kwargs):
         self._setATCTFileContent(value, **kwargs)
 
     def _should_set_id_to_filename(self, filename, title):
-        """If title is blank, have the caller set my ID to the file's name."""
+        # If title is blank, have the caller set my ID to the file's name.
         # When the title is blank, sometimes the filename is returned as the
         # title.
         return filename == title or not title
 
     @security.protected(View)
     def tag(self, **kwargs):
-        """Generate image tag using the api of the ImageField
-        """
+        # Generate image tag using the api of the ImageField.
         return self.getField('image').tag(self, **kwargs)
 
     def __str__(self):
@@ -116,11 +115,9 @@ def __str__(self):
 
     @security.protected(View)
     def get_size(self):
-        """ZMI / Plone get size method
-
-        BBB: ImageField.get_size() returns the size of the original image + all
-        scales but we want only the size of the original image.
-        """
+        # ZMI / Plone get size method.
+        # BBB: ImageField.get_size() returns the size of the original image +
+        # all scales but we want only the size of the original image.
         img = self.getImage()
         if not getattr(aq_base(img), 'get_size', False):
             return 0
diff --git a/Products/ATContentTypes/content/link.py b/Products/ATContentTypes/content/link.py
index 7a2afb3..f3e4453 100644
--- a/Products/ATContentTypes/content/link.py
+++ b/Products/ATContentTypes/content/link.py
@@ -53,19 +53,16 @@ class ATLink(ATCTContent):
 
     @security.protected(ModifyPortalContent)
     def setRemoteUrl(self, value, **kwargs):
-        """remute url mutator
-
-        Use urlparse to sanify the url
-        Also see http://dev.plone.org/plone/ticket/3296
-        """
+        # Remute url mutator.
+        # Use urlparse to sanify the url
+        # Also see http://dev.plone.org/plone/ticket/3296
         if value:
             value = urlparse.urlunparse(urlparse.urlparse(value))
         self.getField('remoteUrl').set(self, value, **kwargs)
 
     @security.protected(View)
     def remote_url(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getRemoteUrl()
 
     @security.private
@@ -76,8 +73,7 @@ def cmf_edit(self, remote_url=None, **kwargs):
 
     @security.protected(View)
     def getRemoteUrl(self):
-        """Sanitize output
-        """
+        # Sanitize output.
         value = self.Schema()['remoteUrl'].get(self)
         if not value:
             value = ''  # ensure we have a string
diff --git a/Products/ATContentTypes/content/newsitem.py b/Products/ATContentTypes/content/newsitem.py
index c2e4d55..da2b7f8 100644
--- a/Products/ATContentTypes/content/newsitem.py
+++ b/Products/ATContentTypes/content/newsitem.py
@@ -112,8 +112,7 @@ class ATNewsItem(ATDocumentBase, ATCTImageTransform):
 
     @security.protected(View)
     def tag(self, **kwargs):
-        """Generate image tag using the api of the ImageField
-        """
+        # Generate image tag using the api of the ImageField.
         if 'title' not in kwargs:
             kwargs['title'] = self.getImageCaption()
         return self.getField('image').tag(self, **kwargs)
diff --git a/Products/ATContentTypes/content/topic.py b/Products/ATContentTypes/content/topic.py
index d079fc2..5bf4e2c 100644
--- a/Products/ATContentTypes/content/topic.py
+++ b/Products/ATContentTypes/content/topic.py
@@ -179,8 +179,7 @@ def initializeArchetype(self, **kwargs):
 
     @security.protected(ChangeTopics)
     def validateAddCriterion(self, indexId, criteriaType):
-        """Is criteriaType acceptable criteria for indexId
-        """
+        # Is criteriaType acceptable criteria for indexId.
         return criteriaType in self.criteriaByIndexId(indexId)
 
     @security.protected(ChangeTopics)
@@ -192,73 +191,63 @@ def criteriaByIndexId(self, indexId):
 
     @security.protected(ChangeTopics)
     def listCriteriaTypes(self):
-        """List available criteria types as dict
-        """
+        # List available criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listCriteriaMetaTypes(self):
-        """List available criteria
-        """
+        # List available criteria.
         val = sorted(_criterionRegistry.listTypes())
         return val
 
     @security.protected(ChangeTopics)
     def listSearchCriteriaTypes(self):
-        """List available search criteria types as dict
-        """
+        # List available search criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listSearchCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listSearchCriteriaMetaTypes(self):
-        """List available search criteria
-        """
+        # List available search criteria.
         val = sorted(_criterionRegistry.listSearchTypes())
         return val
 
     @security.protected(ChangeTopics)
     def listSortCriteriaTypes(self):
-        """List available sort criteria types as dict
-        """
+        # List available sort criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listSortCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listSortCriteriaMetaTypes(self):
-        """List available sort criteria
-        """
+        # List available sort criteria.
         val = sorted(_criterionRegistry.listSortTypes())
         return val
 
     @security.protected(View)
     def listCriteria(self):
-        """Return a list of our criteria objects.
-        """
+        # Return a list of our criteria objects.
         val = self.objectValues(self.listCriteriaMetaTypes())
         return val
 
     @security.protected(View)
     def listSearchCriteria(self):
-        """Return a list of our search criteria objects.
-        """
+        # Return a list of our search criteria objects.
         return [val for val in self.listCriteria() if
                 IATTopicSearchCriterion.providedBy(val)]
 
     @security.protected(ChangeTopics)
     def hasSortCriterion(self):
-        """Tells if a sort criterai is already setup.
-        """
+        # Tells if a sort criteria is already setup.
         return not self.getSortCriterion() is None
 
     @security.protected(ChangeTopics)
     def getSortCriterion(self):
-        """Return the Sort criterion if setup.
-        """
+        # Return the Sort criterion if setup.
         for criterion in self.listCriteria():
             if IATTopicSortCriterion.providedBy(criterion):
                 return criterion
@@ -266,35 +255,30 @@ def getSortCriterion(self):
 
     @security.protected(ChangeTopics)
     def removeSortCriterion(self):
-        """remove the Sort criterion.
-        """
+        # Remove the Sort criterion.
         if self.hasSortCriterion():
             self.deleteCriterion(self.getSortCriterion().getId())
 
     @security.protected(ChangeTopics)
     def setSortCriterion(self, field, reversed):
-        """Set the Sort criterion.
-        """
+        # Set the Sort criterion.
         self.removeSortCriterion()
         self.addCriterion(field, 'ATSortCriterion')
         self.getSortCriterion().setReversed(reversed)
 
     @security.protected(ChangeTopics)
     def listIndicesByCriterion(self, criterion):
-        """
-        """
         return _criterionRegistry.indicesByCriterion(criterion)
 
     @security.protected(ChangeTopics)
     def listFields(self):
-        """Return a list of fields from portal_catalog.
-        """
+        # Return a list of fields from portal_catalog.
         tool = getToolByName(self, TOOLNAME)
         return tool.getEnabledFields()
 
     @security.protected(ChangeTopics)
     def listSortFields(self):
-        """Return a list of available fields for sorting."""
+        # Return a list of available fields for sorting.
         fields = [field
                   for field in self.listFields()
                   if self.validateAddCriterion(field[0], 'ATSortCriterion')]
@@ -302,8 +286,7 @@ def listSortFields(self):
 
     @security.protected(ChangeTopics)
     def listAvailableFields(self):
-        """Return a list of available fields for new criteria.
-        """
+        # Return a list of available fields for new criteria.
         current = [crit.Field() for crit in self.listCriteria()
                    if not IATTopicSortCriterion.providedBy(crit)]
         fields = self.listFields()
@@ -315,8 +298,7 @@ def listAvailableFields(self):
 
     @security.protected(View)
     def listSubtopics(self):
-        """Return a list of our subtopics.
-        """
+        # Return a list of our subtopics.
         val = self.objectValues(self.meta_type)
         check_p = getToolByName(self, 'portal_membership').checkPermission
         tops = []
@@ -329,23 +311,21 @@ def listSubtopics(self):
 
     @security.protected(View)
     def hasSubtopics(self):
-        """Returns true if subtopics have been created on this topic.
-        """
+        # Returns true if subtopics have been created on this topic.
         val = self.objectIds(self.meta_type)
         return not not val
 
     @security.protected(View)
     def listMetaDataFields(self, exclude=True):
-        """Return a list of metadata fields from portal_catalog.
-        """
+        # Return a list of metadata fields from portal_catalog.
         tool = getToolByName(self, TOOLNAME)
         return tool.getMetadataDisplay(exclude)
 
     @security.protected(View)
     def allowedCriteriaForField(self, field, display_list=False):
-        """ Return all valid criteria for a given field.  Optionally include
-            descriptions in list in format [(desc1, val1) , (desc2, val2)] for
-            javascript selector."""
+        # Return all valid criteria for a given field.  Optionally include
+        # descriptions in list in format [(desc1, val1) , (desc2, val2)] for
+        # javascript selector.
         tool = getToolByName(self, TOOLNAME)
         criteria = tool.getIndex(field).criteria
         allowed = [crit for crit in criteria
@@ -360,8 +340,7 @@ def allowedCriteriaForField(self, field, display_list=False):
 
     @security.protected(View)
     def buildQuery(self):
-        """Construct a catalog query using our criterion objects.
-        """
+        # Construct a catalog query using our criterion objects.
         result = {}
         clear_start = False
         criteria = self.listCriteria()
@@ -458,8 +437,7 @@ def queryCatalog(self, REQUEST=None, batch=False, b_size=None,
 
     @security.protected(ChangeTopics)
     def addCriterion(self, field, criterion_type):
-        """Add a new search criterion. Return the resulting object.
-        """
+        # Add a new search criterion. Return the resulting object.
         newid = 'crit__%s_%s' % (field, criterion_type)
         ct = _criterionRegistry[criterion_type]
         crit = ct(newid, field)
@@ -469,8 +447,7 @@ def addCriterion(self, field, criterion_type):
 
     @security.protected(ChangeTopics)
     def deleteCriterion(self, criterion_id):
-        """Delete selected criterion.
-        """
+        # Delete selected criterion.
         if isinstance(criterion_id, StringType):
             self._delObject(criterion_id)
         elif type(criterion_id) in (ListType, TupleType):
@@ -479,8 +456,7 @@ def deleteCriterion(self, criterion_id):
 
     @security.protected(View)
     def getCriterion(self, criterion_id):
-        """Get the criterion object.
-        """
+        # Get the criterion object.
         try:
             return self._getOb('crit__%s' % criterion_id)
         except AttributeError:
@@ -488,32 +464,28 @@ def getCriterion(self, criterion_id):
 
     @security.protected(AddPortalContent)
     def addSubtopic(self, id):
-        """Add a new subtopic.
-        """
+        # Add a new subtopic.
         ti = self.getTypeInfo()
         ti.constructInstance(self, id)
         return self._getOb(id)
 
     @security.protected(View)
     def synContentValues(self):
-        """Getter for syndacation support
-        """
+        # Getter for syndication support.
         syn_tool = getToolByName(self, 'portal_syndication')
         limit = int(syn_tool.getMaxItems(self))
         return self.queryCatalog(sort_limit=limit)[:limit]
 
     @security.public
     def canSetDefaultPage(self):
-        """
-        Override BrowserDefaultMixin because default page stuff doesn't make
-        sense for topics.
-        """
+        # Override BrowserDefaultMixin because default page stuff doesn't make
+        # sense for topics.
         return False
 
     @security.public
     def getCriteriaUniqueWidgetAttr(self, attr):
-        """Get a unique list values for a specific attribute for all widgets
-           on all criteria"""
+        # Get a unique list values for a specific attribute for all widgets
+        # on all criteria.
         criteria = self.listCriteria()
         order = []
         for crit in criteria:
@@ -534,10 +506,8 @@ def HEAD(self, REQUEST, RESPONSE):
 
     @security.protected(ChangeTopics)
     def setText(self, value, **kwargs):
-        """Body text mutator
-
-        * hook into mxTidy an replace the value with the tidied value
-        """
+        # Body text mutator.
+        # Hook into mxTidy and replace the value with the tidied value.
         field = self.getField('text')
 
         # When an object is initialized the first time we have to
@@ -557,9 +527,8 @@ def setText(self, value, **kwargs):
 
     @security.private
     def getTidyOutput(self, field):
-        """Get the tidied output for a specific field from the request
-        if available
-        """
+        # Get the tidied output for a specific field from the request
+        # if available.
         request = getattr(self, 'REQUEST', None)
         if request is not None and isinstance(request, HTTPRequest):
             tidyAttribute = '%s_tidier_data' % field.getName()
diff --git a/Products/ATContentTypes/criteria/base.py b/Products/ATContentTypes/criteria/base.py
index 3bd596a..bc1fbb5 100644
--- a/Products/ATContentTypes/criteria/base.py
+++ b/Products/ATContentTypes/criteria/base.py
@@ -66,12 +66,11 @@ def __init__(self, id=None, field=None, oid=None):
 
     @security.protected(View)
     def getId(self):
-        """Get the object id"""
+        # Get the object id.
         return str(self.id)
 
     def setId(self, value, *kw):
-        """Setting a new ID isn't allowed
-        """
+        # Setting a new ID isn't allowed.
         assert value == self.getId(), 'You are not allowed to change the id'
 
     @security.protected(View)
@@ -85,8 +84,7 @@ def Description(self):
 
     @security.protected(View)
     def getCriteriaItems(self):
-        """Return a sequence of items to be used to build the catalog query.
-        """
+        # Return a sequence of items to be used to build the catalog query.
         return ()
 
 # because I don't register the class I've to generator it on my own. Otherwise
diff --git a/Products/ATContentTypes/criteria/date.py b/Products/ATContentTypes/criteria/date.py
index 2560e27..4a555d5 100644
--- a/Products/ATContentTypes/criteria/date.py
+++ b/Products/ATContentTypes/criteria/date.py
@@ -110,8 +110,7 @@ class ATDateCriteria(ATBaseCriterion):
 
     @security.protected(View)
     def getCriteriaItems(self):
-        """Return a sequence of items to be used to build the catalog query.
-        """
+        # Return a sequence of items to be used to build the catalog query.
         if self.value is not None:
             field = self.Field()
             value = self.Value()
diff --git a/Products/ATContentTypes/criteria/portaltype.py b/Products/ATContentTypes/criteria/portaltype.py
index b468546..930878f 100644
--- a/Products/ATContentTypes/criteria/portaltype.py
+++ b/Products/ATContentTypes/criteria/portaltype.py
@@ -39,7 +39,7 @@ class ATPortalTypeCriterion(ATSelectionCriterion):
 
     @security.protected(View)
     def getCurrentValues(self):
-        """Return enabled portal types"""
+        # Return enabled portal types.
         vocab = queryUtility(IVocabularyFactory, name=VOCAB_ID)(self)
         portal_types = getToolByName(self, 'portal_types', None)
         result = []
diff --git a/Products/ATContentTypes/criteria/simpleint.py b/Products/ATContentTypes/criteria/simpleint.py
index e40ce6d..5fd1674 100644
--- a/Products/ATContentTypes/criteria/simpleint.py
+++ b/Products/ATContentTypes/criteria/simpleint.py
@@ -108,7 +108,7 @@ def getCriteriaItems(self):
 
     @security.protected(View)
     def post_validate(self, REQUEST, errors):
-        """Check that Value2 is set if range is set to min:max"""
+        # Check that Value2 is set if range is set to min:max.
         direction = REQUEST.get('direction', self.getDirection())
         val2 = REQUEST.get('value2', self.Value2())
         if direction == 'min:max' and not val2 and not val2 == 0:
diff --git a/Products/ATContentTypes/tool/atct.py b/Products/ATContentTypes/tool/atct.py
index f9d74bf..5bb3f6f 100644
--- a/Products/ATContentTypes/tool/atct.py
+++ b/Products/ATContentTypes/tool/atct.py
@@ -73,8 +73,7 @@ def om_icons(self):
 
     @security.protected(ManagePortal)
     def recreateImageScales(self, portal_type=None):
-        """Recreates AT Image scales (doesn't remove unused!)
-        """
+        # Recreates AT Image scales (doesn't remove unused!)
         if portal_type is None:
             portal_type = tuple(self.image_types)
         out = StringIO()
@@ -109,8 +108,7 @@ def recreateImageScales(self, portal_type=None):
 
     @security.protected(ManagePortal)
     def listContentTypes(self):
-        """List all content types. Used for image/folder_types property.
-        """
+        # List all content types. Used for image/folder_types property.
         ttool = getToolByName(self, 'portal_types')
         return ttool.listContentTypes()
 
diff --git a/Products/ATContentTypes/tool/factory.py b/Products/ATContentTypes/tool/factory.py
index cd63911..ed35c57 100644
--- a/Products/ATContentTypes/tool/factory.py
+++ b/Products/ATContentTypes/tool/factory.py
@@ -321,7 +321,7 @@ def manage_setPortalFactoryTypes(self, REQUEST=None, listOfTypeIds=None):
             REQUEST.RESPONSE.redirect('manage_main')
 
     def doCreate(self, obj, id=None, **kw):
-        """Create a real object from a temporary object."""
+        # Create a real object from a temporary object.
         if self.isTemporary(obj=obj):
             if id is not None:
                 id = id.strip()
@@ -347,8 +347,8 @@ def doCreate(self, obj, id=None, **kw):
         return obj
 
     def _fixRequest(self):
-        """Our before_publishing_traverse call mangles URL0.  This fixes up
-        the REQUEST."""
+        # Our before_publishing_traverse call mangles URL0.
+        # This fixes up the REQUEST.
         # Everything seems to work without this method being called at all...
         factory_info = self.REQUEST.get(FACTORY_INFO, None)
         if not factory_info:
@@ -375,7 +375,7 @@ def _fixRequest(self):
         # TODO fix URLPATHn, BASEPATHn here too
 
     def isTemporary(self, obj):
-        """Check to see if an object is temporary"""
+        # Check to see if an object is temporary.
         ob = aq_base(aq_parent(aq_inner(obj)))
         return hasattr(ob, 'meta_type') \
             and ob.meta_type == TempFolder.meta_type
diff --git a/Products/ATContentTypes/tool/metadata.py b/Products/ATContentTypes/tool/metadata.py
index 296873a..0e147b7 100644
--- a/Products/ATContentTypes/tool/metadata.py
+++ b/Products/ATContentTypes/tool/metadata.py
@@ -69,38 +69,32 @@ def edit(self, is_required, supply_default, default_value,
     #
     @security.protected(View)
     def isMultiValued(self):
-        """ Can this element hold multiple values?
-        """
+        # Can this element hold multiple values?
         return self.is_multi_valued
 
     @security.protected(View)
     def isRequired(self):
-        """ Must this element be supplied?
-        """
+        # Must this element be supplied?
         return self.is_required
 
     @security.protected(View)
     def supplyDefault(self):
-        """ Should the tool supply a default?
-        """
+        # Should the tool supply a default?
         return self.supply_default
 
     @security.protected(View)
     def defaultValue(self):
-        """ If so, what is the default?
-        """
+        # If so, what is the default?
         return self.default_value
 
     @security.protected(View)
     def enforceVocabulary(self):
-        """ Should the tool enforce the policy's vocabulary?
-        """
+        # Should the tool enforce the policy's vocabulary?
         return self.enforce_vocabulary
 
     @security.protected(View)
     def allowedVocabulary(self):
-        """ What are the allowed values?
-        """
+        # What are the allowed values?
         return self.allowed_vocabulary
 
 InitializeClass(MetadataElementPolicy)
@@ -129,17 +123,13 @@ def _makePolicy(self):
 
     @security.protected(View)
     def isMultiValued(self):
-        """
-            Is this element multi-valued?
-        """
+        # Is this element multi-valued?
         return self.is_multi_valued
 
     @security.protected(View)
     def getPolicy(self, typ=None):
-        """ Find the policy for this element for objects of the given type.
-
-        o Return a default, if none found.
-        """
+        # Find the policy for this element for objects of the given type.
+        # Return a default, if none found.
         try:
             return self.policies[typ].__of__(self)
         except KeyError:
@@ -147,8 +137,7 @@ def getPolicy(self, typ=None):
 
     @security.protected(View)
     def listPolicies(self):
-        """ Return a list of all policies for this element.
-        """
+        # Return a list of all policies for this element.
         res = []
         for k, v in self.policies.items():
             res.append((k, v.__of__(self)))
@@ -156,8 +145,7 @@ def listPolicies(self):
 
     @security.protected(ManagePortal)
     def addPolicy(self, typ):
-        """ Add a policy to this element for objects of the given type.
-        """
+        # Add a policy to this element for objects of the given type.
         if typ is None:
             raise MetadataError("Can't replace default policy.")
 
@@ -168,10 +156,8 @@ def addPolicy(self, typ):
 
     @security.protected(ManagePortal)
     def removePolicy(self, typ):
-        """ Remove the policy from this element for objects of the given type.
-
-        o Do *not* remvoe the default, however.
-        """
+        # Remove the policy from this element for objects of the given type.
+        # Do *not* remove the default, however.
         if typ is None:
             raise MetadataError("Can't remove default policy.")
         del self.policies[typ]
@@ -209,8 +195,7 @@ def __init__(self, id, element_specs=()):
     def addElementPolicy(self, element, content_type, is_required,
                          supply_default, default_value, enforce_vocabulary,
                          allowed_vocabulary, REQUEST=None):
-        """ Add a type-specific policy for one of our elements.
-        """
+        # Add a type-specific policy for one of our elements.
         if content_type == '<default>':
             content_type = None
 
@@ -228,8 +213,7 @@ def addElementPolicy(self, element, content_type, is_required,
     @security.protected(ManagePortal)
     def removeElementPolicy(self, element, content_type, REQUEST=None
                             ):
-        """ Remvoe a type-specific policy for one of our elements.
-        """
+        # Remove a type-specific policy for one of our elements.
         if content_type == '<default>':
             content_type = None
 
@@ -245,10 +229,8 @@ def removeElementPolicy(self, element, content_type, REQUEST=None
     def updateElementPolicy(self, element, content_type, is_required,
                             supply_default, default_value, enforce_vocabulary,
                             allowed_vocabulary, REQUEST=None):
-        """ Update a policy for one of our elements
-
-        o 'content_type' will be '<default>' when we edit the default.
-        """
+        # Update a policy for one of our elements.
+        # 'content_type' will be '<default>' when we edit the default.
         if content_type == '<default>':
             content_type = None
         spec = self.getElementSpec(element)
@@ -266,8 +248,7 @@ def updateElementPolicy(self, element, content_type, is_required,
     #
     @security.protected(ManagePortal)
     def listElementSpecs(self):
-        """ Return a list of ElementSpecs representing the elements we manage.
-        """
+        # Return a list of ElementSpecs representing the elements we manage.
         res = []
         for k, v in self.element_specs.items():
             res.append((k, v.__of__(self)))
@@ -275,14 +256,12 @@ def listElementSpecs(self):
 
     @security.protected(ManagePortal)
     def getElementSpec(self, element):
-        """ Return an ElementSpec for the given 'element'.
-        """
+        # Return an ElementSpec for the given 'element'.
         return self.element_specs[element].__of__(self)
 
     @security.protected(ManagePortal)
     def addElementSpec(self, element, is_multi_valued, REQUEST=None):
-        """ Add 'element' to our list of managed elements.
-        """
+        # Add 'element' to our list of managed elements.
         # Don't replace.
         if element in self.element_specs:
             return
@@ -297,8 +276,7 @@ def addElementSpec(self, element, is_multi_valued, REQUEST=None):
 
     @security.protected(ManagePortal)
     def removeElementSpec(self, element, REQUEST=None):
-        """ Remove 'element' from our list of managed elements.
-        """
+        # Remove 'element' from our list of managed elements.
         del self.element_specs[element]
 
         if REQUEST is not None:
@@ -309,10 +287,8 @@ def removeElementSpec(self, element, REQUEST=None):
 
     @security.protected(ManagePortal)
     def listPolicies(self, typ=None):
-        """ Show all policies for a given content type
-
-        o If 'typ' is none, return the list of default policies.
-        """
+        # Show all policies for a given content type.
+        # If 'typ' is none, return the list of default policies.
         result = []
         for element, spec in self.listElementSpecs():
             result.append((element, spec.getPolicy(typ)))
@@ -410,49 +386,42 @@ def manage_removeSchemas(self, schema_ids, REQUEST):
 
     @security.private
     def getFullName(self, userid):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return userid   # TODO: do lookup here
 
     @security.public
     def getPublisher(self):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.publisher
 
     @security.public
     def listAllowedSubjects(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Subject', content, content_type)
 
     @security.public
     def listAllowedFormats(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Format', content, content_type)
 
     @security.public
     def listAllowedLanguages(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Language', content, content_type)
 
     @security.public
     def listAllowedRights(self, content=None, content_type=None):
-        """ See IMetadata Tool.
-        """
+        # See IMetadata Tool.
         return self.listAllowedVocabulary(
             'DCMI', 'Rights', content, content_type)
 
     @security.public
     def listAllowedVocabulary(self, schema, element, content=None,
                               content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         schema_def = getattr(self, schema)
         spec = schema_def.getElementSpec(element)
         if content_type is None and content:
@@ -461,16 +430,14 @@ def listAllowedVocabulary(self, schema, element, content=None,
 
     @security.public
     def listSchemas(self):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         result = [('DCMI', self.DCMI)]
         result.extend(self.objectItems([MetadataSchema.meta_type]))
         return result
 
     @security.protected(ModifyPortalContent)
     def addSchema(self, schema_id, elements=()):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         if schema_id == 'DCMI' or schema_id in self.objectIds():
             raise KeyError('Duplicate schema ID: %s' % schema_id)
 
@@ -481,8 +448,7 @@ def addSchema(self, schema_id, elements=()):
 
     @security.protected(ModifyPortalContent)
     def removeSchema(self, schema_id):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         if schema_id == 'DCMI' or schema_id not in self.objectIds():
             raise KeyError('Invalid schema ID: %s' % schema_id)
 
@@ -490,8 +456,7 @@ def removeSchema(self, schema_id):
 
     @security.protected(ModifyPortalContent)
     def setInitialMetadata(self, content):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         for schema_id, schema in self.listSchemas():
             for element, policy in schema.listPolicies(
                     content.getPortalTypeName()):
@@ -509,8 +474,7 @@ def setInitialMetadata(self, content):
 
     @security.protected(View)
     def validateMetadata(self, content):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         for schema_id, schema in self.listSchemas():
             for element, policy in schema.listPolicies(
                     content.getPortalTypeName()):
diff --git a/Products/ATContentTypes/tool/topic.py b/Products/ATContentTypes/tool/topic.py
index 1fceec0..554c6db 100644
--- a/Products/ATContentTypes/tool/topic.py
+++ b/Products/ATContentTypes/tool/topic.py
@@ -49,7 +49,7 @@ def __init__(self):
         self.allowed_portal_types = []
 
     def getCriteriaForIndex(self, index, as_dict=False):
-        """ Returns the valid criteria for a given index """
+        # Returns the valid criteria for a given index.
         catalog_tool = getToolByName(self, 'portal_catalog')
         try:
             indexObj = catalog_tool.Indexes[index]
@@ -71,8 +71,8 @@ def getCriteriaForIndex(self, index, as_dict=False):
     @security.protected(ManagePortal)
     def addIndex(self, index, friendlyName='', description='',
                  enabled=False, criteria=None):
-        """ Add a new index along with descriptive information to the index
-            registry """
+        # Add a new index along with descriptive information to the index
+        # registry.
         if criteria is None:
             criteria = self.getCriteriaForIndex(index)
         if index in self.topic_indexes:
@@ -91,8 +91,8 @@ def addIndex(self, index, friendlyName='', description='',
     @security.protected(ManagePortal)
     def addMetadata(self, metadata, friendlyName='',
                     description='', enabled=False):
-        """ Add a new metadata field along with descriptive information to the
-            metadata registry """
+        # Add a new metadata field along with descriptive information to the
+        # metadata registry.
         if metadata in self.topic_metadata:
             objMeta = self.topic_metadata[metadata]
             objMeta.friendlyName = friendlyName
@@ -107,8 +107,8 @@ def addMetadata(self, metadata, friendlyName='',
     @security.protected(ManagePortal)
     def updateIndex(self, index, friendlyName=None,
                     description=None, enabled=None, criteria=None):
-        """ Updates an existing index in the registry, unrecognized values are
-            added """
+        # Updates an existing index in the registry, unrecognized values are
+        # added.
         indexes = self.topic_indexes
         if friendlyName is None:
             friendlyName = indexes[index].friendlyName
@@ -124,8 +124,8 @@ def updateIndex(self, index, friendlyName=None,
     @security.protected(ManagePortal)
     def updateMetadata(self, metadata, friendlyName=None,
                        description=None, enabled=None):
-        """ Updates an existing metadata field in the registry, unrecognized values are
-            added """
+        # Updates an existing metadata field in the registry, unrecognized
+        # values are added.
         meta = self.topic_metadata
         if friendlyName is None:
             friendlyName = meta[metadata].friendlyName
@@ -137,21 +137,21 @@ def updateMetadata(self, metadata, friendlyName=None,
 
     @security.protected(ManagePortal)
     def removeIndex(self, index):
-        """ Removes an existing index from the registry """
+        # Removes an existing index from the registry.
         if index in self.topic_indexes:
             del self.topic_indexes[index]
             self._p_changed = True
 
     @security.protected(ManagePortal)
     def removeMetadata(self, metadata):
-        """ Removes an existing metadata field from the registry """
+        # Removes an existing metadata field from the registry.
         if metadata in self.topic_metadata:
             del self.topic_metadata[metadata]
             self._p_changed = True
 
     @security.protected(ManagePortal)
     def createInitialIndexes(self):
-        """ create indexes for all indexes in the catalog """
+        # Create indexes for all indexes in the catalog.
         indexes = self.listCatalogFields()
         for i in indexes:
             if i not in self.topic_indexes:
@@ -161,7 +161,7 @@ def createInitialIndexes(self):
 
     @security.protected(ManagePortal)
     def createInitialMetadata(self):
-        """ create metadata for all indexes in the catalog """
+        # Create metadata for all indexes in the catalog.
         metas = self.listCatalogMetadata()
         for i in metas:
             if i not in self.topic_metadata:
@@ -171,7 +171,7 @@ def createInitialMetadata(self):
 
     @security.private
     def listCatalogFields(self):
-        """ Return a list of fields from portal_catalog. """
+        # Return a list of fields from portal_catalog.
         pcatalog = getToolByName(self, 'portal_catalog')
         available = pcatalog.indexes()
         val = sorted([field for field in available])
@@ -179,14 +179,14 @@ def listCatalogFields(self):
 
     @security.private
     def listCatalogMetadata(self):
-        """ Return a list of columns from portal_catalog. """
+        # Return a list of columns from portal_catalog.
         pcatalog = getToolByName(self, 'portal_catalog')
         available = pcatalog.schema()
         val = sorted([field for field in available])
         return val
 
     def getAllPortalTypes(self):
-        """ returns a list of (id, title)-tuples for each type """
+        # Returns a list of (id, title)-tuples for each type.
         types_tool = getToolByName(self, 'portal_types')
         types = types_tool.listTypeInfo()
 
@@ -194,8 +194,8 @@ def getAllPortalTypes(self):
         return all_types
 
     def getAllowedPortalTypes(self, populate_for_end_usage=1):
-        """ Return all portal_types as an (id,title) tuple that are allowed
-            to search with """
+        # Return all portal_types as an (id,title) tuple that are allowed
+        # to search with.
         all_types = self.getAllPortalTypes()
 
         if populate_for_end_usage == 0:
@@ -212,19 +212,19 @@ def getAllowedPortalTypes(self, populate_for_end_usage=1):
         return filtered_types
 
     def getEnabledIndexes(self):
-        """ Returns all TopicIndex objects for enabled indexes """
+        # Returns all TopicIndex objects for enabled indexes.
         indexes = self.topic_indexes
         results = [i for i in indexes.values() if i.enabled]
         return results
 
     def getEnabledMetadata(self):
-        """ Returns all TopicIndex objects for enabled metadata """
+        # Returns all TopicIndex objects for enabled metadata.
         meta = self.topic_metadata
         results = [i for i in meta.values() if i.enabled]
         return results
 
     def getIndexDisplay(self, enabled=True):
-        """ Return DisplayList of Indexes and their friendly names """
+        # Return DisplayList of Indexes and their friendly names.
         if enabled:
             index_names = self.getIndexes(True)
         else:
@@ -235,7 +235,7 @@ def getIndexDisplay(self, enabled=True):
         return DisplayList(field_list)
 
     def getMetadataDisplay(self, enabled=True):
-        """ Return DisplayList of Metadata and their friendly names """
+        # Return DisplayList of Metadata and their friendly names.
         if enabled:
             meta_names = self.getAllMetadata(True)
         else:
@@ -246,8 +246,8 @@ def getMetadataDisplay(self, enabled=True):
         return DisplayList(field_list)
 
     def getEnabledFields(self):
-        """ Returns a list of tuples containing the index name, friendly name,
-            and description for each enabled index. """
+        # Returns a list of tuples containing the index name, friendly name,
+        # and description for each enabled index.
         enabledIndexes = self.getEnabledIndexes()
         dec_fields = sorted([(i.friendlyName.lower() or
                               i.index.lower(), i.index, i.friendlyName or
@@ -256,9 +256,8 @@ def getEnabledFields(self):
         return fields
 
     def getFriendlyName(self, index):
-        """ Returns the friendly name for a given index name, or the given
-            index if the firendlyname is empty or the index is not recognized
-        """
+        # Returns the friendly name for a given index name, or the given
+        # index if the firendlyname is empty or the index is not recognized.
         if index in self.topic_indexes:
             return self.getIndex(index).friendlyName or index
         else:
@@ -266,8 +265,8 @@ def getFriendlyName(self, index):
 
     @security.protected(ManagePortal)
     def getIndexes(self, enabledOnly=False):
-        """ Returns the full list of available indexes, optionally filtering
-            out those that are not marked enabled """
+        # Returns the full list of available indexes, optionally filtering
+        # out those that are not marked enabled.
         if enabledOnly:
             indexes_dec = [(i.index.lower(), i.index)
                            for i in self.getEnabledIndexes()]
@@ -282,8 +281,8 @@ def getIndexes(self, enabledOnly=False):
 
     @security.protected(ManagePortal)
     def getAllMetadata(self, enabledOnly=False):
-        """ Returns the full list of available metadata fields, optionally
-            filtering out those that are not marked enabled """
+        # Returns the full list of available metadata fields, optionally
+        # filtering out those that are not marked enabled.
         if enabledOnly:
             meta_dec = [(i.index.lower(), i.index)
                         for i in self.getEnabledMetadata()]
@@ -297,14 +296,14 @@ def getAllMetadata(self, enabledOnly=False):
         return metadata
 
     def getIndex(self, index):
-        """ Returns the TopicIndex object for a given index name """
+        # Returns the TopicIndex object for a given index name.
         if index in self.topic_indexes:
             return self.topic_indexes[index]
         else:
             raise AttributeError('Index ' + str(index) + ' not found')
 
     def getMetadata(self, metadata):
-        """ Returns the TopicIndex object for a given metadata name """
+        # Returns the TopicIndex object for a given metadata name.
         if metadata in self.topic_metadata:
             return self.topic_metadata[metadata]
         else:
@@ -312,7 +311,7 @@ def getMetadata(self, metadata):
 
     @security.protected(ManagePortal)
     def manage_saveTopicSetup(self, REQUEST=None):
-        """ Set indexes and metadata from form """
+        # Set indexes and metadata from form.
         if REQUEST is None:
             return 'Nothing saved.'
 
@@ -335,7 +334,7 @@ def manage_saveTopicSetup(self, REQUEST=None):
 
     @security.protected(ManagePortal)
     def manage_saveTopicSetupTypes(self, REQUEST=None):
-        """ Set portal types from form """
+        # Set portal types from form.
         if REQUEST is None:
             return 'Nothing saved.'
 


Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2016-05-04T13:29:17+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.ATContentTypes/commit/74af184634f42aaae5a410e864b9fe8bf83d4b27

Merge pull request #33 from plone/apply-hotfix-20160419

Apply hotfix 20160419

Files changed:
M CHANGES.rst
M Products/ATContentTypes/content/base.py
M Products/ATContentTypes/content/document.py
M Products/ATContentTypes/content/event.py
M Products/ATContentTypes/content/file.py
M Products/ATContentTypes/content/folder.py
M Products/ATContentTypes/content/image.py
M Products/ATContentTypes/content/link.py
M Products/ATContentTypes/content/newsitem.py
M Products/ATContentTypes/content/topic.py
M Products/ATContentTypes/criteria/base.py
M Products/ATContentTypes/criteria/date.py
M Products/ATContentTypes/criteria/portaltype.py
M Products/ATContentTypes/criteria/simpleint.py
M Products/ATContentTypes/tool/atct.py
M Products/ATContentTypes/tool/factory.py
M Products/ATContentTypes/tool/metadata.py
M Products/ATContentTypes/tool/topic.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9192c5b..440fe52 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ New:
 
 Fixes:
 
+- Removed docstrings from some methods to avoid publishing them.  From
+  Products.PloneHotfix20160419.  [maurits]
+
 - Fixed AttributeError ``unmarkCreationFlag`` during installation.
   This could happen when there was already a Members folder from
   ``plone.app.contenttypes``.  Fixes issue
diff --git a/Products/ATContentTypes/content/base.py b/Products/ATContentTypes/content/base.py
index 4509824..a756db3 100644
--- a/Products/ATContentTypes/content/base.py
+++ b/Products/ATContentTypes/content/base.py
@@ -109,11 +109,10 @@ class ATCTMixin(BrowserDefaultMixin):
 
     @security.protected(ModifyPortalContent)
     def initializeArchetype(self, **kwargs):
-        """called by the generated add* factory in types tool
-
-        Overwritten to call edit() instead of update() to have the cmf
-        compatibility method.
-        """
+        # Called by the generated add* factory in types tool.
+        #
+        # Overwritten to call edit() instead of update() to have the cmf
+        # compatibility method.
         try:
             self.initializeLayers()
             self.markCreationFlag()
@@ -134,8 +133,7 @@ def initializeArchetype(self, **kwargs):
 
     @security.private
     def copyLayoutFromParent(self):
-        """Copies the layout from the parent object if it's of the same type.
-        """
+        # Copies the layout from the parent object if it's of the same type.
         parent = aq_parent(aq_inner(self))
         if parent is not None:
             # Only set the layout if we are the same type as out parent object
@@ -150,9 +148,8 @@ def copyLayoutFromParent(self):
 
     @security.protected(ModifyPortalContent)
     def edit(self, *args, **kwargs):
-        """Reimplementing edit() to have a compatibility method for the old
-        cmf edit() method
-        """
+        # Reimplementing edit() to have a compatibility method for the old
+        # cmf edit() method
         initializing = kwargs.get('_initializing_', False)
         if initializing:
             del kwargs['_initializing_']
@@ -174,14 +171,12 @@ def edit(self, *args, **kwargs):
 
     @security.private
     def cmf_edit(self, *args, **kwargs):
-        """Overwrite this method to make AT compatible with the crappy
-        CMF edit()
-        """
+        # Overwrite this method to make AT compatible with the crappy
+        # CMF edit()
         raise NotImplementedError("cmf_edit method isn't implemented")
 
     def exclude_from_nav(self):
-        """Accessor for excludeFromNav field
-        """
+        # Accessor for excludeFromNav field.
         field = self.getField('excludeFromNav')
         if field is not None:
             return field.get(self)
@@ -190,8 +185,7 @@ def exclude_from_nav(self):
 
     @security.protected(View)
     def get_size(self):
-        """ZMI / Plone get size method
-        """
+        # ZMI / Plone get size method.
         f = self.getPrimaryField()
         if f is None:
             return 0
@@ -208,10 +202,8 @@ class ATCTContent(ATCTMixin, BaseContent):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set title according to the id on webdav/ftp PUTs.
-        """
+        # After webdav/ftp PUT method.
+        # Set title according to the id on webdav/ftp PUTs.
         id = self.getId()
         title = self.Title()
         if not title:
@@ -268,8 +260,7 @@ def index_html(self, REQUEST=None, RESPONSE=None):
 
     @security.protected(View)
     def get_data(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         data = aq_base(self.getPrimaryField().getAccessor(self)())
         return str(getattr(data, 'data', data))
 
@@ -277,14 +268,12 @@ def get_data(self):
 
     @security.protected(View)
     def size(self):
-        """Get size (image_view.pt)
-        """
+        # Get size (image_view.pt).
         return self.get_size()
 
     @security.protected(View)
     def get_content_type(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         f = self.getPrimaryField().getAccessor(self)()
         # 'application/octet-stream'
         return f and f.getContentType() or 'text/plain'
@@ -316,8 +305,7 @@ def manage_edit(self, title, content_type, precondition='',
             return self.manage_main(self, REQUEST, manage_tabs_message=message)
 
     def _cleanupFilename(self, filename, request=None):
-        """Cleans the filename from unwanted or evil chars
-        """
+        # Cleans the filename from unwanted or evil chars.
         if filename and not isinstance(filename, unicode):
             encoding = self.getCharset()
             filename = unicode(filename, encoding)
@@ -326,10 +314,8 @@ def _cleanupFilename(self, filename, request=None):
         return filename and filename.encode(encoding) or None
 
     def _setATCTFileContent(self, value, **kwargs):
-        """Set ID based on name of uploaded file, Title.
-
-        Or possibly other conditions.
-        """
+        # Set ID based on name of uploaded file, Title.
+        # Or possibly other conditions.
         field = self.getPrimaryField()
         # set first then get the filename
         field.set(self, value, **kwargs)  # set is ok
@@ -373,8 +359,7 @@ def _should_set_id_to_filename(self, filename, title):
 
     @security.protected(View)
     def post_validate(self, REQUEST=None, errors=None):
-        """Validates upload file and id
-        """
+        # Validates upload file and id.
         id = REQUEST.form.get('id')
         field = self.getPrimaryField()
         f_name = field.getName()
@@ -414,11 +399,9 @@ def post_validate(self, REQUEST=None, errors=None):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set the title according to the uploaded filename if the title
-        is empty or set it to the id if no filename is given.
-        """
+        # After webdav/ftp PUT method.
+        # Set the title according to the uploaded filename if the title
+        # is empty or set it to the id if no filename is given.
         id = self.getId()
         title = self.Title()
         if not title:
@@ -449,7 +432,7 @@ class ATCTFolder(ATCTMixin, BaseFolder):
 
     @security.protected(View)
     def get_size(self):
-        """Returns 1 as folders have no size."""
+        # Returns 1 as folders have no size.
         return 1
 
 InitializeClass(ATCTFolder)
@@ -469,15 +452,13 @@ def __browser_default__(self, request):
 
     @security.protected(View)
     def get_size(self):
-        """Returns 1 as folders have no size."""
+        # Returns 1 as folders have no size.
         return 1
 
     @security.private
     def manage_afterMKCOL(self, id, result, REQUEST=None, RESPONSE=None):
-        """After MKCOL handler
-
-        Set title according to the id
-        """
+        # After MKCOL handler.
+        # Set title according to the id.
         # manage_afterMKCOL is called in the context of the parent
         # folder, *not* in the context of the new folder!
         new = getattr(self, id)
diff --git a/Products/ATContentTypes/content/document.py b/Products/ATContentTypes/content/document.py
index 2167138..c992be8 100644
--- a/Products/ATContentTypes/content/document.py
+++ b/Products/ATContentTypes/content/document.py
@@ -80,28 +80,24 @@ class ATDocumentBase(ATCTContent, HistoryAwareMixin):
 
     @security.protected(View)
     def CookedBody(self, stx_level='ignored'):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getText()
 
     @security.protected(ModifyPortalContent)
     def EditableBody(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getRawText()
 
     @security.protected(ModifyPortalContent)
     def setFormat(self, value):
-        """CMF compatibility method
-
-        The default mutator is overwritten to:
-
-          o add a conversion from stupid CMF content type
-            (e.g. structured-text) to real mime types used by MTR.
-
-          o Set format to default format if value is empty
-
-        """
+        # CMF compatibility method.
+        #
+        # The default mutator is overwritten to:
+        #
+        #   o add a conversion from stupid CMF content type
+        #     (e.g. structured-text) to real mime types used by MTR.
+        #
+        #   o Set format to default format if value is empty
         if not value:
             value = zconf.ATDocument.default_content_type
         else:
@@ -110,10 +106,8 @@ def setFormat(self, value):
 
     @security.protected(ModifyPortalContent)
     def setText(self, value, **kwargs):
-        """Body text mutator
-
-        * hook into mxTidy an replace the value with the tidied value
-        """
+        # Body text mutator.
+        # hook into mxTidy an replace the value with the tidied value
         field = self.getField('text')
 
         # When an object is initialized the first time we have to
@@ -135,8 +129,7 @@ def setText(self, value, **kwargs):
 
     @security.private
     def guessMimetypeOfText(self):
-        """For ftp/webdav upload: get the mimetype from the id and data
-        """
+        # For ftp/webdav upload: get the mimetype from the id and data.
         mtr = getToolByName(self, 'mimetypes_registry')
         id = self.getId()
         data = self.getRawText()
@@ -159,9 +152,8 @@ def guessMimetypeOfText(self):
 
     @security.private
     def getTidyOutput(self, field):
-        """Get the tidied output for a specific field from the request
-        if available
-        """
+        # Get the tidied output for a specific field from the request
+        # if available.
         request = getattr(self, 'REQUEST', None)
         if request is not None and isinstance(request, HTTPRequest):
             tidyAttribute = '%s_tidier_data' % field.getName()
@@ -177,9 +169,8 @@ def _notifyOfCopyTo(self, container, op=0):
 
     @security.private
     def manage_afterAdd(self, item, container):
-        """Fix text when created througt webdav
-        Guess the right mimetype from the id/data
-        """
+        # Fix text when created through webdav.
+        # Guess the right mimetype from the id/data.
         ATCTContent.manage_afterAdd(self, item, container)
         field = self.getField('text')
 
@@ -205,11 +196,8 @@ def cmf_edit(self, text_format, text, file='', safety_belt='', **kwargs):
     @security.private
     def manage_afterPUT(self, data, marshall_data, file, context, mimetype,
                         filename, REQUEST, RESPONSE):
-        """After webdav/ftp PUT method
-
-        Set title according to the id on webdav/ftp PUTs.
-        """
-
+        # After webdav/ftp PUT method.
+        # Set title according to the id on webdav/ftp PUTs.
         if '' == data:
             file.seek(0)
             content = file.read(65536)
diff --git a/Products/ATContentTypes/content/event.py b/Products/ATContentTypes/content/event.py
index 9886139..c751a1f 100644
--- a/Products/ATContentTypes/content/event.py
+++ b/Products/ATContentTypes/content/event.py
@@ -231,10 +231,8 @@ def cmf_edit(
 
     @security.protected(View)
     def post_validate(self, REQUEST=None, errors=None):
-        """Validates start and end date
-
-        End date must be after start date
-        """
+        # Validates start and end date.
+        # End date must be after start date.
         if 'startDate' in errors or 'endDate' in errors:
             # No point in validating bad input
             return
diff --git a/Products/ATContentTypes/content/file.py b/Products/ATContentTypes/content/file.py
index 6fa4a88..d6b0e4d 100644
--- a/Products/ATContentTypes/content/file.py
+++ b/Products/ATContentTypes/content/file.py
@@ -94,8 +94,7 @@ def index_html(self, REQUEST=None, RESPONSE=None):
 
     @security.protected(ModifyPortalContent)
     def setFile(self, value, **kwargs):
-        """Set id to uploaded id
-        """
+        # Set id to uploaded id.
         self._setATCTFileContent(value, **kwargs)
 
     def __str__(self):
@@ -105,8 +104,7 @@ def __str__(self):
 
     @security.public
     def getIcon(self, relative_to_portal=0):
-        """Calculate the icon using the mime type of the file
-        """
+        # Calculate the icon using the mime type of the file.
         field = self.getField('file')
         if not field or not self.get_size():
             # field is empty
@@ -144,8 +142,7 @@ def getIcon(self, relative_to_portal=0):
 
     @security.protected(View)
     def icon(self):
-        """for ZMI
-        """
+        # for ZMI
         return self.getIcon()
 
     @security.private
diff --git a/Products/ATContentTypes/content/folder.py b/Products/ATContentTypes/content/folder.py
index d9425db..cf08dfb 100644
--- a/Products/ATContentTypes/content/folder.py
+++ b/Products/ATContentTypes/content/folder.py
@@ -54,10 +54,9 @@ class ObsoleteATFolder(ATCTOrderedFolder):
 
     @security.protected(View)
     def getNextPreviousParentValue(self):
-        """If the parent node is also an IATFolder and has next/previous
-        navigation enabled, then let this folder have it enabled by
-        default as well.
-        """
+        # If the parent node is also an IATFolder and has next/previous
+        # navigation enabled, then let this folder have it enabled by
+        # default as well.
         parent = self.__parent__
         if IATFolder.providedBy(parent):
             return parent.getNextPreviousEnabled()
diff --git a/Products/ATContentTypes/content/image.py b/Products/ATContentTypes/content/image.py
index 102f590..72bcb05 100644
--- a/Products/ATContentTypes/content/image.py
+++ b/Products/ATContentTypes/content/image.py
@@ -90,7 +90,7 @@ def exportImage(self, format, width, height):
 
     @security.protected(ModifyPortalContent)
     def setImage(self, value, refresh_exif=True, **kwargs):
-        """Set ID to uploaded file name if Title is empty."""
+        # Set ID to uploaded file name if Title is empty.
         # set exif first because rotation might screw up the exif data
         # the exif methods can handle str, Pdata, OFSImage and file
         # like objects
@@ -98,15 +98,14 @@ def setImage(self, value, refresh_exif=True, **kwargs):
         self._setATCTFileContent(value, **kwargs)
 
     def _should_set_id_to_filename(self, filename, title):
-        """If title is blank, have the caller set my ID to the file's name."""
+        # If title is blank, have the caller set my ID to the file's name.
         # When the title is blank, sometimes the filename is returned as the
         # title.
         return filename == title or not title
 
     @security.protected(View)
     def tag(self, **kwargs):
-        """Generate image tag using the api of the ImageField
-        """
+        # Generate image tag using the api of the ImageField.
         return self.getField('image').tag(self, **kwargs)
 
     def __str__(self):
@@ -116,11 +115,9 @@ def __str__(self):
 
     @security.protected(View)
     def get_size(self):
-        """ZMI / Plone get size method
-
-        BBB: ImageField.get_size() returns the size of the original image + all
-        scales but we want only the size of the original image.
-        """
+        # ZMI / Plone get size method.
+        # BBB: ImageField.get_size() returns the size of the original image +
+        # all scales but we want only the size of the original image.
         img = self.getImage()
         if not getattr(aq_base(img), 'get_size', False):
             return 0
diff --git a/Products/ATContentTypes/content/link.py b/Products/ATContentTypes/content/link.py
index 7a2afb3..f3e4453 100644
--- a/Products/ATContentTypes/content/link.py
+++ b/Products/ATContentTypes/content/link.py
@@ -53,19 +53,16 @@ class ATLink(ATCTContent):
 
     @security.protected(ModifyPortalContent)
     def setRemoteUrl(self, value, **kwargs):
-        """remute url mutator
-
-        Use urlparse to sanify the url
-        Also see http://dev.plone.org/plone/ticket/3296
-        """
+        # Remute url mutator.
+        # Use urlparse to sanify the url
+        # Also see http://dev.plone.org/plone/ticket/3296
         if value:
             value = urlparse.urlunparse(urlparse.urlparse(value))
         self.getField('remoteUrl').set(self, value, **kwargs)
 
     @security.protected(View)
     def remote_url(self):
-        """CMF compatibility method
-        """
+        # CMF compatibility method.
         return self.getRemoteUrl()
 
     @security.private
@@ -76,8 +73,7 @@ def cmf_edit(self, remote_url=None, **kwargs):
 
     @security.protected(View)
     def getRemoteUrl(self):
-        """Sanitize output
-        """
+        # Sanitize output.
         value = self.Schema()['remoteUrl'].get(self)
         if not value:
             value = ''  # ensure we have a string
diff --git a/Products/ATContentTypes/content/newsitem.py b/Products/ATContentTypes/content/newsitem.py
index c2e4d55..da2b7f8 100644
--- a/Products/ATContentTypes/content/newsitem.py
+++ b/Products/ATContentTypes/content/newsitem.py
@@ -112,8 +112,7 @@ class ATNewsItem(ATDocumentBase, ATCTImageTransform):
 
     @security.protected(View)
     def tag(self, **kwargs):
-        """Generate image tag using the api of the ImageField
-        """
+        # Generate image tag using the api of the ImageField.
         if 'title' not in kwargs:
             kwargs['title'] = self.getImageCaption()
         return self.getField('image').tag(self, **kwargs)
diff --git a/Products/ATContentTypes/content/topic.py b/Products/ATContentTypes/content/topic.py
index d079fc2..5bf4e2c 100644
--- a/Products/ATContentTypes/content/topic.py
+++ b/Products/ATContentTypes/content/topic.py
@@ -179,8 +179,7 @@ def initializeArchetype(self, **kwargs):
 
     @security.protected(ChangeTopics)
     def validateAddCriterion(self, indexId, criteriaType):
-        """Is criteriaType acceptable criteria for indexId
-        """
+        # Is criteriaType acceptable criteria for indexId.
         return criteriaType in self.criteriaByIndexId(indexId)
 
     @security.protected(ChangeTopics)
@@ -192,73 +191,63 @@ def criteriaByIndexId(self, indexId):
 
     @security.protected(ChangeTopics)
     def listCriteriaTypes(self):
-        """List available criteria types as dict
-        """
+        # List available criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listCriteriaMetaTypes(self):
-        """List available criteria
-        """
+        # List available criteria.
         val = sorted(_criterionRegistry.listTypes())
         return val
 
     @security.protected(ChangeTopics)
     def listSearchCriteriaTypes(self):
-        """List available search criteria types as dict
-        """
+        # List available search criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listSearchCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listSearchCriteriaMetaTypes(self):
-        """List available search criteria
-        """
+        # List available search criteria.
         val = sorted(_criterionRegistry.listSearchTypes())
         return val
 
     @security.protected(ChangeTopics)
     def listSortCriteriaTypes(self):
-        """List available sort criteria types as dict
-        """
+        # List available sort criteria types as dict.
         return [{'name': ctype,
                  'description': _criterionRegistry[ctype].shortDesc}
                 for ctype in self.listSortCriteriaMetaTypes()]
 
     @security.protected(ChangeTopics)
     def listSortCriteriaMetaTypes(self):
-        """List available sort criteria
-        """
+        # List available sort criteria.
         val = sorted(_criterionRegistry.listSortTypes())
         return val
 
     @security.protected(View)
     def listCriteria(self):
-        """Return a list of our criteria objects.
-        """
+        # Return a list of our criteria objects.
         val = self.objectValues(self.listCriteriaMetaTypes())
         return val
 
     @security.protected(View)
     def listSearchCriteria(self):
-        """Return a list of our search criteria objects.
-        """
+        # Return a list of our search criteria objects.
         return [val for val in self.listCriteria() if
                 IATTopicSearchCriterion.providedBy(val)]
 
     @security.protected(ChangeTopics)
     def hasSortCriterion(self):
-        """Tells if a sort criterai is already setup.
-        """
+        # Tells if a sort criteria is already setup.
         return not self.getSortCriterion() is None
 
     @security.protected(ChangeTopics)
     def getSortCriterion(self):
-        """Return the Sort criterion if setup.
-        """
+        # Return the Sort criterion if setup.
         for criterion in self.listCriteria():
             if IATTopicSortCriterion.providedBy(criterion):
                 return criterion
@@ -266,35 +255,30 @@ def getSortCriterion(self):
 
     @security.protected(ChangeTopics)
     def removeSortCriterion(self):
-        """remove the Sort criterion.
-        """
+        # Remove the Sort criterion.
         if self.hasSortCriterion():
             self.deleteCriterion(self.getSortCriterion().getId())
 
     @security.protected(ChangeTopics)
     def setSortCriterion(self, field, reversed):
-        """Set the Sort criterion.
-        """
+        # Set the Sort criterion.
         self.removeSortCriterion()
         self.addCriterion(field, 'ATSortCriterion')
         self.getSortCriterion().setReversed(reversed)
 
     @security.protected(ChangeTopics)
     def listIndicesByCriterion(self, criterion):
-        """
-        """
         return _criterionRegistry.indicesByCriterion(criterion)
 
     @security.protected(ChangeTopics)
     def listFields(self):
-        """Return a list of fields from portal_catalog.
-        """
+        # Return a list of fields from portal_catalog.
         tool = getToolByName(self, TOOLNAME)
         return tool.getEnabledFields()
 
     @security.protected(ChangeTopics)
     def listSortFields(self):
-        """Return a list of available fields for sorting."""
+        # Return a list of available fields for sorting.
         fields = [field
                   for field in self.listFields()
                   if self.validateAddCriterion(field[0], 'ATSortCriterion')]
@@ -302,8 +286,7 @@ def listSortFields(self):
 
     @security.protected(ChangeTopics)
     def listAvailableFields(self):
-        """Return a list of available fields for new criteria.
-        """
+        # Return a list of available fields for new criteria.
         current = [crit.Field() for crit in self.listCriteria()
                    if not IATTopicSortCriterion.providedBy(crit)]
         fields = self.listFields()
@@ -315,8 +298,7 @@ def listAvailableFields(self):
 
     @security.protected(View)
     def listSubtopics(self):
-        """Return a list of our subtopics.
-        """
+        # Return a list of our subtopics.
         val = self.objectValues(self.meta_type)
         check_p = getToolByName(self, 'portal_membership').checkPermission
         tops = []
@@ -329,23 +311,21 @@ def listSubtopics(self):
 
     @security.protected(View)
     def hasSubtopics(self):
-        """Returns true if subtopics have been created on this topic.
-        """
+        # Returns true if subtopics have been created on this topic.
         val = self.objectIds(self.meta_type)
         return not not val
 
     @security.protected(View)
     def listMetaDataFields(self, exclude=True):
-        """Return a list of metadata fields from portal_catalog.
-        """
+        # Return a list of metadata fields from portal_catalog.
         tool = getToolByName(self, TOOLNAME)
         return tool.getMetadataDisplay(exclude)
 
     @security.protected(View)
     def allowedCriteriaForField(self, field, display_list=False):
-        """ Return all valid criteria for a given field.  Optionally include
-            descriptions in list in format [(desc1, val1) , (desc2, val2)] for
-            javascript selector."""
+        # Return all valid criteria for a given field.  Optionally include
+        # descriptions in list in format [(desc1, val1) , (desc2, val2)] for
+        # javascript selector.
         tool = getToolByName(self, TOOLNAME)
         criteria = tool.getIndex(field).criteria
         allowed = [crit for crit in criteria
@@ -360,8 +340,7 @@ def allowedCriteriaForField(self, field, display_list=False):
 
     @security.protected(View)
     def buildQuery(self):
-        """Construct a catalog query using our criterion objects.
-        """
+        # Construct a catalog query using our criterion objects.
         result = {}
         clear_start = False
         criteria = self.listCriteria()
@@ -458,8 +437,7 @@ def queryCatalog(self, REQUEST=None, batch=False, b_size=None,
 
     @security.protected(ChangeTopics)
     def addCriterion(self, field, criterion_type):
-        """Add a new search criterion. Return the resulting object.
-        """
+        # Add a new search criterion. Return the resulting object.
         newid = 'crit__%s_%s' % (field, criterion_type)
         ct = _criterionRegistry[criterion_type]
         crit = ct(newid, field)
@@ -469,8 +447,7 @@ def addCriterion(self, field, criterion_type):
 
     @security.protected(ChangeTopics)
     def deleteCriterion(self, criterion_id):
-        """Delete selected criterion.
-        """
+        # Delete selected criterion.
         if isinstance(criterion_id, StringType):
             self._delObject(criterion_id)
         elif type(criterion_id) in (ListType, TupleType):
@@ -479,8 +456,7 @@ def deleteCriterion(self, criterion_id):
 
     @security.protected(View)
     def getCriterion(self, criterion_id):
-        """Get the criterion object.
-        """
+        # Get the criterion object.
         try:
             return self._getOb('crit__%s' % criterion_id)
         except AttributeError:
@@ -488,32 +464,28 @@ def getCriterion(self, criterion_id):
 
     @security.protected(AddPortalContent)
     def addSubtopic(self, id):
-        """Add a new subtopic.
-        """
+        # Add a new subtopic.
         ti = self.getTypeInfo()
         ti.constructInstance(self, id)
         return self._getOb(id)
 
     @security.protected(View)
     def synContentValues(self):
-        """Getter for syndacation support
-        """
+        # Getter for syndication support.
         syn_tool = getToolByName(self, 'portal_syndication')
         limit = int(syn_tool.getMaxItems(self))
         return self.queryCatalog(sort_limit=limit)[:limit]
 
     @security.public
     def canSetDefaultPage(self):
-        """
-        Override BrowserDefaultMixin because default page stuff doesn't make
-        sense for topics.
-        """
+        # Override BrowserDefaultMixin because default page stuff doesn't make
+        # sense for topics.
         return False
 
     @security.public
     def getCriteriaUniqueWidgetAttr(self, attr):
-        """Get a unique list values for a specific attribute for all widgets
-           on all criteria"""
+        # Get a unique list values for a specific attribute for all widgets
+        # on all criteria.
         criteria = self.listCriteria()
         order = []
         for crit in criteria:
@@ -534,10 +506,8 @@ def HEAD(self, REQUEST, RESPONSE):
 
     @security.protected(ChangeTopics)
     def setText(self, value, **kwargs):
-        """Body text mutator
-
-        * hook into mxTidy an replace the value with the tidied value
-        """
+        # Body text mutator.
+        # Hook into mxTidy and replace the value with the tidied value.
         field = self.getField('text')
 
         # When an object is initialized the first time we have to
@@ -557,9 +527,8 @@ def setText(self, value, **kwargs):
 
     @security.private
     def getTidyOutput(self, field):
-        """Get the tidied output for a specific field from the request
-        if available
-        """
+        # Get the tidied output for a specific field from the request
+        # if available.
         request = getattr(self, 'REQUEST', None)
         if request is not None and isinstance(request, HTTPRequest):
             tidyAttribute = '%s_tidier_data' % field.getName()
diff --git a/Products/ATContentTypes/criteria/base.py b/Products/ATContentTypes/criteria/base.py
index 3bd596a..bc1fbb5 100644
--- a/Products/ATContentTypes/criteria/base.py
+++ b/Products/ATContentTypes/criteria/base.py
@@ -66,12 +66,11 @@ def __init__(self, id=None, field=None, oid=None):
 
     @security.protected(View)
     def getId(self):
-        """Get the object id"""
+        # Get the object id.
         return str(self.id)
 
     def setId(self, value, *kw):
-        """Setting a new ID isn't allowed
-        """
+        # Setting a new ID isn't allowed.
         assert value == self.getId(), 'You are not allowed to change the id'
 
     @security.protected(View)
@@ -85,8 +84,7 @@ def Description(self):
 
     @security.protected(View)
     def getCriteriaItems(self):
-        """Return a sequence of items to be used to build the catalog query.
-        """
+        # Return a sequence of items to be used to build the catalog query.
         return ()
 
 # because I don't register the class I've to generator it on my own. Otherwise
diff --git a/Products/ATContentTypes/criteria/date.py b/Products/ATContentTypes/criteria/date.py
index 2560e27..4a555d5 100644
--- a/Products/ATContentTypes/criteria/date.py
+++ b/Products/ATContentTypes/criteria/date.py
@@ -110,8 +110,7 @@ class ATDateCriteria(ATBaseCriterion):
 
     @security.protected(View)
     def getCriteriaItems(self):
-        """Return a sequence of items to be used to build the catalog query.
-        """
+        # Return a sequence of items to be used to build the catalog query.
         if self.value is not None:
             field = self.Field()
             value = self.Value()
diff --git a/Products/ATContentTypes/criteria/portaltype.py b/Products/ATContentTypes/criteria/portaltype.py
index b468546..930878f 100644
--- a/Products/ATContentTypes/criteria/portaltype.py
+++ b/Products/ATContentTypes/criteria/portaltype.py
@@ -39,7 +39,7 @@ class ATPortalTypeCriterion(ATSelectionCriterion):
 
     @security.protected(View)
     def getCurrentValues(self):
-        """Return enabled portal types"""
+        # Return enabled portal types.
         vocab = queryUtility(IVocabularyFactory, name=VOCAB_ID)(self)
         portal_types = getToolByName(self, 'portal_types', None)
         result = []
diff --git a/Products/ATContentTypes/criteria/simpleint.py b/Products/ATContentTypes/criteria/simpleint.py
index e40ce6d..5fd1674 100644
--- a/Products/ATContentTypes/criteria/simpleint.py
+++ b/Products/ATContentTypes/criteria/simpleint.py
@@ -108,7 +108,7 @@ def getCriteriaItems(self):
 
     @security.protected(View)
     def post_validate(self, REQUEST, errors):
-        """Check that Value2 is set if range is set to min:max"""
+        # Check that Value2 is set if range is set to min:max.
         direction = REQUEST.get('direction', self.getDirection())
         val2 = REQUEST.get('value2', self.Value2())
         if direction == 'min:max' and not val2 and not val2 == 0:
diff --git a/Products/ATContentTypes/tool/atct.py b/Products/ATContentTypes/tool/atct.py
index f9d74bf..5bb3f6f 100644
--- a/Products/ATContentTypes/tool/atct.py
+++ b/Products/ATContentTypes/tool/atct.py
@@ -73,8 +73,7 @@ def om_icons(self):
 
     @security.protected(ManagePortal)
     def recreateImageScales(self, portal_type=None):
-        """Recreates AT Image scales (doesn't remove unused!)
-        """
+        # Recreates AT Image scales (doesn't remove unused!)
         if portal_type is None:
             portal_type = tuple(self.image_types)
         out = StringIO()
@@ -109,8 +108,7 @@ def recreateImageScales(self, portal_type=None):
 
     @security.protected(ManagePortal)
     def listContentTypes(self):
-        """List all content types. Used for image/folder_types property.
-        """
+        # List all content types. Used for image/folder_types property.
         ttool = getToolByName(self, 'portal_types')
         return ttool.listContentTypes()
 
diff --git a/Products/ATContentTypes/tool/factory.py b/Products/ATContentTypes/tool/factory.py
index 7364ee4..ed35c57 100644
--- a/Products/ATContentTypes/tool/factory.py
+++ b/Products/ATContentTypes/tool/factory.py
@@ -94,11 +94,12 @@ class TempFolder(TempFolderBase):
     # that includes the acquisition parent of portal_factory (otherwise we get
     # portal_root/portal_factory/... no matter where the object will reside)
     def getPhysicalPath(self):
-        '''Returns a path (an immutable sequence of strings)
-        that can be used to access this object again
-        later, for example in a copy/paste operation.  getPhysicalRoot()
-        and getPhysicalPath() are designed to operate together.
-        '''
+        # Get the physical path of the object.
+        #
+        # Returns a path (an immutable sequence of strings) that can be used to
+        # access this object again later, for example in a copy/paste
+        # operation.  getPhysicalRoot() and getPhysicalPath() are designed to
+        # operate together.
         portal_factory = aq_parent(aq_inner(self))
         path = aq_parent(portal_factory).getPhysicalPath() + \
             (portal_factory.getId(), self.getId(), )
@@ -320,7 +321,7 @@ def manage_setPortalFactoryTypes(self, REQUEST=None, listOfTypeIds=None):
             REQUEST.RESPONSE.redirect('manage_main')
 
     def doCreate(self, obj, id=None, **kw):
-        """Create a real object from a temporary object."""
+        # Create a real object from a temporary object.
         if self.isTemporary(obj=obj):
             if id is not None:
                 id = id.strip()
@@ -346,8 +347,8 @@ def doCreate(self, obj, id=None, **kw):
         return obj
 
     def _fixRequest(self):
-        """Our before_publishing_traverse call mangles URL0.  This fixes up
-        the REQUEST."""
+        # Our before_publishing_traverse call mangles URL0.
+        # This fixes up the REQUEST.
         # Everything seems to work without this method being called at all...
         factory_info = self.REQUEST.get(FACTORY_INFO, None)
         if not factory_info:
@@ -374,7 +375,7 @@ def _fixRequest(self):
         # TODO fix URLPATHn, BASEPATHn here too
 
     def isTemporary(self, obj):
-        """Check to see if an object is temporary"""
+        # Check to see if an object is temporary.
         ob = aq_base(aq_parent(aq_inner(obj)))
         return hasattr(ob, 'meta_type') \
             and ob.meta_type == TempFolder.meta_type
diff --git a/Products/ATContentTypes/tool/metadata.py b/Products/ATContentTypes/tool/metadata.py
index 296873a..0e147b7 100644
--- a/Products/ATContentTypes/tool/metadata.py
+++ b/Products/ATContentTypes/tool/metadata.py
@@ -69,38 +69,32 @@ def edit(self, is_required, supply_default, default_value,
     #
     @security.protected(View)
     def isMultiValued(self):
-        """ Can this element hold multiple values?
-        """
+        # Can this element hold multiple values?
         return self.is_multi_valued
 
     @security.protected(View)
     def isRequired(self):
-        """ Must this element be supplied?
-        """
+        # Must this element be supplied?
         return self.is_required
 
     @security.protected(View)
     def supplyDefault(self):
-        """ Should the tool supply a default?
-        """
+        # Should the tool supply a default?
         return self.supply_default
 
     @security.protected(View)
     def defaultValue(self):
-        """ If so, what is the default?
-        """
+        # If so, what is the default?
         return self.default_value
 
     @security.protected(View)
     def enforceVocabulary(self):
-        """ Should the tool enforce the policy's vocabulary?
-        """
+        # Should the tool enforce the policy's vocabulary?
         return self.enforce_vocabulary
 
     @security.protected(View)
     def allowedVocabulary(self):
-        """ What are the allowed values?
-        """
+        # What are the allowed values?
         return self.allowed_vocabulary
 
 InitializeClass(MetadataElementPolicy)
@@ -129,17 +123,13 @@ def _makePolicy(self):
 
     @security.protected(View)
     def isMultiValued(self):
-        """
-            Is this element multi-valued?
-        """
+        # Is this element multi-valued?
         return self.is_multi_valued
 
     @security.protected(View)
     def getPolicy(self, typ=None):
-        """ Find the policy for this element for objects of the given type.
-
-        o Return a default, if none found.
-        """
+        # Find the policy for this element for objects of the given type.
+        # Return a default, if none found.
         try:
             return self.policies[typ].__of__(self)
         except KeyError:
@@ -147,8 +137,7 @@ def getPolicy(self, typ=None):
 
     @security.protected(View)
     def listPolicies(self):
-        """ Return a list of all policies for this element.
-        """
+        # Return a list of all policies for this element.
         res = []
         for k, v in self.policies.items():
             res.append((k, v.__of__(self)))
@@ -156,8 +145,7 @@ def listPolicies(self):
 
     @security.protected(ManagePortal)
     def addPolicy(self, typ):
-        """ Add a policy to this element for objects of the given type.
-        """
+        # Add a policy to this element for objects of the given type.
         if typ is None:
             raise MetadataError("Can't replace default policy.")
 
@@ -168,10 +156,8 @@ def addPolicy(self, typ):
 
     @security.protected(ManagePortal)
     def removePolicy(self, typ):
-        """ Remove the policy from this element for objects of the given type.
-
-        o Do *not* remvoe the default, however.
-        """
+        # Remove the policy from this element for objects of the given type.
+        # Do *not* remove the default, however.
         if typ is None:
             raise MetadataError("Can't remove default policy.")
         del self.policies[typ]
@@ -209,8 +195,7 @@ def __init__(self, id, element_specs=()):
     def addElementPolicy(self, element, content_type, is_required,
                          supply_default, default_value, enforce_vocabulary,
                          allowed_vocabulary, REQUEST=None):
-        """ Add a type-specific policy for one of our elements.
-        """
+        # Add a type-specific policy for one of our elements.
         if content_type == '<default>':
             content_type = None
 
@@ -228,8 +213,7 @@ def addElementPolicy(self, element, content_type, is_required,
     @security.protected(ManagePortal)
     def removeElementPolicy(self, element, content_type, REQUEST=None
                             ):
-        """ Remvoe a type-specific policy for one of our elements.
-        """
+        # Remove a type-specific policy for one of our elements.
         if content_type == '<default>':
             content_type = None
 
@@ -245,10 +229,8 @@ def removeElementPolicy(self, element, content_type, REQUEST=None
     def updateElementPolicy(self, element, content_type, is_required,
                             supply_default, default_value, enforce_vocabulary,
                             allowed_vocabulary, REQUEST=None):
-        """ Update a policy for one of our elements
-
-        o 'content_type' will be '<default>' when we edit the default.
-        """
+        # Update a policy for one of our elements.
+        # 'content_type' will be '<default>' when we edit the default.
         if content_type == '<default>':
             content_type = None
         spec = self.getElementSpec(element)
@@ -266,8 +248,7 @@ def updateElementPolicy(self, element, content_type, is_required,
     #
     @security.protected(ManagePortal)
     def listElementSpecs(self):
-        """ Return a list of ElementSpecs representing the elements we manage.
-        """
+        # Return a list of ElementSpecs representing the elements we manage.
         res = []
         for k, v in self.element_specs.items():
             res.append((k, v.__of__(self)))
@@ -275,14 +256,12 @@ def listElementSpecs(self):
 
     @security.protected(ManagePortal)
     def getElementSpec(self, element):
-        """ Return an ElementSpec for the given 'element'.
-        """
+        # Return an ElementSpec for the given 'element'.
         return self.element_specs[element].__of__(self)
 
     @security.protected(ManagePortal)
     def addElementSpec(self, element, is_multi_valued, REQUEST=None):
-        """ Add 'element' to our list of managed elements.
-        """
+        # Add 'element' to our list of managed elements.
         # Don't replace.
         if element in self.element_specs:
             return
@@ -297,8 +276,7 @@ def addElementSpec(self, element, is_multi_valued, REQUEST=None):
 
     @security.protected(ManagePortal)
     def removeElementSpec(self, element, REQUEST=None):
-        """ Remove 'element' from our list of managed elements.
-        """
+        # Remove 'element' from our list of managed elements.
         del self.element_specs[element]
 
         if REQUEST is not None:
@@ -309,10 +287,8 @@ def removeElementSpec(self, element, REQUEST=None):
 
     @security.protected(ManagePortal)
     def listPolicies(self, typ=None):
-        """ Show all policies for a given content type
-
-        o If 'typ' is none, return the list of default policies.
-        """
+        # Show all policies for a given content type.
+        # If 'typ' is none, return the list of default policies.
         result = []
         for element, spec in self.listElementSpecs():
             result.append((element, spec.getPolicy(typ)))
@@ -410,49 +386,42 @@ def manage_removeSchemas(self, schema_ids, REQUEST):
 
     @security.private
     def getFullName(self, userid):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return userid   # TODO: do lookup here
 
     @security.public
     def getPublisher(self):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.publisher
 
     @security.public
     def listAllowedSubjects(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Subject', content, content_type)
 
     @security.public
     def listAllowedFormats(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Format', content, content_type)
 
     @security.public
     def listAllowedLanguages(self, content=None, content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         return self.listAllowedVocabulary(
             'DCMI', 'Language', content, content_type)
 
     @security.public
     def listAllowedRights(self, content=None, content_type=None):
-        """ See IMetadata Tool.
-        """
+        # See IMetadata Tool.
         return self.listAllowedVocabulary(
             'DCMI', 'Rights', content, content_type)
 
     @security.public
     def listAllowedVocabulary(self, schema, element, content=None,
                               content_type=None):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         schema_def = getattr(self, schema)
         spec = schema_def.getElementSpec(element)
         if content_type is None and content:
@@ -461,16 +430,14 @@ def listAllowedVocabulary(self, schema, element, content=None,
 
     @security.public
     def listSchemas(self):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         result = [('DCMI', self.DCMI)]
         result.extend(self.objectItems([MetadataSchema.meta_type]))
         return result
 
     @security.protected(ModifyPortalContent)
     def addSchema(self, schema_id, elements=()):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         if schema_id == 'DCMI' or schema_id in self.objectIds():
             raise KeyError('Duplicate schema ID: %s' % schema_id)
 
@@ -481,8 +448,7 @@ def addSchema(self, schema_id, elements=()):
 
     @security.protected(ModifyPortalContent)
     def removeSchema(self, schema_id):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         if schema_id == 'DCMI' or schema_id not in self.objectIds():
             raise KeyError('Invalid schema ID: %s' % schema_id)
 
@@ -490,8 +456,7 @@ def removeSchema(self, schema_id):
 
     @security.protected(ModifyPortalContent)
     def setInitialMetadata(self, content):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         for schema_id, schema in self.listSchemas():
             for element, policy in schema.listPolicies(
                     content.getPortalTypeName()):
@@ -509,8 +474,7 @@ def setInitialMetadata(self, content):
 
     @security.protected(View)
     def validateMetadata(self, content):
-        """ See IMetadataTool.
-        """
+        # See IMetadataTool.
         for schema_id, schema in self.listSchemas():
             for element, policy in schema.listPolicies(
                     content.getPortalTypeName()):
diff --git a/Products/ATContentTypes/tool/topic.py b/Products/ATContentTypes/tool/topic.py
index 1fceec0..554c6db 100644
--- a/Products/ATContentTypes/tool/topic.py
+++ b/Products/ATContentTypes/tool/topic.py
@@ -49,7 +49,7 @@ def __init__(self):
         self.allowed_portal_types = []
 
     def getCriteriaForIndex(self, index, as_dict=False):
-        """ Returns the valid criteria for a given index """
+        # Returns the valid criteria for a given index.
         catalog_tool = getToolByName(self, 'portal_catalog')
         try:
             indexObj = catalog_tool.Indexes[index]
@@ -71,8 +71,8 @@ def getCriteriaForIndex(self, index, as_dict=False):
     @security.protected(ManagePortal)
     def addIndex(self, index, friendlyName='', description='',
                  enabled=False, criteria=None):
-        """ Add a new index along with descriptive information to the index
-            registry """
+        # Add a new index along with descriptive information to the index
+        # registry.
         if criteria is None:
             criteria = self.getCriteriaForIndex(index)
         if index in self.topic_indexes:
@@ -91,8 +91,8 @@ def addIndex(self, index, friendlyName='', description='',
     @security.protected(ManagePortal)
     def addMetadata(self, metadata, friendlyName='',
                     description='', enabled=False):
-        """ Add a new metadata field along with descriptive information to the
-            metadata registry """
+        # Add a new metadata field along with descriptive information to the
+        # metadata registry.
         if metadata in self.topic_metadata:
             objMeta = self.topic_metadata[metadata]
             objMeta.friendlyName = friendlyName
@@ -107,8 +107,8 @@ def addMetadata(self, metadata, friendlyName='',
     @security.protected(ManagePortal)
     def updateIndex(self, index, friendlyName=None,
                     description=None, enabled=None, criteria=None):
-        """ Updates an existing index in the registry, unrecognized values are
-            added """
+        # Updates an existing index in the registry, unrecognized values are
+        # added.
         indexes = self.topic_indexes
         if friendlyName is None:
             friendlyName = indexes[index].friendlyName
@@ -124,8 +124,8 @@ def updateIndex(self, index, friendlyName=None,
     @security.protected(ManagePortal)
     def updateMetadata(self, metadata, friendlyName=None,
                        description=None, enabled=None):
-        """ Updates an existing metadata field in the registry, unrecognized values are
-            added """
+        # Updates an existing metadata field in the registry, unrecognized
+        # values are added.
         meta = self.topic_metadata
         if friendlyName is None:
             friendlyName = meta[metadata].friendlyName
@@ -137,21 +137,21 @@ def updateMetadata(self, metadata, friendlyName=None,
 
     @security.protected(ManagePortal)
     def removeIndex(self, index):
-        """ Removes an existing index from the registry """
+        # Removes an existing index from the registry.
         if index in self.topic_indexes:
             del self.topic_indexes[index]
             self._p_changed = True
 
     @security.protected(ManagePortal)
     def removeMetadata(self, metadata):
-        """ Removes an existing metadata field from the registry """
+        # Removes an existing metadata field from the registry.
         if metadata in self.topic_metadata:
             del self.topic_metadata[metadata]
             self._p_changed = True
 
     @security.protected(ManagePortal)
     def createInitialIndexes(self):
-        """ create indexes for all indexes in the catalog """
+        # Create indexes for all indexes in the catalog.
         indexes = self.listCatalogFields()
         for i in indexes:
             if i not in self.topic_indexes:
@@ -161,7 +161,7 @@ def createInitialIndexes(self):
 
     @security.protected(ManagePortal)
     def createInitialMetadata(self):
-        """ create metadata for all indexes in the catalog """
+        # Create metadata for all indexes in the catalog.
         metas = self.listCatalogMetadata()
         for i in metas:
             if i not in self.topic_metadata:
@@ -171,7 +171,7 @@ def createInitialMetadata(self):
 
     @security.private
     def listCatalogFields(self):
-        """ Return a list of fields from portal_catalog. """
+        # Return a list of fields from portal_catalog.
         pcatalog = getToolByName(self, 'portal_catalog')
         available = pcatalog.indexes()
         val = sorted([field for field in available])
@@ -179,14 +179,14 @@ def listCatalogFields(self):
 
     @security.private
     def listCatalogMetadata(self):
-        """ Return a list of columns from portal_catalog. """
+        # Return a list of columns from portal_catalog.
         pcatalog = getToolByName(self, 'portal_catalog')
         available = pcatalog.schema()
         val = sorted([field for field in available])
         return val
 
     def getAllPortalTypes(self):
-        """ returns a list of (id, title)-tuples for each type """
+        # Returns a list of (id, title)-tuples for each type.
         types_tool = getToolByName(self, 'portal_types')
         types = types_tool.listTypeInfo()
 
@@ -194,8 +194,8 @@ def getAllPortalTypes(self):
         return all_types
 
     def getAllowedPortalTypes(self, populate_for_end_usage=1):
-        """ Return all portal_types as an (id,title) tuple that are allowed
-            to search with """
+        # Return all portal_types as an (id,title) tuple that are allowed
+        # to search with.
         all_types = self.getAllPortalTypes()
 
         if populate_for_end_usage == 0:
@@ -212,19 +212,19 @@ def getAllowedPortalTypes(self, populate_for_end_usage=1):
         return filtered_types
 
     def getEnabledIndexes(self):
-        """ Returns all TopicIndex objects for enabled indexes """
+        # Returns all TopicIndex objects for enabled indexes.
         indexes = self.topic_indexes
         results = [i for i in indexes.values() if i.enabled]
         return results
 
     def getEnabledMetadata(self):
-        """ Returns all TopicIndex objects for enabled metadata """
+        # Returns all TopicIndex objects for enabled metadata.
         meta = self.topic_metadata
         results = [i for i in meta.values() if i.enabled]
         return results
 
     def getIndexDisplay(self, enabled=True):
-        """ Return DisplayList of Indexes and their friendly names """
+        # Return DisplayList of Indexes and their friendly names.
         if enabled:
             index_names = self.getIndexes(True)
         else:
@@ -235,7 +235,7 @@ def getIndexDisplay(self, enabled=True):
         return DisplayList(field_list)
 
     def getMetadataDisplay(self, enabled=True):
-        """ Return DisplayList of Metadata and their friendly names """
+        # Return DisplayList of Metadata and their friendly names.
         if enabled:
             meta_names = self.getAllMetadata(True)
         else:
@@ -246,8 +246,8 @@ def getMetadataDisplay(self, enabled=True):
         return DisplayList(field_list)
 
     def getEnabledFields(self):
-        """ Returns a list of tuples containing the index name, friendly name,
-            and description for each enabled index. """
+        # Returns a list of tuples containing the index name, friendly name,
+        # and description for each enabled index.
         enabledIndexes = self.getEnabledIndexes()
         dec_fields = sorted([(i.friendlyName.lower() or
                               i.index.lower(), i.index, i.friendlyName or
@@ -256,9 +256,8 @@ def getEnabledFields(self):
         return fields
 
     def getFriendlyName(self, index):
-        """ Returns the friendly name for a given index name, or the given
-            index if the firendlyname is empty or the index is not recognized
-        """
+        # Returns the friendly name for a given index name, or the given
+        # index if the firendlyname is empty or the index is not recognized.
         if index in self.topic_indexes:
             return self.getIndex(index).friendlyName or index
         else:
@@ -266,8 +265,8 @@ def getFriendlyName(self, index):
 
     @security.protected(ManagePortal)
     def getIndexes(self, enabledOnly=False):
-        """ Returns the full list of available indexes, optionally filtering
-            out those that are not marked enabled """
+        # Returns the full list of available indexes, optionally filtering
+        # out those that are not marked enabled.
         if enabledOnly:
             indexes_dec = [(i.index.lower(), i.index)
                            for i in self.getEnabledIndexes()]
@@ -282,8 +281,8 @@ def getIndexes(self, enabledOnly=False):
 
     @security.protected(ManagePortal)
     def getAllMetadata(self, enabledOnly=False):
-        """ Returns the full list of available metadata fields, optionally
-            filtering out those that are not marked enabled """
+        # Returns the full list of available metadata fields, optionally
+        # filtering out those that are not marked enabled.
         if enabledOnly:
             meta_dec = [(i.index.lower(), i.index)
                         for i in self.getEnabledMetadata()]
@@ -297,14 +296,14 @@ def getAllMetadata(self, enabledOnly=False):
         return metadata
 
     def getIndex(self, index):
-        """ Returns the TopicIndex object for a given index name """
+        # Returns the TopicIndex object for a given index name.
         if index in self.topic_indexes:
             return self.topic_indexes[index]
         else:
             raise AttributeError('Index ' + str(index) + ' not found')
 
     def getMetadata(self, metadata):
-        """ Returns the TopicIndex object for a given metadata name """
+        # Returns the TopicIndex object for a given metadata name.
         if metadata in self.topic_metadata:
             return self.topic_metadata[metadata]
         else:
@@ -312,7 +311,7 @@ def getMetadata(self, metadata):
 
     @security.protected(ManagePortal)
     def manage_saveTopicSetup(self, REQUEST=None):
-        """ Set indexes and metadata from form """
+        # Set indexes and metadata from form.
         if REQUEST is None:
             return 'Nothing saved.'
 
@@ -335,7 +334,7 @@ def manage_saveTopicSetup(self, REQUEST=None):
 
     @security.protected(ManagePortal)
     def manage_saveTopicSetupTypes(self, REQUEST=None):
-        """ Set portal types from form """
+        # Set portal types from form.
         if REQUEST is None:
             return 'Nothing saved.'
 


