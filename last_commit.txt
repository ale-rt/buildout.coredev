Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2017-02-08T10:10:05+01:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/bce7a828ff6a57b96f46f17cdcc746cb9ad68101

hide only the translate menu in ILanguageRootFolder items

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/menu.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0fe6c2c..49060a3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Show Translate menu in INavigationRoot items and hide in ILanguageRootFolders
+  [erral]
 
 Bug fixes:
 
diff --git a/src/plone/app/multilingual/browser/menu.py b/src/plone/app/multilingual/browser/menu.py
index 96d1ad1..4ada1cc 100644
--- a/src/plone/app/multilingual/browser/menu.py
+++ b/src/plone/app/multilingual/browser/menu.py
@@ -2,7 +2,7 @@
 from AccessControl import getSecurityManager
 from Acquisition import aq_parent
 from Products.CMFCore.utils import getToolByName
-from plone.app.layout.navigation.interfaces import INavigationRoot
+from plone.app.multilingual.interfaces import ILanguageRootFolder
 from plone.app.multilingual import _
 from plone.app.multilingual.browser.interfaces import ITranslateMenu
 from plone.app.multilingual.browser.interfaces import ITranslateSubMenuItem
@@ -61,7 +61,7 @@ def getMenuItems(self, context, request):
         for brain in results:
             shared_folder_url = brain.getURL() + '/folder_contents'
 
-        if not is_neutral_content and not INavigationRoot.providedBy(context):
+        if not is_neutral_content and not ILanguageRootFolder.providedBy(context):
             menu.append({
                 "title": _(
                     u"title_babel_edit",


Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2017-02-08T14:00:22+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/9a3fa3891bce3a33b717850e3cf2a8352ef80690

Merge pull request #263 from plone/languagemenu-for-inavigationroot

Hide the translate menu only in ILanguageRootFolder items

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/menu.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0fe6c2c..49060a3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Show Translate menu in INavigationRoot items and hide in ILanguageRootFolders
+  [erral]
 
 Bug fixes:
 
diff --git a/src/plone/app/multilingual/browser/menu.py b/src/plone/app/multilingual/browser/menu.py
index 96d1ad1..4ada1cc 100644
--- a/src/plone/app/multilingual/browser/menu.py
+++ b/src/plone/app/multilingual/browser/menu.py
@@ -2,7 +2,7 @@
 from AccessControl import getSecurityManager
 from Acquisition import aq_parent
 from Products.CMFCore.utils import getToolByName
-from plone.app.layout.navigation.interfaces import INavigationRoot
+from plone.app.multilingual.interfaces import ILanguageRootFolder
 from plone.app.multilingual import _
 from plone.app.multilingual.browser.interfaces import ITranslateMenu
 from plone.app.multilingual.browser.interfaces import ITranslateSubMenuItem
@@ -61,7 +61,7 @@ def getMenuItems(self, context, request):
         for brain in results:
             shared_folder_url = brain.getURL() + '/folder_contents'
 
-        if not is_neutral_content and not INavigationRoot.providedBy(context):
+        if not is_neutral_content and not ILanguageRootFolder.providedBy(context):
             menu.append({
                 "title": _(
                     u"title_babel_edit",


