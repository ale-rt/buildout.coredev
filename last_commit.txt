Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-09-23T10:29:12+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.app.content/commit/abaf25b7bd156237c8a0c2150015b4a648ff2653

Fix issue where full review list failed with non-ascii characters in creator names

Files changed:
M plone/app/content/browser/reviewlist.py

diff --git a/plone/app/content/browser/reviewlist.py b/plone/app/content/browser/reviewlist.py
index fa0149a..9965399 100644
--- a/plone/app/content/browser/reviewlist.py
+++ b/plone/app/content/browser/reviewlist.py
@@ -87,8 +87,10 @@ def items(self):
                 creator_name = creator.getProperty('fullname', '') or creator_id
             else:
                 creator_name = creator_id
-            modified = creator_name + ' - ' + plone_view.toLocalizedTime(
-                           obj.ModificationDate(), long_format=1)
+            modified = ''.join(map(safe_unicode, [
+                creator_name, ' - ',
+                plone_view.toLocalizedTime(obj.ModificationDate(),
+                                           long_format=1)]))
             is_structural_folder = obj.restrictedTraverse(
                 '@@plone').isStructuralFolder()
 


Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-09-23T10:29:14+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.app.content/commit/788219208e60e94f854bb9fcb69b20e01094cb1c

Update changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 2efff9b..4663dbe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -15,6 +15,8 @@ New features:
 Bug fixes:
 
 - Apply security hotfix 20160830 for folder factories redirection.  [maurits]
+- Fix UnicodeDecodeError on full review list view
+  [datakurre]
 
 
 3.3 (2016-09-14)


Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-12-15T23:21:29+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.content/commit/6d118a0648567219c5facf35dd27b91d88a0c746

Merge pull request #107 from plone/datakurre-unicode

Fix issue where full review list failed with non-ascii characters in creator name

Files changed:
M CHANGES.rst
M plone/app/content/browser/reviewlist.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e4c3e00..66130e0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -54,6 +54,8 @@ Bug fixes:
 Bug fixes:
 
 - Apply security hotfix 20160830 for folder factories redirection.  [maurits]
+- Fix UnicodeDecodeError on full review list view
+  [datakurre]
 
 
 3.3 (2016-09-14)
diff --git a/plone/app/content/browser/reviewlist.py b/plone/app/content/browser/reviewlist.py
index fa0149a..9965399 100644
--- a/plone/app/content/browser/reviewlist.py
+++ b/plone/app/content/browser/reviewlist.py
@@ -87,8 +87,10 @@ def items(self):
                 creator_name = creator.getProperty('fullname', '') or creator_id
             else:
                 creator_name = creator_id
-            modified = creator_name + ' - ' + plone_view.toLocalizedTime(
-                           obj.ModificationDate(), long_format=1)
+            modified = ''.join(map(safe_unicode, [
+                creator_name, ' - ',
+                plone_view.toLocalizedTime(obj.ModificationDate(),
+                                           long_format=1)]))
             is_structural_folder = obj.restrictedTraverse(
                 '@@plone').isStructuralFolder()
 


