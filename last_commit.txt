Repository: plone.api


Branch: refs/heads/master
Date: 2016-11-13T21:19:53+01:00
Author: Gil Forcada (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/163c918e753f9e049395bf754da3e041bbfb3b5b

Remove getIcon usage

It was already deprecated and finally it has been removed.

Files changed:
M docs/CHANGES.rst
M src/plone/api/tests/test_content.py

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 3bd3a1c..11a5d1a 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -32,6 +32,9 @@ Fixes:
 - In api.content.move if source **and** target are specified and target is already
   source parent, skip the operation.
 
+- Fix test
+  [gforcada]
+
 1.5 (2016-02-20)
 ----------------
 
diff --git a/src/plone/api/tests/test_content.py b/src/plone/api/tests/test_content.py
index 8e0f269..b9e3629 100644
--- a/src/plone/api/tests/test_content.py
+++ b/src/plone/api/tests/test_content.py
@@ -964,7 +964,7 @@ def test_get_view(self):
         )
         self.assertEqual(aq_base(view.context), aq_base(self.blog))
         self.assertEqual(view.__name__, 'plone')
-        self.assertTrue(hasattr(view, 'getIcon'))
+        self.assertTrue(hasattr(view, 'toLocalizedTime'))
 
         # Try another standard view.
         view = api.content.get_view(


Repository: plone.api


Branch: refs/heads/master
Date: 2016-11-13T23:31:33+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/e0bc9cd80f1a88840c9bcd8f207926f687570485

Merge pull request #335 from plone/gforcada-patch-1

Remove getIcon usage

Files changed:
M docs/CHANGES.rst
M src/plone/api/tests/test_content.py

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 3bd3a1c..11a5d1a 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -32,6 +32,9 @@ Fixes:
 - In api.content.move if source **and** target are specified and target is already
   source parent, skip the operation.
 
+- Fix test
+  [gforcada]
+
 1.5 (2016-02-20)
 ----------------
 
diff --git a/src/plone/api/tests/test_content.py b/src/plone/api/tests/test_content.py
index 8e0f269..b9e3629 100644
--- a/src/plone/api/tests/test_content.py
+++ b/src/plone/api/tests/test_content.py
@@ -964,7 +964,7 @@ def test_get_view(self):
         )
         self.assertEqual(aq_base(view.context), aq_base(self.blog))
         self.assertEqual(view.__name__, 'plone')
-        self.assertTrue(hasattr(view, 'getIcon'))
+        self.assertTrue(hasattr(view, 'toLocalizedTime'))
 
         # Try another standard view.
         view = api.content.get_view(


