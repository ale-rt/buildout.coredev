Repository: plone.app.debugtoolbar


Branch: refs/heads/master
Date: 2017-04-29T13:07:28+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/plone.app.debugtoolbar/commit/7dfaa7f849297b0e6681497b46a3a23fc04d7255

Fix problem with debugtoolbar panel opening on click but immediately closing again. This was due to executing the javascript click handler twice - but why? Because the javascript was inside the html section being shown and hidden, causing the javascript to execute twice.

Files changed:
M src/plone/app/debugtoolbar/browser/toolbar.pt

diff --git a/src/plone/app/debugtoolbar/browser/toolbar.pt b/src/plone/app/debugtoolbar/browser/toolbar.pt
index 3fb8865..b8dca4f 100644
--- a/src/plone/app/debugtoolbar/browser/toolbar.pt
+++ b/src/plone/app/debugtoolbar/browser/toolbar.pt
@@ -5,14 +5,14 @@
     i18n:domain="plone.app.debugtoolbar"
     tal:omit-tag="">
 
+<link rel="stylesheet" href="++resource++plone.app.debugtoolbar/debugtoolbar.css" type="text/css" media="screen" charset="utf-8"/>
+<script type="text/javascript" charset="utf-8" src="++resource++plone.app.debugtoolbar/debugtoolbar.js"/>
+
 <a id="debug-toolbar-trigger" class="debug-toolbar-trigger-button" href="#debug-toolbar" i18n:translate="debug_toolbar_trigger">&darr; Debug</a>
 <div id="debug-toolbar">
 
     <div id="debug-toolbar-wrapper">
 
-        <link rel="stylesheet" href="++resource++plone.app.debugtoolbar/debugtoolbar.css" type="text/css" media="screen" charset="utf-8"/>
-        <script type="text/javascript" charset="utf-8" src="++resource++plone.app.debugtoolbar/debugtoolbar.js"/>
-
         <h1 i18n:translate="debug_toolbar_title">Debug information</h1>
         <a href="#" id="debug-toolbar-close" class="debug-toolbar-trigger-button" i18n:translate="debug_toolbar_close">&uarr; Close</a>
 


