Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2017-01-11T11:53:04+01:00
Author: Victor Fernandez de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/67865a82716ee639b44020e4a0947525c9818da3

[Backport] contact-info form: do not encode reply-to address

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/contact_info.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a8784c5..14623ac 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -77,6 +77,8 @@ Bug fixes:
 - Fix atom.xml feed not paying attention for setting to show about information
   [vangheem]
 
+- Do not encode reply-to email address for contact-info form
+  [tkimnguyen]
 
 5.0.6 (2016-09-23)
 ------------------
diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index b03c461..dbc6440 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -68,7 +68,7 @@ def send_message(self, data):
         data['url'] = portal.absolute_url()
         message = self.generate_mail(data, encoding)
         message = MIMEText(message, 'plain', encoding)
-        message['Reply-To'] = Header(data['sender_from_address'], encoding)
+        message['Reply-To'] = data['sender_from_address']
 
         try:
             # This actually sends out the mail


Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2017-01-11T17:39:54+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/06d837088773342302cd70d99ed2a979ca2ff3f0

Merge pull request #1901 from plone/sneridagh-backport-contact-info-fix

[Backport] contact-info form: do not encode reply-to address

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/contact_info.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a8784c5..14623ac 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -77,6 +77,8 @@ Bug fixes:
 - Fix atom.xml feed not paying attention for setting to show about information
   [vangheem]
 
+- Do not encode reply-to email address for contact-info form
+  [tkimnguyen]
 
 5.0.6 (2016-09-23)
 ------------------
diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index b03c461..dbc6440 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -68,7 +68,7 @@ def send_message(self, data):
         data['url'] = portal.absolute_url()
         message = self.generate_mail(data, encoding)
         message = MIMEText(message, 'plain', encoding)
-        message['Reply-To'] = Header(data['sender_from_address'], encoding)
+        message['Reply-To'] = data['sender_from_address']
 
         try:
             # This actually sends out the mail


