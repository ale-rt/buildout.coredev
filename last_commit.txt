Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-07-17T21:53:50+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/c2afdc65f4eaaa4f43e19f1710b0b8d79305651c

bahasa Indonesia lang code

Files changed:
M src/plone/app/multilingual/browser/helper_views.py

diff --git a/src/plone/app/multilingual/browser/helper_views.py b/src/plone/app/multilingual/browser/helper_views.py
index 4b74b6d..9ecf3ba 100644
--- a/src/plone/app/multilingual/browser/helper_views.py
+++ b/src/plone/app/multilingual/browser/helper_views.py
@@ -87,6 +87,11 @@ def getDestination(self):
             language = getMultiAdapter((self.context, self.request),
                                        INegotiateLanguage).language
             query = {'TranslationGroup': self.tg, 'Language': language}
+
+        # Comparison to plone/app/multilingual/browser/setup.py#L129
+        if query.get('Language') == 'id-id':
+            query['Language'] = 'id'
+
         results = ptool.searchResults(query)
         if len(results) > 0:
             url = results[0].getURL()


Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-07-19T22:49:08+08:00
Author: mingtak (mingtak) <andy@mingtak.com.tw>
Commit: https://github.com/plone/plone.app.multilingual/commit/1a7a80512bae05909a07bf34c716d5adaa3f905f

Merge pull request #242 from plone/gforcada-patch-1

bahasa Indonesia lang code

Files changed:
M src/plone/app/multilingual/browser/helper_views.py

diff --git a/src/plone/app/multilingual/browser/helper_views.py b/src/plone/app/multilingual/browser/helper_views.py
index 4b74b6d..9ecf3ba 100644
--- a/src/plone/app/multilingual/browser/helper_views.py
+++ b/src/plone/app/multilingual/browser/helper_views.py
@@ -87,6 +87,11 @@ def getDestination(self):
             language = getMultiAdapter((self.context, self.request),
                                        INegotiateLanguage).language
             query = {'TranslationGroup': self.tg, 'Language': language}
+
+        # Comparison to plone/app/multilingual/browser/setup.py#L129
+        if query.get('Language') == 'id-id':
+            query['Language'] = 'id'
+
         results = ptool.searchResults(query)
         if len(results) > 0:
             url = results[0].getURL()


