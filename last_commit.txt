Repository: Products.ResourceRegistries


Branch: refs/heads/master
Date: 2016-07-05T23:20:16+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.ResourceRegistries/commit/e97a472d6155a8375b3fd24d7fc0aa55cf7258cf

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.rst
M Products/ResourceRegistries/tools/BaseRegistry.py
M Products/ResourceRegistries/tools/CSSRegistry.py
M Products/ResourceRegistries/tools/JSRegistry.py
M Products/ResourceRegistries/tools/KSSRegistry.py

diff --git a/CHANGES.rst b/CHANGES.rst
index abb8c4d..7dd4182 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,8 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
-
+- Use zope.interface decorator.
+  [gforcada]
 
 3.0.3 (2015-09-22)
 ------------------
diff --git a/Products/ResourceRegistries/tools/BaseRegistry.py b/Products/ResourceRegistries/tools/BaseRegistry.py
index 94174b3..aaafdee 100644
--- a/Products/ResourceRegistries/tools/BaseRegistry.py
+++ b/Products/ResourceRegistries/tools/BaseRegistry.py
@@ -7,7 +7,7 @@
 from hashlib import md5
 from time import time
 
-from zope.interface import implements, alsoProvides
+from zope.interface import implementer, alsoProvides
 from zope.component import getAdapters
 from zope.component import queryUtility
 from zope.site.hooks import getSite
@@ -71,8 +71,8 @@ def is_anonymous():
     user = getSecurityManager().getUser()
     return bool(user.getUserName() == 'Anonymous User')
 
+@implementer(IResourceProvider)
 class PersistentResourceProvider(object):
-    implements(IResourceProvider)
 
     def __init__(self, context):
         self.context = context
@@ -250,11 +250,11 @@ def __bobo_traverse__(self, REQUEST, name):
 
 _marker = {} # must be a dict
 
+@implementer(IResourceRegistry)
 class BaseRegistryTool(UniqueObject, SimpleItem, PropertyManager, Cacheable):
     """Base class for a Plone registry managing resource files."""
 
     security = ClassSecurityInfo()
-    implements(IResourceRegistry)
 
     manage_bundlesForm = PageTemplateFile('www/bundles', config.GLOBALS)
 
diff --git a/Products/ResourceRegistries/tools/CSSRegistry.py b/Products/ResourceRegistries/tools/CSSRegistry.py
index 75fa7ac..d416485 100644
--- a/Products/ResourceRegistries/tools/CSSRegistry.py
+++ b/Products/ResourceRegistries/tools/CSSRegistry.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -109,6 +109,7 @@ def getApplyPrefix(self):
 InitializeClass(Stylesheet)
 
 
+@implementer(ICSSRegistry)
 class CSSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to css files."""
 
@@ -118,8 +119,6 @@ class CSSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(ICSSRegistry)
-
     #
     # ZMI stuff
     #
diff --git a/Products/ResourceRegistries/tools/JSRegistry.py b/Products/ResourceRegistries/tools/JSRegistry.py
index 3f881ea..92009f6 100644
--- a/Products/ResourceRegistries/tools/JSRegistry.py
+++ b/Products/ResourceRegistries/tools/JSRegistry.py
@@ -1,5 +1,5 @@
 import re
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -55,6 +55,7 @@ def setCompression(self, compression):
 InitializeClass(JavaScript)
 
 
+@implementer(IJSRegistry)
 class JSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to Javascript files."""
 
@@ -64,8 +65,6 @@ class JSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(IJSRegistry)
-
     #
     # ZMI stuff
     #
diff --git a/Products/ResourceRegistries/tools/KSSRegistry.py b/Products/ResourceRegistries/tools/KSSRegistry.py
index c61e2d8..ff0591d 100644
--- a/Products/ResourceRegistries/tools/KSSRegistry.py
+++ b/Products/ResourceRegistries/tools/KSSRegistry.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -43,6 +43,7 @@ def setCompression(self, compression):
 InitializeClass(KineticStylesheet)
 
 
+@implementer(IKSSRegistry)
 class KSSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to kss files."""
 
@@ -52,8 +53,6 @@ class KSSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(IKSSRegistry)
-
     #
     # ZMI stuff
     #


Repository: Products.ResourceRegistries


Branch: refs/heads/master
Date: 2016-07-10T19:02:26+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.ResourceRegistries/commit/92e9a8bd19b62622e446cb7affd8c7a87fa327cb

Merge pull request #21 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.rst
M Products/ResourceRegistries/tools/BaseRegistry.py
M Products/ResourceRegistries/tools/CSSRegistry.py
M Products/ResourceRegistries/tools/JSRegistry.py
M Products/ResourceRegistries/tools/KSSRegistry.py

diff --git a/CHANGES.rst b/CHANGES.rst
index abb8c4d..7dd4182 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,8 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
-
+- Use zope.interface decorator.
+  [gforcada]
 
 3.0.3 (2015-09-22)
 ------------------
diff --git a/Products/ResourceRegistries/tools/BaseRegistry.py b/Products/ResourceRegistries/tools/BaseRegistry.py
index 94174b3..aaafdee 100644
--- a/Products/ResourceRegistries/tools/BaseRegistry.py
+++ b/Products/ResourceRegistries/tools/BaseRegistry.py
@@ -7,7 +7,7 @@
 from hashlib import md5
 from time import time
 
-from zope.interface import implements, alsoProvides
+from zope.interface import implementer, alsoProvides
 from zope.component import getAdapters
 from zope.component import queryUtility
 from zope.site.hooks import getSite
@@ -71,8 +71,8 @@ def is_anonymous():
     user = getSecurityManager().getUser()
     return bool(user.getUserName() == 'Anonymous User')
 
+@implementer(IResourceProvider)
 class PersistentResourceProvider(object):
-    implements(IResourceProvider)
 
     def __init__(self, context):
         self.context = context
@@ -250,11 +250,11 @@ def __bobo_traverse__(self, REQUEST, name):
 
 _marker = {} # must be a dict
 
+@implementer(IResourceRegistry)
 class BaseRegistryTool(UniqueObject, SimpleItem, PropertyManager, Cacheable):
     """Base class for a Plone registry managing resource files."""
 
     security = ClassSecurityInfo()
-    implements(IResourceRegistry)
 
     manage_bundlesForm = PageTemplateFile('www/bundles', config.GLOBALS)
 
diff --git a/Products/ResourceRegistries/tools/CSSRegistry.py b/Products/ResourceRegistries/tools/CSSRegistry.py
index 75fa7ac..d416485 100644
--- a/Products/ResourceRegistries/tools/CSSRegistry.py
+++ b/Products/ResourceRegistries/tools/CSSRegistry.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -109,6 +109,7 @@ def getApplyPrefix(self):
 InitializeClass(Stylesheet)
 
 
+@implementer(ICSSRegistry)
 class CSSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to css files."""
 
@@ -118,8 +119,6 @@ class CSSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(ICSSRegistry)
-
     #
     # ZMI stuff
     #
diff --git a/Products/ResourceRegistries/tools/JSRegistry.py b/Products/ResourceRegistries/tools/JSRegistry.py
index 3f881ea..92009f6 100644
--- a/Products/ResourceRegistries/tools/JSRegistry.py
+++ b/Products/ResourceRegistries/tools/JSRegistry.py
@@ -1,5 +1,5 @@
 import re
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -55,6 +55,7 @@ def setCompression(self, compression):
 InitializeClass(JavaScript)
 
 
+@implementer(IJSRegistry)
 class JSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to Javascript files."""
 
@@ -64,8 +65,6 @@ class JSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(IJSRegistry)
-
     #
     # ZMI stuff
     #
diff --git a/Products/ResourceRegistries/tools/KSSRegistry.py b/Products/ResourceRegistries/tools/KSSRegistry.py
index c61e2d8..ff0591d 100644
--- a/Products/ResourceRegistries/tools/KSSRegistry.py
+++ b/Products/ResourceRegistries/tools/KSSRegistry.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 
 from AccessControl import ClassSecurityInfo
 from App.class_init import InitializeClass
@@ -43,6 +43,7 @@ def setCompression(self, compression):
 InitializeClass(KineticStylesheet)
 
 
+@implementer(IKSSRegistry)
 class KSSRegistryTool(BaseRegistryTool):
     """A Plone registry for managing the linking to kss files."""
 
@@ -52,8 +53,6 @@ class KSSRegistryTool(BaseRegistryTool):
 
     security = ClassSecurityInfo()
 
-    implements(IKSSRegistry)
-
     #
     # ZMI stuff
     #


