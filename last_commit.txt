Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2016-07-05T12:17:23+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentlisting/commit/0f55a56c2f4861eacc991ae0e23afcbc1c9d885a

RichText values have no size

Files changed:
M plone/app/contentlisting/realobject.py

diff --git a/plone/app/contentlisting/realobject.py b/plone/app/contentlisting/realobject.py
index b71cea7..78857ff 100644
--- a/plone/app/contentlisting/realobject.py
+++ b/plone/app/contentlisting/realobject.py
@@ -70,7 +70,10 @@ def getSize(self):
         primary_field_info = IPrimaryFieldInfo(obj)
         if primary_field_info is None or not primary_field_info.value:
             return 0
-        return obj.getObjSize(None, primary_field_info.value.size)
+        return obj.getObjSize(
+            None,
+            getattr(primary_field_info.value, 'size', 0)
+        )
 
     def review_state(self):
         obj = self.getObject()


