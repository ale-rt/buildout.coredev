Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2016-01-27T14:08:19+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/869f445a2369e150ece8c8242be4a078cc47f5d5

Use plone i18n domain

Files changed:
M plone/formwidget/namedfile/__init__.py
M plone/formwidget/namedfile/configure.zcml
M plone/formwidget/namedfile/file_display.pt
M plone/formwidget/namedfile/file_input.pt
M plone/formwidget/namedfile/image_display.pt
M plone/formwidget/namedfile/image_input.pt

diff --git a/plone/formwidget/namedfile/__init__.py b/plone/formwidget/namedfile/__init__.py
index a1e34f3..99b3379 100644
--- a/plone/formwidget/namedfile/__init__.py
+++ b/plone/formwidget/namedfile/__init__.py
@@ -2,6 +2,6 @@
 from plone.formwidget.namedfile.widget import NamedFileWidget  # noqa
 from plone.formwidget.namedfile.widget import NamedImageFieldWidget  # noqa
 from plone.formwidget.namedfile.widget import NamedImageWidget  # noqa
-import zope.i18nmessageid
+from zope.i18nmessageid import MessageFactory
 
-MessageFactory = zope.i18nmessageid.MessageFactory('plone.formwidget.namedfile')
+_ = MessageFactory('plone')
diff --git a/plone/formwidget/namedfile/configure.zcml b/plone/formwidget/namedfile/configure.zcml
index bce3532..cc805f8 100644
--- a/plone/formwidget/namedfile/configure.zcml
+++ b/plone/formwidget/namedfile/configure.zcml
@@ -3,7 +3,7 @@
     xmlns:z3c="http://namespaces.zope.org/z3c"
     xmlns:browser="http://namespaces.zope.org/browser"
     xmlns:i18n="http://namespaces.zope.org/i18n"
-    i18n_domain="plone.formwidget.namedfile">
+    i18n_domain="plone">
 
   <include package="z3c.form" file="meta.zcml" />
   <include package="z3c.form" />
diff --git a/plone/formwidget/namedfile/file_display.pt b/plone/formwidget/namedfile/file_display.pt
index 2d10b4a..423fe10 100644
--- a/plone/formwidget/namedfile/file_display.pt
+++ b/plone/formwidget/namedfile/file_display.pt
@@ -1,4 +1,4 @@
-<span id="" class="" i18n:domain="plone.formwidget.namedfile"
+<span id="" class="" i18n:domain="plone"
       tal:attributes="id view/id;
                       class view/klass;
                       style view/style;
@@ -31,7 +31,6 @@
            tal:attributes="href view/download_url">Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size"
                   tal:replace="sizekb" i18n:translate="">100</span>
diff --git a/plone/formwidget/namedfile/file_input.pt b/plone/formwidget/namedfile/file_input.pt
index 425dd38..72e265b 100644
--- a/plone/formwidget/namedfile/file_input.pt
+++ b/plone/formwidget/namedfile/file_input.pt
@@ -1,5 +1,5 @@
 <span
-    i18n:domain="plone.formwidget.namedfile"
+    i18n:domain="plone"
     tal:attributes="id view/id;
                     class view/klass;
                     style view/style;
@@ -39,7 +39,6 @@
             >Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size" tal:replace="sizekb"
                   i18n:translate="">100</span>
diff --git a/plone/formwidget/namedfile/image_display.pt b/plone/formwidget/namedfile/image_display.pt
index 3645c0b..86f28a4 100644
--- a/plone/formwidget/namedfile/image_display.pt
+++ b/plone/formwidget/namedfile/image_display.pt
@@ -1,4 +1,4 @@
-<span id="" class="" i18n:domain="plone.formwidget.namedfile"
+<span id="" class="" i18n:domain="plone"
       tal:attributes="id view/id;
                       class view/klass;
                       style view/style;
diff --git a/plone/formwidget/namedfile/image_input.pt b/plone/formwidget/namedfile/image_input.pt
index 75e34bd..8173d3a 100644
--- a/plone/formwidget/namedfile/image_input.pt
+++ b/plone/formwidget/namedfile/image_input.pt
@@ -1,5 +1,5 @@
 <span
-    i18n:domain="plone.formwidget.namedfile"
+    i18n:domain="plone"
     tal:attributes="id view/id;
                     class view/klass;
                     style view/style;
@@ -43,7 +43,6 @@
             >Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size" tal:replace="sizekb"
                   i18n:translate="">100</span>


Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2016-01-27T14:23:58+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/d56502218db05a8d23ad592be87de8ca46efeb0a

Update CHANGES.txt

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 17351a8..6a1b38f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,9 @@ Changelog
 -------------------
 
 New:
+- Use plone i18n domain
+  See https://github.com/plone/plone.formwidget.namedfile/pull/18
+  [staeff] 
 
 - Add Finnish translations [petri]
 


Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2016-01-27T14:34:43+01:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/a27a4613d86546da8ce023746c5853c6eb7cd466

Merge pull request #18 from plone/use-plone-i18n-domain

Use plone i18n domain

Files changed:
M CHANGES.rst
M plone/formwidget/namedfile/__init__.py
M plone/formwidget/namedfile/configure.zcml
M plone/formwidget/namedfile/file_display.pt
M plone/formwidget/namedfile/file_input.pt
M plone/formwidget/namedfile/image_display.pt
M plone/formwidget/namedfile/image_input.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 17351a8..6a1b38f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,9 @@ Changelog
 -------------------
 
 New:
+- Use plone i18n domain
+  See https://github.com/plone/plone.formwidget.namedfile/pull/18
+  [staeff] 
 
 - Add Finnish translations [petri]
 
diff --git a/plone/formwidget/namedfile/__init__.py b/plone/formwidget/namedfile/__init__.py
index a1e34f3..99b3379 100644
--- a/plone/formwidget/namedfile/__init__.py
+++ b/plone/formwidget/namedfile/__init__.py
@@ -2,6 +2,6 @@
 from plone.formwidget.namedfile.widget import NamedFileWidget  # noqa
 from plone.formwidget.namedfile.widget import NamedImageFieldWidget  # noqa
 from plone.formwidget.namedfile.widget import NamedImageWidget  # noqa
-import zope.i18nmessageid
+from zope.i18nmessageid import MessageFactory
 
-MessageFactory = zope.i18nmessageid.MessageFactory('plone.formwidget.namedfile')
+_ = MessageFactory('plone')
diff --git a/plone/formwidget/namedfile/configure.zcml b/plone/formwidget/namedfile/configure.zcml
index bce3532..cc805f8 100644
--- a/plone/formwidget/namedfile/configure.zcml
+++ b/plone/formwidget/namedfile/configure.zcml
@@ -3,7 +3,7 @@
     xmlns:z3c="http://namespaces.zope.org/z3c"
     xmlns:browser="http://namespaces.zope.org/browser"
     xmlns:i18n="http://namespaces.zope.org/i18n"
-    i18n_domain="plone.formwidget.namedfile">
+    i18n_domain="plone">
 
   <include package="z3c.form" file="meta.zcml" />
   <include package="z3c.form" />
diff --git a/plone/formwidget/namedfile/file_display.pt b/plone/formwidget/namedfile/file_display.pt
index 2d10b4a..423fe10 100644
--- a/plone/formwidget/namedfile/file_display.pt
+++ b/plone/formwidget/namedfile/file_display.pt
@@ -1,4 +1,4 @@
-<span id="" class="" i18n:domain="plone.formwidget.namedfile"
+<span id="" class="" i18n:domain="plone"
       tal:attributes="id view/id;
                       class view/klass;
                       style view/style;
@@ -31,7 +31,6 @@
            tal:attributes="href view/download_url">Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size"
                   tal:replace="sizekb" i18n:translate="">100</span>
diff --git a/plone/formwidget/namedfile/file_input.pt b/plone/formwidget/namedfile/file_input.pt
index 425dd38..72e265b 100644
--- a/plone/formwidget/namedfile/file_input.pt
+++ b/plone/formwidget/namedfile/file_input.pt
@@ -1,5 +1,5 @@
 <span
-    i18n:domain="plone.formwidget.namedfile"
+    i18n:domain="plone"
     tal:attributes="id view/id;
                     class view/klass;
                     style view/style;
@@ -39,7 +39,6 @@
             >Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size" tal:replace="sizekb"
                   i18n:translate="">100</span>
diff --git a/plone/formwidget/namedfile/image_display.pt b/plone/formwidget/namedfile/image_display.pt
index 3645c0b..86f28a4 100644
--- a/plone/formwidget/namedfile/image_display.pt
+++ b/plone/formwidget/namedfile/image_display.pt
@@ -1,4 +1,4 @@
-<span id="" class="" i18n:domain="plone.formwidget.namedfile"
+<span id="" class="" i18n:domain="plone"
       tal:attributes="id view/id;
                       class view/klass;
                       style view/style;
diff --git a/plone/formwidget/namedfile/image_input.pt b/plone/formwidget/namedfile/image_input.pt
index 75e34bd..8173d3a 100644
--- a/plone/formwidget/namedfile/image_input.pt
+++ b/plone/formwidget/namedfile/image_input.pt
@@ -1,5 +1,5 @@
 <span
-    i18n:domain="plone.formwidget.namedfile"
+    i18n:domain="plone"
     tal:attributes="id view/id;
                     class view/klass;
                     style view/style;
@@ -43,7 +43,6 @@
             >Filename</a>
         <span class="discreet"> &mdash;<tal:doc_type condition="doc_type">
             <span tal:replace="doc_type"
-                  i18n:domain="plone"
                   i18n:translate="">ContentType</span>,</tal:doc_type>
             <span tal:define="sizekb view/file_size" tal:replace="sizekb"
                   i18n:translate="">100</span>


