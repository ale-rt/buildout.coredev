Repository: plone.app.contentmenu


Branch: refs/heads/master
Date: 2016-10-22T12:36:25-04:00
Author: Matthew Wilkes (MatthewWilkes) <git@matthewwilkes.name>
Commit: https://github.com/plone/plone.app.contentmenu/commit/e6ca0b5a2af8306b3ed80fe237585f40d97cf8f8

Allow menu items to specify a short title that will be displayed if the sidebar is collapsed.

Files changed:
M CHANGES.rst
M plone/app/contentmenu/contentmenu.pt
M plone/app/contentmenu/menu.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 4947eaf..6d71633 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add ability to specify a short title for the collapsed sidebar.
+  [MatthewWilkes]
 
 Bug fixes:
 
diff --git a/plone/app/contentmenu/contentmenu.pt b/plone/app/contentmenu/contentmenu.pt
index ef4e6f1..9e40030 100644
--- a/plone/app/contentmenu/contentmenu.pt
+++ b/plone/app/contentmenu/contentmenu.pt
@@ -28,11 +28,19 @@
             tal:condition="not: menuItem/extra/stateTitle | nothing"></span>
         <span tal:omit-tag="not: menuItem/extra/stateTitle | nothing">
           <span
+              class="plone-toolbar-title"
               i18n:translate=""
               tal:content="menuItem/title">
               Menu Title
             </span>
+        <span
+            class="plone-toolbar-short-title"
+            i18n:translate=""
+            tal:content="menuItem/extra/shortTitle | menuItem/title">
+            Short Title
+          </span>
           <span
+              class="plone-toolbar-state-title"
               i18n:translate=""
               tal:condition="menuItem/extra/stateTitle | nothing"
               tal:content="menuItem/extra/stateTitle">
diff --git a/plone/app/contentmenu/menu.py b/plone/app/contentmenu/menu.py
index a1471de..7d06460 100644
--- a/plone/app/contentmenu/menu.py
+++ b/plone/app/contentmenu/menu.py
@@ -655,6 +655,7 @@ class WorkflowSubMenuItem(BrowserSubMenuItem):
     MANAGE_SETTINGS_PERMISSION = 'Manage portal'
 
     title = _(u'label_state', default=u'State:')
+    short_title = _(u'label_state_short', default=u'State')
     submenuId = 'plone_contentmenu_workflow'
     order = 20
 
@@ -673,6 +674,7 @@ def extra(self):
                 'class': 'state-{0}'.format(state),
                 'state': state,
                 'stateTitle': stateTitle,
+                'shortTitle': self.short_title,
                 'li_class': 'plonetoolbar-workfow-transition'}
 
     @property


