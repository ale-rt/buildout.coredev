Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-05-23T00:55:30+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/6082d14156bd5f770293138a7f2e56a03d8d0e8d

TinyMCE 4.5.6 update.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles/to_beta4/registry.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 5ca7279..1e4021e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,12 +10,15 @@ Breaking changes:
 
 New features:
 
+- TinyMCE 4.5.6 update.
+  [thet]
+
 - Update registry for Plone 5.1 to integrate ``mockup-patterns-structureupdater``.
   [thet]
 
 Bug fixes:
 
-- Catch warning the pythonic way. 
+- Catch warning the pythonic way.
   Makes it work with latest CMFCore.
   [jensens]
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 58188b5..2d1ed34 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -136,7 +136,9 @@ Add image scaling options to image handling control panel.
         <gs:upgradeDepends
             title="Run to51beta4 upgrade profile."
             description="New metadata column `mime_type`.
-                         Update plone-logged-in bundle."
+                         Update plone-logged-in bundle.
+                         TinyMCE 4.5.6 update.
+                         New mockup-patterns-structureupdater."
             import_profile="plone.app.upgrade.v51:to51beta4"
             />
 
diff --git a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
index d4c8691..97a1be5 100644
--- a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
+++ b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
@@ -2,13 +2,29 @@
 <registry>
 
   <!-- Update ``last_compilation`` to deliver new bundles -->
-  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
-    <value key="last_compilation">2017-04-11 16:10:00</value>
+  <records
+      prefix="plone.bundles/plone"
+      interface="Products.CMFPlone.interfaces.IBundleRegistry"
+      purge="False">
+    <value key="last_compilation">2017-05-23 00:45:00</value>
+  </records>
+  <records
+      prefix="plone.bundles/plone-logged-in"
+      interface="Products.CMFPlone.interfaces.IBundleRegistry"
+      purge="False">
+    <value key="last_compilation">2017-05-23 00:45:00</value>
   </records>
 
-  <records prefix="plone.resources/mockup-patterns-structureupdater"
-            interface='Products.CMFPlone.interfaces.IResourceRegistry'>
-      <value key="js">++resource++mockup/structure/pattern-structureupdater.js</value>
+  <records
+      prefix="plone.resources/mockup-patterns-structureupdater"
+      interface='Products.CMFPlone.interfaces.IResourceRegistry'>
+    <value key="js">++resource++mockup/structure/pattern-structureupdater.js</value>
   </records>
 
+  <!-- Remove TinyMCE layer resource -->
+  <records 
+      remove="True"
+      prefix="plone.resources/tinymce-layer"
+      interface='Products.CMFPlone.interfaces.IResourceRegistry'/>
+
 </registry>


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-05-23T13:06:11+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/7f4c3cc41592e5bdab8cfdd50ef9d61bf5a87afe

Merge pull request #121 from plone/thet-tinymce456

TinyMCE 4.5.6 update.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles/to_beta4/registry.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 5ca7279..1e4021e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,12 +10,15 @@ Breaking changes:
 
 New features:
 
+- TinyMCE 4.5.6 update.
+  [thet]
+
 - Update registry for Plone 5.1 to integrate ``mockup-patterns-structureupdater``.
   [thet]
 
 Bug fixes:
 
-- Catch warning the pythonic way. 
+- Catch warning the pythonic way.
   Makes it work with latest CMFCore.
   [jensens]
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 58188b5..2d1ed34 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -136,7 +136,9 @@ Add image scaling options to image handling control panel.
         <gs:upgradeDepends
             title="Run to51beta4 upgrade profile."
             description="New metadata column `mime_type`.
-                         Update plone-logged-in bundle."
+                         Update plone-logged-in bundle.
+                         TinyMCE 4.5.6 update.
+                         New mockup-patterns-structureupdater."
             import_profile="plone.app.upgrade.v51:to51beta4"
             />
 
diff --git a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
index d4c8691..97a1be5 100644
--- a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
+++ b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
@@ -2,13 +2,29 @@
 <registry>
 
   <!-- Update ``last_compilation`` to deliver new bundles -->
-  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
-    <value key="last_compilation">2017-04-11 16:10:00</value>
+  <records
+      prefix="plone.bundles/plone"
+      interface="Products.CMFPlone.interfaces.IBundleRegistry"
+      purge="False">
+    <value key="last_compilation">2017-05-23 00:45:00</value>
+  </records>
+  <records
+      prefix="plone.bundles/plone-logged-in"
+      interface="Products.CMFPlone.interfaces.IBundleRegistry"
+      purge="False">
+    <value key="last_compilation">2017-05-23 00:45:00</value>
   </records>
 
-  <records prefix="plone.resources/mockup-patterns-structureupdater"
-            interface='Products.CMFPlone.interfaces.IResourceRegistry'>
-      <value key="js">++resource++mockup/structure/pattern-structureupdater.js</value>
+  <records
+      prefix="plone.resources/mockup-patterns-structureupdater"
+      interface='Products.CMFPlone.interfaces.IResourceRegistry'>
+    <value key="js">++resource++mockup/structure/pattern-structureupdater.js</value>
   </records>
 
+  <!-- Remove TinyMCE layer resource -->
+  <records 
+      remove="True"
+      prefix="plone.resources/tinymce-layer"
+      interface='Products.CMFPlone.interfaces.IResourceRegistry'/>
+
 </registry>


