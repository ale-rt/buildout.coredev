Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-04-06T13:26:33+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/6a19fafde02a2f49abc8627812632250016c0c08

Wait for visibility of select2 result, instead of time.

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/tests/robot/test_add_translation.robot

diff --git a/CHANGES.rst b/CHANGES.rst
index b4048d7..b8d79f3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,7 @@ New:
 
 Fixes:
 
-- Wait longer in robot test for keyword succeeded, since 5s was not enough.
+- Wait for visibility of select2 result, instead of time.
   [jensens]
 
 - Workaroud in robot test for TinyMCE overlap bug see 
diff --git a/src/plone/app/multilingual/tests/robot/test_add_translation.robot b/src/plone/app/multilingual/tests/robot/test_add_translation.robot
index f7a07d3..d0e1122 100644
--- a/src/plone/app/multilingual/tests/robot/test_add_translation.robot
+++ b/src/plone/app/multilingual/tests/robot/test_add_translation.robot
@@ -58,9 +58,8 @@ I add the document in English as a translation
 
   Click Element  css=#formfield-form-widgets-content .select2-choices
   Wait until element is visible  css=#select2-drop
-
-  Wait until keyword succeeds  10s  1s
-  ...  Click Element  xpath=(//span[contains(., 'An English Document')])
+  Wait until element is visible  xpath=(//span[contains(., 'An English Document')])
+  Click Element  xpath=(//span[contains(., 'An English Document')])
   Wait until page contains  An English Document
 
   Select From List  name=form.widgets.language:list  en


