Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-07-05T23:13:43+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/5cd43740709e25a700cbf15a0992b9983fbff388

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.rst
M plone/app/upgrade/__init__.py
M plone/app/upgrade/v43/tests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6c2566e..da11958 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -23,6 +23,8 @@ Bug fixes:
 - Add missing ``jquery.browser`` dependency which is needed by patternslib.
   [thet]
 
+- Use zope.interface decorator.
+  [gforcada]
 
 1.3.25 (2016-06-21)
 -------------------
diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py
index a7844c1..56d6312 100644
--- a/plone/app/upgrade/__init__.py
+++ b/plone/app/upgrade/__init__.py
@@ -1,15 +1,15 @@
 import pkg_resources
 import sys
-from zope.interface import implements
+from zope.interface import implementer
 from Products.CMFQuickInstallerTool.interfaces import INonInstallable
 from plone.app.upgrade.utils import alias_module
 import bbb
 import bbbd
 
 
+@implementer(INonInstallable)
 class HiddenProducts(object):
     """This hides the upgrade profiles from the quick installer tool."""
-    implements(INonInstallable)
 
     def getNonInstallableProducts(self):
         return [
diff --git a/plone/app/upgrade/v43/tests.py b/plone/app/upgrade/v43/tests.py
index 3284c6a..098e950 100644
--- a/plone/app/upgrade/v43/tests.py
+++ b/plone/app/upgrade/v43/tests.py
@@ -1,7 +1,7 @@
 from zope.component import getAdapters, queryMultiAdapter
 from zope.component import getSiteManager
 from zope.contentprovider.interfaces import IContentProvider
-from zope.interface import implements
+from zope.interface import implementer
 from zope.viewlet.interfaces import IViewlet
 
 from plone.app.upgrade.tests.base import MigrationTest
@@ -286,8 +286,8 @@ def testMarkProductsInstalledForUninstallableProfiles(self):
             product=product_id, profile_type=EXTENSION)
 
         # Hide the profile.
+        @implementer(INonInstallable)
         class HiddenProfiles(object):
-            implements(INonInstallable)
 
             def getNonInstallableProfiles(self):
                 return [profile_id]


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-07-10T08:52:25+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/cd598db1fc8e900036614ef34dd7b77f2a817570

Merge pull request #80 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.rst
M plone/app/upgrade/__init__.py
M plone/app/upgrade/v43/tests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6c2566e..da11958 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -23,6 +23,8 @@ Bug fixes:
 - Add missing ``jquery.browser`` dependency which is needed by patternslib.
   [thet]
 
+- Use zope.interface decorator.
+  [gforcada]
 
 1.3.25 (2016-06-21)
 -------------------
diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py
index a7844c1..56d6312 100644
--- a/plone/app/upgrade/__init__.py
+++ b/plone/app/upgrade/__init__.py
@@ -1,15 +1,15 @@
 import pkg_resources
 import sys
-from zope.interface import implements
+from zope.interface import implementer
 from Products.CMFQuickInstallerTool.interfaces import INonInstallable
 from plone.app.upgrade.utils import alias_module
 import bbb
 import bbbd
 
 
+@implementer(INonInstallable)
 class HiddenProducts(object):
     """This hides the upgrade profiles from the quick installer tool."""
-    implements(INonInstallable)
 
     def getNonInstallableProducts(self):
         return [
diff --git a/plone/app/upgrade/v43/tests.py b/plone/app/upgrade/v43/tests.py
index 3284c6a..098e950 100644
--- a/plone/app/upgrade/v43/tests.py
+++ b/plone/app/upgrade/v43/tests.py
@@ -1,7 +1,7 @@
 from zope.component import getAdapters, queryMultiAdapter
 from zope.component import getSiteManager
 from zope.contentprovider.interfaces import IContentProvider
-from zope.interface import implements
+from zope.interface import implementer
 from zope.viewlet.interfaces import IViewlet
 
 from plone.app.upgrade.tests.base import MigrationTest
@@ -286,8 +286,8 @@ def testMarkProductsInstalledForUninstallableProfiles(self):
             product=product_id, profile_type=EXTENSION)
 
         # Hide the profile.
+        @implementer(INonInstallable)
         class HiddenProfiles(object):
-            implements(INonInstallable)
 
             def getNonInstallableProfiles(self):
                 return [profile_id]


