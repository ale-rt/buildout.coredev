Repository: plone.api


Branch: refs/heads/master
Date: 2016-10-29T22:32:38+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.api/commit/d7864191fa3a111442561fa7fd4e0b1f4e7744c2

Remove print statement

Files changed:
M src/plone/api/tests/test_doctests.py

diff --git a/src/plone/api/tests/test_doctests.py b/src/plone/api/tests/test_doctests.py
index 29e4c6a..d46e5b4 100644
--- a/src/plone/api/tests/test_doctests.py
+++ b/src/plone/api/tests/test_doctests.py
@@ -1,6 +1,7 @@
 # -*- coding: utf-8 -*-
 """Boilerplate for doctest functional tests."""
 
+from logging import getLogger
 from plone.app.testing import applyProfile
 from plone.app.testing import PLONE_INTEGRATION_TESTING
 from plone.app.testing import setRoles
@@ -20,6 +21,7 @@
 import re
 import unittest
 
+logger = getLogger(__name__)
 
 try:
     pkg_resources.get_distribution('plone.app.contenttypes')
@@ -115,6 +117,6 @@ def test_suite():
         try:
             doctests.append(DocFileSuite(os.path.join(path, filename)))
         except IOError:
-            print 'test_doctest.py skipping {0}'.format(filename)
+            logger.warning('test_doctest.py skipping {0}'.format(filename))
 
     return unittest.TestSuite(doctests)


Repository: plone.api


Branch: refs/heads/master
Date: 2016-10-29T22:32:38+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.api/commit/6974500b611ccbe820bc07c527c916debc27aaad

use security decorator

Files changed:
M src/plone/api/tests/test_env.py

diff --git a/src/plone/api/tests/test_env.py b/src/plone/api/tests/test_env.py
index 3785aa2..9d4fc18 100644
--- a/src/plone/api/tests/test_env.py
+++ b/src/plone/api/tests/test_env.py
@@ -8,7 +8,6 @@
 from plone.app.testing import TEST_USER_ID
 
 import AccessControl
-import AccessControl.SecurityManagement
 import Globals
 import unittest
 
@@ -28,27 +27,26 @@ class HasProtectedMethods(SimpleItem):
 
     security = AccessControl.ClassSecurityInfo()
 
-    security.declarePublic('public_method')
-    security.declareProtected('ppp', 'pp_method')
-    security.declareProtected('qqq', 'qq_method')
-    security.declareProtected('rrr', 'rr_method')
-    security.declarePrivate('private_method')
-
     def __init__(self, id):
         self.id = id
 
+    @security.public
     def public_method(self):
         pass
 
+    @security.protected('ppp')
     def pp_method(self):
         pass
 
+    @security.protected('qqq')
     def qq_method(self):
         pass
 
+    @security.protected('rrr')
     def rr_method(self):
         pass
 
+    @security.private
     def private_method(self):
         pass
 


Repository: plone.api


Branch: refs/heads/master
Date: 2016-10-29T22:32:38+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.api/commit/140b1286b2cb7124ae2197da86f34e83700aff3c

Added a changelog

Files changed:
M docs/CHANGES.rst

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 2a9c5d8..d485608 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -6,6 +6,10 @@ Changelog
 
 Fixes:
 
+- Remove print statements and use @security decorators to make
+  code-analysis happy.
+  [ale-rt]
+
 - Typo in the documentation.
   [ale-rt]
 


Repository: plone.api


Branch: refs/heads/master
Date: 2016-10-29T22:53:05+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/841f9a26cfe279ed6a22d1c2526890061e9e2bca

Merge pull request #322 from plone/pep8

Pep8

Files changed:
M docs/CHANGES.rst
M src/plone/api/tests/test_doctests.py
M src/plone/api/tests/test_env.py

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 2a9c5d8..d485608 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -6,6 +6,10 @@ Changelog
 
 Fixes:
 
+- Remove print statements and use @security decorators to make
+  code-analysis happy.
+  [ale-rt]
+
 - Typo in the documentation.
   [ale-rt]
 
diff --git a/src/plone/api/tests/test_doctests.py b/src/plone/api/tests/test_doctests.py
index 29e4c6a..d46e5b4 100644
--- a/src/plone/api/tests/test_doctests.py
+++ b/src/plone/api/tests/test_doctests.py
@@ -1,6 +1,7 @@
 # -*- coding: utf-8 -*-
 """Boilerplate for doctest functional tests."""
 
+from logging import getLogger
 from plone.app.testing import applyProfile
 from plone.app.testing import PLONE_INTEGRATION_TESTING
 from plone.app.testing import setRoles
@@ -20,6 +21,7 @@
 import re
 import unittest
 
+logger = getLogger(__name__)
 
 try:
     pkg_resources.get_distribution('plone.app.contenttypes')
@@ -115,6 +117,6 @@ def test_suite():
         try:
             doctests.append(DocFileSuite(os.path.join(path, filename)))
         except IOError:
-            print 'test_doctest.py skipping {0}'.format(filename)
+            logger.warning('test_doctest.py skipping {0}'.format(filename))
 
     return unittest.TestSuite(doctests)
diff --git a/src/plone/api/tests/test_env.py b/src/plone/api/tests/test_env.py
index 3785aa2..9d4fc18 100644
--- a/src/plone/api/tests/test_env.py
+++ b/src/plone/api/tests/test_env.py
@@ -8,7 +8,6 @@
 from plone.app.testing import TEST_USER_ID
 
 import AccessControl
-import AccessControl.SecurityManagement
 import Globals
 import unittest
 
@@ -28,27 +27,26 @@ class HasProtectedMethods(SimpleItem):
 
     security = AccessControl.ClassSecurityInfo()
 
-    security.declarePublic('public_method')
-    security.declareProtected('ppp', 'pp_method')
-    security.declareProtected('qqq', 'qq_method')
-    security.declareProtected('rrr', 'rr_method')
-    security.declarePrivate('private_method')
-
     def __init__(self, id):
         self.id = id
 
+    @security.public
     def public_method(self):
         pass
 
+    @security.protected('ppp')
     def pp_method(self):
         pass
 
+    @security.protected('qqq')
     def qq_method(self):
         pass
 
+    @security.protected('rrr')
     def rr_method(self):
         pass
 
+    @security.private
     def private_method(self):
         pass
 


