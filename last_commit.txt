Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2016-11-08T22:03:41+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/4034e651a60c750bb86b4297bf533db9459f716b

Avoid showing the uninstall profile

Files changed:
A plone/app/iterate/profiles.py

diff --git a/plone/app/iterate/profiles.py b/plone/app/iterate/profiles.py
new file mode 100644
index 0000000..685c38d
--- /dev/null
+++ b/plone/app/iterate/profiles.py
@@ -0,0 +1,16 @@
+# -*- coding: utf-8 -*-
+from zope.interface import implementer
+from Products.CMFPlone.interfaces import INonInstallable
+
+
+@implementer(INonInstallable)
+class HiddenProfiles(object):
+
+    def getNonInstallableProfiles(self):
+        """Prevents uninstall profile from showing up in the profile list
+        when creating a Plone site.
+
+        """
+        return [
+            u'plone.app.iterate:uninstall',
+        ]


Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2016-11-08T22:06:06+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/04b07d473165b902eba86e816e10e3db38caebab

Register utility

Files changed:
M plone/app/iterate/configure.zcml

diff --git a/plone/app/iterate/configure.zcml b/plone/app/iterate/configure.zcml
index f103e0a..5b5f395 100644
--- a/plone/app/iterate/configure.zcml
+++ b/plone/app/iterate/configure.zcml
@@ -60,7 +60,12 @@
       handler="plone.app.iterate.util.upgrade_by_reinstall"
       />
 
-  <!-- Policy and behavior for basic objects -->
+  <utility
+      name="plone.app.iterate"
+      factory=".profiles.HiddenProfiles"
+      />
+
+    <!-- Policy and behavior for basic objects -->
   <class class="Products.Archetypes.BaseObject.BaseObject">
       <implements interface=".interfaces.IIterateAware" />
   </class>


Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2016-11-08T22:07:18+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/b79dce43371f0502009847988c9166c2a37a4808

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 6371fb3..53d442f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -17,6 +17,9 @@ Bug fixes:
 - Add coding header on python files.
   [gforcada]
 
+- Hide uninstall profile from being shown on the Plone install (advanced) form.
+  [gforcada]
+
 3.2.2 (2016-09-14)
 ------------------
 


Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2016-11-09T01:29:43+01:00
Author: Gil Forcada (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/e18d1c02199218322ee3e12de6493f0bbfa3cc6c

Hide the deprecated profile as well

Files changed:
M plone/app/iterate/profiles.py

diff --git a/plone/app/iterate/profiles.py b/plone/app/iterate/profiles.py
index 685c38d..ebf4007 100644
--- a/plone/app/iterate/profiles.py
+++ b/plone/app/iterate/profiles.py
@@ -13,4 +13,5 @@ def getNonInstallableProfiles(self):
         """
         return [
             u'plone.app.iterate:uninstall',
+            u'plone.app.iterate:plone.app.iterate',
         ]


Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2016-11-09T07:41:58+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/9b53ba92d87dfda0b7e37b5d5ff20a7ee923bc86

Merge pull request #35 from plone/gforcada-only-one-generic-profile-shown

Only one generic profile shown

Files changed:
A plone/app/iterate/profiles.py
M CHANGES.rst
M plone/app/iterate/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 6371fb3..53d442f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -17,6 +17,9 @@ Bug fixes:
 - Add coding header on python files.
   [gforcada]
 
+- Hide uninstall profile from being shown on the Plone install (advanced) form.
+  [gforcada]
+
 3.2.2 (2016-09-14)
 ------------------
 
diff --git a/plone/app/iterate/configure.zcml b/plone/app/iterate/configure.zcml
index f103e0a..5b5f395 100644
--- a/plone/app/iterate/configure.zcml
+++ b/plone/app/iterate/configure.zcml
@@ -60,7 +60,12 @@
       handler="plone.app.iterate.util.upgrade_by_reinstall"
       />
 
-  <!-- Policy and behavior for basic objects -->
+  <utility
+      name="plone.app.iterate"
+      factory=".profiles.HiddenProfiles"
+      />
+
+    <!-- Policy and behavior for basic objects -->
   <class class="Products.Archetypes.BaseObject.BaseObject">
       <implements interface=".interfaces.IIterateAware" />
   </class>
diff --git a/plone/app/iterate/profiles.py b/plone/app/iterate/profiles.py
new file mode 100644
index 0000000..ebf4007
--- /dev/null
+++ b/plone/app/iterate/profiles.py
@@ -0,0 +1,17 @@
+# -*- coding: utf-8 -*-
+from zope.interface import implementer
+from Products.CMFPlone.interfaces import INonInstallable
+
+
+@implementer(INonInstallable)
+class HiddenProfiles(object):
+
+    def getNonInstallableProfiles(self):
+        """Prevents uninstall profile from showing up in the profile list
+        when creating a Plone site.
+
+        """
+        return [
+            u'plone.app.iterate:uninstall',
+            u'plone.app.iterate:plone.app.iterate',
+        ]


