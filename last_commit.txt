Repository: plone.app.content


Branch: refs/heads/3.1.x
Date: 2016-07-08T18:42:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/116c8dade7b95ee1a901fc94a045632ab23a7f59

Properly deprecated ``_permissions`` in favor of ``PERMISSIONS``.

Since 3.1, the ``_permissions`` variable was ``None`` instead of a
backwards compatibility alias for ``PERMISSIONS`` due to a wrong
deprecation.

Files changed:
M CHANGES.rst
M plone/app/content/browser/vocabulary.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2a73481..3574101 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,10 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Properly deprecated ``_permissions`` in favor of ``PERMISSIONS``.
+  Since 3.1, the ``_permissions`` variable was ``None`` instead of a
+  backwards compatibility alias for ``PERMISSIONS`` due to a wrong
+  deprecation.  [maurits]
 
 
 3.1.1 (2016-05-02)
@@ -60,7 +63,7 @@ Fixes:
   [thet]
 
 - Vocabulary permissions are considered View permission by default, if not
-  stated different in PERMISSION global. Renamed _permissions to PERMISSIONS,
+  stated different in PERMISSIONS global. Renamed _permissions to PERMISSIONS,
   Deprecated BBB name in place. Also minor code-style changes
   [jensens, thet]
 
diff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py
index fdf32fd..5b5e840 100644
--- a/plone/app/content/browser/vocabulary.py
+++ b/plone/app/content/browser/vocabulary.py
@@ -39,7 +39,8 @@
     'plone.app.vocabularies.Users': 'Modify portal content',
 }
 
-_permissions = deprecated(PERMISSIONS, 'Use PERMISSION variable instead')
+_permissions = PERMISSIONS
+deprecated('_permissions', 'Use PERMISSIONS variable instead.')
 
 
 def _parseJSON(s):


Repository: plone.app.content


Branch: refs/heads/3.1.x
Date: 2016-07-09T13:53:15+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.content/commit/cff64ef59aa9c1d24b8a95860a61ef86b7dae13a

Merge pull request #97 from plone/maurits-deprecate-permissions-31x

Properly deprecated _permissions in favor of PERMISSIONS. [3.1]

Files changed:
M CHANGES.rst
M plone/app/content/browser/vocabulary.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2a73481..3574101 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,10 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Properly deprecated ``_permissions`` in favor of ``PERMISSIONS``.
+  Since 3.1, the ``_permissions`` variable was ``None`` instead of a
+  backwards compatibility alias for ``PERMISSIONS`` due to a wrong
+  deprecation.  [maurits]
 
 
 3.1.1 (2016-05-02)
@@ -60,7 +63,7 @@ Fixes:
   [thet]
 
 - Vocabulary permissions are considered View permission by default, if not
-  stated different in PERMISSION global. Renamed _permissions to PERMISSIONS,
+  stated different in PERMISSIONS global. Renamed _permissions to PERMISSIONS,
   Deprecated BBB name in place. Also minor code-style changes
   [jensens, thet]
 
diff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py
index fdf32fd..5b5e840 100644
--- a/plone/app/content/browser/vocabulary.py
+++ b/plone/app/content/browser/vocabulary.py
@@ -39,7 +39,8 @@
     'plone.app.vocabularies.Users': 'Modify portal content',
 }
 
-_permissions = deprecated(PERMISSIONS, 'Use PERMISSION variable instead')
+_permissions = PERMISSIONS
+deprecated('_permissions', 'Use PERMISSIONS variable instead.')
 
 
 def _parseJSON(s):


