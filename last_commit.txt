Repository: Products.CMFDiffTool


Branch: refs/heads/master
Date: 2016-07-05T23:18:29+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.CMFDiffTool/commit/963e8e28ac64a6e9330ce131fc2ff2f0a4e43f87

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.rst
M Products/CMFDiffTool/BaseDiff.py
M Products/CMFDiffTool/CMFDiffTool.py
M Products/CMFDiffTool/ChangeSet.py
M Products/CMFDiffTool/exportimport/difftool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 739d66b..c7deac7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 3.1.1 (2016-04-18)
diff --git a/Products/CMFDiffTool/BaseDiff.py b/Products/CMFDiffTool/BaseDiff.py
index 2dd5f09..5ce3f5c 100644
--- a/Products/CMFDiffTool/BaseDiff.py
+++ b/Products/CMFDiffTool/BaseDiff.py
@@ -11,15 +11,14 @@
 from Products.CMFDiffTool.interfaces import IDifference
 from Products.CMFPlone.utils import safe_hasattr
 from zope.i18n import translate
-from zope.interface import implements
+from zope.interface import implementer
 
 import Acquisition
 
 
+@implementer(IDifference)
 class BaseDiff:
     """Basic diff type"""
-
-    implements(IDifference)
     __allow_access_to_unprotected_subobjects__ = 1
     meta_type = 'Base Diff'
 
diff --git a/Products/CMFDiffTool/CMFDiffTool.py b/Products/CMFDiffTool/CMFDiffTool.py
index a0ca81d..46eb218 100644
--- a/Products/CMFDiffTool/CMFDiffTool.py
+++ b/Products/CMFDiffTool/CMFDiffTool.py
@@ -15,9 +15,10 @@
 from Products.CMFPlone.utils import safe_hasattr
 from Products.PageTemplates.PageTemplateFile import PageTemplateFile
 from zExceptions import BadRequest
-from zope.interface import implements
+from zope.interface import implementer
 
 
+@implementer(IDiffTool)
 class CMFDiffTool(UniqueObject, SimpleItem):
     """ """
 
@@ -31,8 +32,6 @@ class CMFDiffTool(UniqueObject, SimpleItem):
                        ) + SimpleItem.manage_options
                       )
 
-    implements(IDiffTool)
-
     #  Internal attributes
     _difftypes = {}
 
diff --git a/Products/CMFDiffTool/ChangeSet.py b/Products/CMFDiffTool/ChangeSet.py
index d66c94e..eaf21c2 100644
--- a/Products/CMFDiffTool/ChangeSet.py
+++ b/Products/CMFDiffTool/ChangeSet.py
@@ -14,7 +14,7 @@
 from ComputedAttribute import ComputedAttribute
 from Products.CMFCore.utils import getToolByName
 from Products.CMFDiffTool.interfaces import IChangeSet
-from zope.interface import implements
+from zope.interface import implementer
 
 import logging
 
@@ -22,10 +22,9 @@
 logger = logging.getLogger('CMFDiffTool')
 
 
+@implementer(IChangeSet)
 class BaseChangeSet(Implicit):
     """A ChangeSet represents the set of differences between two objects"""
-
-    implements(IChangeSet)
     # This should really not be needed just for same, we should use a method
     __allow_access_to_unprotected_subobjects__ = 1
     security = ClassSecurityInfo()
diff --git a/Products/CMFDiffTool/exportimport/difftool.py b/Products/CMFDiffTool/exportimport/difftool.py
index ea24fa5..bd4281a 100644
--- a/Products/CMFDiffTool/exportimport/difftool.py
+++ b/Products/CMFDiffTool/exportimport/difftool.py
@@ -4,13 +4,13 @@
 from Products.GenericSetup.utils import exportObjects
 from Products.GenericSetup.utils import importObjects
 from Products.GenericSetup.utils import XMLAdapterBase
-from zope.interface import implements
+from zope.interface import implementer
 
 
+@implementer(IDiffTool)
 class DiffToolXMLAdapter(XMLAdapterBase):
     '''In- and exporter for DiffTool.
     '''
-    implements(IDiffTool)
 
     name = 'diff_tool'
 


Repository: Products.CMFDiffTool


Branch: refs/heads/master
Date: 2016-07-10T19:01:36+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFDiffTool/commit/3bd52a1ed83bea2a01b3a8d59fc6a74ca4fbb01c

Merge pull request #18 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.rst
M Products/CMFDiffTool/BaseDiff.py
M Products/CMFDiffTool/CMFDiffTool.py
M Products/CMFDiffTool/ChangeSet.py
M Products/CMFDiffTool/exportimport/difftool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 739d66b..c7deac7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 3.1.1 (2016-04-18)
diff --git a/Products/CMFDiffTool/BaseDiff.py b/Products/CMFDiffTool/BaseDiff.py
index 2dd5f09..5ce3f5c 100644
--- a/Products/CMFDiffTool/BaseDiff.py
+++ b/Products/CMFDiffTool/BaseDiff.py
@@ -11,15 +11,14 @@
 from Products.CMFDiffTool.interfaces import IDifference
 from Products.CMFPlone.utils import safe_hasattr
 from zope.i18n import translate
-from zope.interface import implements
+from zope.interface import implementer
 
 import Acquisition
 
 
+@implementer(IDifference)
 class BaseDiff:
     """Basic diff type"""
-
-    implements(IDifference)
     __allow_access_to_unprotected_subobjects__ = 1
     meta_type = 'Base Diff'
 
diff --git a/Products/CMFDiffTool/CMFDiffTool.py b/Products/CMFDiffTool/CMFDiffTool.py
index a0ca81d..46eb218 100644
--- a/Products/CMFDiffTool/CMFDiffTool.py
+++ b/Products/CMFDiffTool/CMFDiffTool.py
@@ -15,9 +15,10 @@
 from Products.CMFPlone.utils import safe_hasattr
 from Products.PageTemplates.PageTemplateFile import PageTemplateFile
 from zExceptions import BadRequest
-from zope.interface import implements
+from zope.interface import implementer
 
 
+@implementer(IDiffTool)
 class CMFDiffTool(UniqueObject, SimpleItem):
     """ """
 
@@ -31,8 +32,6 @@ class CMFDiffTool(UniqueObject, SimpleItem):
                        ) + SimpleItem.manage_options
                       )
 
-    implements(IDiffTool)
-
     #  Internal attributes
     _difftypes = {}
 
diff --git a/Products/CMFDiffTool/ChangeSet.py b/Products/CMFDiffTool/ChangeSet.py
index d66c94e..eaf21c2 100644
--- a/Products/CMFDiffTool/ChangeSet.py
+++ b/Products/CMFDiffTool/ChangeSet.py
@@ -14,7 +14,7 @@
 from ComputedAttribute import ComputedAttribute
 from Products.CMFCore.utils import getToolByName
 from Products.CMFDiffTool.interfaces import IChangeSet
-from zope.interface import implements
+from zope.interface import implementer
 
 import logging
 
@@ -22,10 +22,9 @@
 logger = logging.getLogger('CMFDiffTool')
 
 
+@implementer(IChangeSet)
 class BaseChangeSet(Implicit):
     """A ChangeSet represents the set of differences between two objects"""
-
-    implements(IChangeSet)
     # This should really not be needed just for same, we should use a method
     __allow_access_to_unprotected_subobjects__ = 1
     security = ClassSecurityInfo()
diff --git a/Products/CMFDiffTool/exportimport/difftool.py b/Products/CMFDiffTool/exportimport/difftool.py
index ea24fa5..bd4281a 100644
--- a/Products/CMFDiffTool/exportimport/difftool.py
+++ b/Products/CMFDiffTool/exportimport/difftool.py
@@ -4,13 +4,13 @@
 from Products.GenericSetup.utils import exportObjects
 from Products.GenericSetup.utils import importObjects
 from Products.GenericSetup.utils import XMLAdapterBase
-from zope.interface import implements
+from zope.interface import implementer
 
 
+@implementer(IDiffTool)
 class DiffToolXMLAdapter(XMLAdapterBase):
     '''In- and exporter for DiffTool.
     '''
-    implements(IDiffTool)
 
     name = 'diff_tool'
 


