Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-03-10T22:44:41+01:00
Author: Diederik Veeze (didrix) <d.veeze@zestsoftware.nl>
Commit: https://github.com/plone/plone.app.upgrade/commit/0cd02360ba3d21b42abc597bf482133a2a68797a

Add image scaling options to image handling controlpanel when migrating to 5.1b3.

Files changed:
A plone/app/upgrade/v51/profiles/to_beta3/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 803ff6d..6f9d70c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add image scaling options to image handling controlpanel
+  when migrating to 5.1b3.
+  [didrix]
 
 Bug fixes:
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 1dfc1c3..d6c018a 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -107,4 +107,19 @@ was moved from the plone bundle to plone-logged-in in CMPlone 5.1a2.
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5105"
+        destination="5106"
+        profile="Products.CMFPlone:plone">
+
+        <gs:upgradeDepends
+            title="Run to51beta3 upgrade profile."
+            description="
+Add image scaling options to image handling control panel.
+            "
+            import_profile="plone.app.upgrade.v51:to51beta3"
+            />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index d731936..2508ade 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -30,4 +30,15 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <!-- Note: to51beta2 does not exist, because no profile changes were needed. -->
+
+  <genericsetup:registerProfile
+      name="to51beta3"
+      title="Upgrade profile for Plone 5.1beta2 to Plone 5.1beta3"
+      description=""
+      directory="profiles/to_beta1"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles/to_beta3/registry.xml b/plone/app/upgrade/v51/profiles/to_beta3/registry.xml
new file mode 100644
index 0000000..84b8e07
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_beta3/registry.xml
@@ -0,0 +1,8 @@
+<?xml version="1.0"?>
+<registry>
+
+  <!-- Add image scaling options to image handling controlpanel. -->
+  <records interface="Products.CMFPlone.interfaces.IImagingSchema"
+           prefix="plone" />
+
+</registry>


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-03-21T22:15:57+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/9e280884e3875d7b6986d352988855818502cfaa

Merge pull request #76 from plone/plip-1483-retina-image-scales

Add image scaling options to image handling controlpanel

Files changed:
A plone/app/upgrade/v51/profiles/to_beta3/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 803ff6d..6f9d70c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add image scaling options to image handling controlpanel
+  when migrating to 5.1b3.
+  [didrix]
 
 Bug fixes:
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 1dfc1c3..d6c018a 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -107,4 +107,19 @@ was moved from the plone bundle to plone-logged-in in CMPlone 5.1a2.
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5105"
+        destination="5106"
+        profile="Products.CMFPlone:plone">
+
+        <gs:upgradeDepends
+            title="Run to51beta3 upgrade profile."
+            description="
+Add image scaling options to image handling control panel.
+            "
+            import_profile="plone.app.upgrade.v51:to51beta3"
+            />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index d731936..2508ade 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -30,4 +30,15 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <!-- Note: to51beta2 does not exist, because no profile changes were needed. -->
+
+  <genericsetup:registerProfile
+      name="to51beta3"
+      title="Upgrade profile for Plone 5.1beta2 to Plone 5.1beta3"
+      description=""
+      directory="profiles/to_beta1"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles/to_beta3/registry.xml b/plone/app/upgrade/v51/profiles/to_beta3/registry.xml
new file mode 100644
index 0000000..84b8e07
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_beta3/registry.xml
@@ -0,0 +1,8 @@
+<?xml version="1.0"?>
+<registry>
+
+  <!-- Add image scaling options to image handling controlpanel. -->
+  <records interface="Products.CMFPlone.interfaces.IImagingSchema"
+           prefix="plone" />
+
+</registry>


