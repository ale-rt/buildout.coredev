Repository: Products.CMFPlone


Branch: refs/heads/4.3.x
Date: 2016-06-16T15:36:13+02:00
Author: Luca Fabbri (keul) <luca@keul.it>
Commit: https://github.com/plone/Products.CMFPlone/commit/e8d3da7a1afa57b181f54b5910e61d5aa957db28

jquery.highlightsearchterms.js was skipping words that simply *contains* reserved filterTerms terms

Files changed:
M Products/CMFPlone/skins/plone_ecmascript/jquery.highlightsearchterms.js
M docs/CHANGES.rst

diff --git a/Products/CMFPlone/skins/plone_ecmascript/jquery.highlightsearchterms.js b/Products/CMFPlone/skins/plone_ecmascript/jquery.highlightsearchterms.js
index e0ba2c3..2b671e1 100644
--- a/Products/CMFPlone/skins/plone_ecmascript/jquery.highlightsearchterms.js
+++ b/Products/CMFPlone/skins/plone_ecmascript/jquery.highlightsearchterms.js
@@ -198,7 +198,7 @@
         // Are terms matched case insensitive?
         caseInsensitive: true,
         // what terms are never to be highlighted (regexp)?
-        filterTerms: /(not|and|or)/i,
+        filterTerms: /\b(not|and|or)\b/i,
         // What class is used to mark highlighted search terms?
         highlightClass: 'highlightedSearchTerm'
     };
diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 2368b34..a496f45 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -14,6 +14,9 @@ Changelog
 
 Fixes:
 
+- jquery.highlightsearchterms.js was skipping words that simply *contains* reserved ``filterTerms`` terms.
+  [keul]
+
 - Render an empty ``<dd>`` tag on ``folder_listing`` template when no description is available to avoid validation issues.
   [hvelarde]
 


