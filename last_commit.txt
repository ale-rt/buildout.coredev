Repository: plone.protect


Branch: refs/heads/master
Date: 2017-08-08T00:03:26+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.protect/commit/5317a3ca00263c9bdfaa808addda71c4fb1a9cd8

Log the actual forbidden URL

Files changed:
M plone/protect/views.py

diff --git a/plone/protect/views.py b/plone/protect/views.py
index 6a3dc87..7d5ce9f 100644
--- a/plone/protect/views.py
+++ b/plone/protect/views.py
@@ -13,5 +13,5 @@ def __call__(self):
         urltool = getToolByName(self.context, 'portal_url')
         original_url = getattr(self.request, 'original_url', '')
         if not original_url or not urltool.isURLInPortal(original_url):
-            raise Forbidden('url not in portal')
+            raise Forbidden('url not in portal: {0}'.format(original_url))
         return self.index()


Repository: plone.protect


Branch: refs/heads/master
Date: 2017-08-08T00:04:51+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.protect/commit/81b8298e9b7b4a32291320f17a23883674860f7e

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 121b54e..a2f60ea 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Log forbidden URLs.
+  Fixes https://github.com/plone/plone.protect/issues/66
+  [gforcada]
 
 Bug fixes:
 


Repository: plone.protect


Branch: refs/heads/master
Date: 2017-08-08T13:48:02+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.protect/commit/56c29ebf2ae2fbe2f1db073d6cf227efd104db34

Merge pull request #67 from plone/gforcada-patch-2

Log the actual forbidden URL

Files changed:
M CHANGES.rst
M plone/protect/views.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 121b54e..a2f60ea 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Log forbidden URLs.
+  Fixes https://github.com/plone/plone.protect/issues/66
+  [gforcada]
 
 Bug fixes:
 
diff --git a/plone/protect/views.py b/plone/protect/views.py
index 6a3dc87..7d5ce9f 100644
--- a/plone/protect/views.py
+++ b/plone/protect/views.py
@@ -13,5 +13,5 @@ def __call__(self):
         urltool = getToolByName(self.context, 'portal_url')
         original_url = getattr(self.request, 'original_url', '')
         if not original_url or not urltool.isURLInPortal(original_url):
-            raise Forbidden('url not in portal')
+            raise Forbidden('url not in portal: {0}'.format(original_url))
         return self.index()


