Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2017-08-02T21:35:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/c0b45b47df4d3be7d3863a918bca16d73840e5e2

Fixed accidentally removing permissions when saving portal_controlpanel in ZMI.

Fixes https://github.com/plone/Products.CMFPlone/issues/1376.

Files changed:
M CHANGES.rst
M Products/CMFPlone/PloneControlPanel.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 29829e155..cb02ca92b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,7 +26,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fixed accidentally removing permissions when saving the ``portal_controlpanel`` settings in the ZMI.
+  Fixes `issue 1376 <https://github.com/plone/Products.CMFPlone/issues/1376>`_.  [maurits]
 
 
 5.0.8 (2017-06-04)
diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py
index 73ccf97dd..15be1a071 100644
--- a/Products/CMFPlone/PloneControlPanel.py
+++ b/Products/CMFPlone/PloneControlPanel.py
@@ -194,7 +194,7 @@ def _extractAction(self, properties, index):
             except ValueError:
                 visible = 0
 
-        if not isinstance(permissions, basestring):
+        if isinstance(permissions, basestring):
             permissions = (permissions, )
 
         return PloneConfiglet(id=id,


Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2017-08-02T21:36:50+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/954c3f3accedf2e8f5ab7162b30fd95ea70ac4b9

Merge pull request #2115 from plone/issue-1376-controlpanel-permissions-50

Fixed removing permissions when saving portal_controlpanel in ZMI. [5.0]

Files changed:
M CHANGES.rst
M Products/CMFPlone/PloneControlPanel.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 29829e155..cb02ca92b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,7 +26,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fixed accidentally removing permissions when saving the ``portal_controlpanel`` settings in the ZMI.
+  Fixes `issue 1376 <https://github.com/plone/Products.CMFPlone/issues/1376>`_.  [maurits]
 
 
 5.0.8 (2017-06-04)
diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py
index 73ccf97dd..15be1a071 100644
--- a/Products/CMFPlone/PloneControlPanel.py
+++ b/Products/CMFPlone/PloneControlPanel.py
@@ -194,7 +194,7 @@ def _extractAction(self, properties, index):
             except ValueError:
                 visible = 0
 
-        if not isinstance(permissions, basestring):
+        if isinstance(permissions, basestring):
             permissions = (permissions, )
 
         return PloneConfiglet(id=id,


