Repository: plone.api


Branch: refs/heads/master
Date: 2017-02-22T17:23:33+01:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/plone.api/commit/f73bddc570c05f7a1a4cea01c75b1cea6538676e

fix #99 for Archetypes content

suggested by pgrunewald

Files changed:
M src/plone/api/content.py

diff --git a/src/plone/api/content.py b/src/plone/api/content.py
index d7c1047..65cbe68 100644
--- a/src/plone/api/content.py
+++ b/src/plone/api/content.py
@@ -106,7 +106,7 @@ def create(
     if IBaseObject.providedBy(content):
         # Will finish Archetypes content item creation process,
         # rename-after-creation and such
-        content.processForm()
+        content.processForm(values=kwargs)
 
     if not id or (safe_id and id):
         # Create a new id from title


Repository: plone.api


Branch: refs/heads/master
Date: 2017-02-22T17:24:25+01:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/plone.api/commit/9202c49a89034e8f082ec8c1e9429b7db9fd917f

update changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 2c70942..f5be929 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,6 +26,10 @@ Bug fixes:
   user.get_roles or group.get_roles. Fixes #354
   [pbauer]
 
+- Fix title wrongly set by ``api.content.create`` when called from GS setup
+  handler https://github.com/plone/plone.api/issues/99
+  [gotcha, pgrunewald]
+
 1.6 (2017-02-15)
 ----------------
 


Repository: plone.api


Branch: refs/heads/master
Date: 2017-02-23T09:12:06+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/0278775ff07f14b19d8cf09dd8b94b0670d7e17a

Merge pull request #319 from gotcha/master

fix #99 for Archetypes content

Files changed:
M CHANGES.rst
M src/plone/api/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2c70942..f5be929 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,6 +26,10 @@ Bug fixes:
   user.get_roles or group.get_roles. Fixes #354
   [pbauer]
 
+- Fix title wrongly set by ``api.content.create`` when called from GS setup
+  handler https://github.com/plone/plone.api/issues/99
+  [gotcha, pgrunewald]
+
 1.6 (2017-02-15)
 ----------------
 
diff --git a/src/plone/api/content.py b/src/plone/api/content.py
index d7c1047..65cbe68 100644
--- a/src/plone/api/content.py
+++ b/src/plone/api/content.py
@@ -106,7 +106,7 @@ def create(
     if IBaseObject.providedBy(content):
         # Will finish Archetypes content item creation process,
         # rename-after-creation and such
-        content.processForm()
+        content.processForm(values=kwargs)
 
     if not id or (safe_id and id):
         # Create a new id from title


