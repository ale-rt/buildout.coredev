Repository: plone.locking


Branch: refs/heads/master
Date: 2016-07-05T23:16:52+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.locking/commit/2304ea29e44849d1ea5337e3634dd7a4053c5c12

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.rst
M plone/locking/browser/info.py
M plone/locking/interfaces.py
M plone/locking/lockable.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 50f72f2..9ed77ec 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.1.1 (2015-10-27)
diff --git a/plone/locking/browser/info.py b/plone/locking/browser/info.py
index f9afcb8..89d6504 100644
--- a/plone/locking/browser/info.py
+++ b/plone/locking/browser/info.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import getMultiAdapter
 
 from zope.viewlet.interfaces import IViewlet
@@ -7,13 +7,13 @@
 from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
 
 
+@implementer(IViewlet)
 class LockInfoViewlet(BrowserView):
     """This is a viewlet which is not hooked up anywhere. It is referenced
     from plone.app.layout. We do it this way to avoid having the  lower-level
     plone.locking depend on these packages, whilst still providing
     an implementation of the info box in a single place.
     """
-    implements(IViewlet)
 
     template = ViewPageTemplateFile('info.pt')
 
diff --git a/plone/locking/interfaces.py b/plone/locking/interfaces.py
index c7d5e54..b47a10a 100644
--- a/plone/locking/interfaces.py
+++ b/plone/locking/interfaces.py
@@ -1,4 +1,4 @@
-from zope.interface import implements, Interface, Attribute
+from zope.interface import implementer, Interface, Attribute
 from zope.annotation.interfaces import IAttributeAnnotatable
 
 from zope import schema
@@ -25,8 +25,8 @@ class ILockType(Interface):
                          description=u"Locking timeout in minutes")
 
 
+@implementer(ILockType)
 class LockType(object):
-    implements(ILockType)
 
     def __init__(self, name, stealable, user_unlockable, timeout=DEFAULT_TIMEOUT):
         self.__name__ = name
diff --git a/plone/locking/lockable.py b/plone/locking/lockable.py
index 21edc5e..dfb5749 100644
--- a/plone/locking/lockable.py
+++ b/plone/locking/lockable.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import adapts, queryAdapter
 
 from persistent.dict import PersistentDict
@@ -28,11 +28,10 @@ def safeWrite(*args):
 ANNOTATION_KEY = 'plone.locking'
 
 
+@implementer(IRefreshableLockable)
 class TTWLockable(object):
     """An object that is being locked through-the-web
     """
-
-    implements(IRefreshableLockable)
     adapts(ITTWLockable)
 
     def __init__(self, context):


Repository: plone.locking


Branch: refs/heads/master
Date: 2016-07-07T00:57:46+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.locking/commit/150b256764bcc33bbd05dc3a95a7c7be5eec3297

Merge pull request #11 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.rst
M plone/locking/browser/info.py
M plone/locking/interfaces.py
M plone/locking/lockable.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 50f72f2..9ed77ec 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.1.1 (2015-10-27)
diff --git a/plone/locking/browser/info.py b/plone/locking/browser/info.py
index f9afcb8..89d6504 100644
--- a/plone/locking/browser/info.py
+++ b/plone/locking/browser/info.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import getMultiAdapter
 
 from zope.viewlet.interfaces import IViewlet
@@ -7,13 +7,13 @@
 from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
 
 
+@implementer(IViewlet)
 class LockInfoViewlet(BrowserView):
     """This is a viewlet which is not hooked up anywhere. It is referenced
     from plone.app.layout. We do it this way to avoid having the  lower-level
     plone.locking depend on these packages, whilst still providing
     an implementation of the info box in a single place.
     """
-    implements(IViewlet)
 
     template = ViewPageTemplateFile('info.pt')
 
diff --git a/plone/locking/interfaces.py b/plone/locking/interfaces.py
index c7d5e54..b47a10a 100644
--- a/plone/locking/interfaces.py
+++ b/plone/locking/interfaces.py
@@ -1,4 +1,4 @@
-from zope.interface import implements, Interface, Attribute
+from zope.interface import implementer, Interface, Attribute
 from zope.annotation.interfaces import IAttributeAnnotatable
 
 from zope import schema
@@ -25,8 +25,8 @@ class ILockType(Interface):
                          description=u"Locking timeout in minutes")
 
 
+@implementer(ILockType)
 class LockType(object):
-    implements(ILockType)
 
     def __init__(self, name, stealable, user_unlockable, timeout=DEFAULT_TIMEOUT):
         self.__name__ = name
diff --git a/plone/locking/lockable.py b/plone/locking/lockable.py
index 21edc5e..dfb5749 100644
--- a/plone/locking/lockable.py
+++ b/plone/locking/lockable.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import adapts, queryAdapter
 
 from persistent.dict import PersistentDict
@@ -28,11 +28,10 @@ def safeWrite(*args):
 ANNOTATION_KEY = 'plone.locking'
 
 
+@implementer(IRefreshableLockable)
 class TTWLockable(object):
     """An object that is being locked through-the-web
     """
-
-    implements(IRefreshableLockable)
     adapts(ITTWLockable)
 
     def __init__(self, context):


