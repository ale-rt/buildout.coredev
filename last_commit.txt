Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-03-31T17:28:52+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.upgrade/commit/31a6e2f9bc1a548107061c329f3f2530d80dfed7

Fix profile names

Files changed:
M plone/app/upgrade/v51/alphas.py
M plone/app/upgrade/v51/profiles.zcml

diff --git a/plone/app/upgrade/v51/alphas.py b/plone/app/upgrade/v51/alphas.py
index 4b56f0e..719762e 100644
--- a/plone/app/upgrade/v51/alphas.py
+++ b/plone/app/upgrade/v51/alphas.py
@@ -29,6 +29,6 @@ def _fix_typo_in_toolbar_less_variable(context):
 
 
 def to51alpha1(context):
-    """5.0.2 -> 5.0.3"""
+    """5.0.4 -> 5.1a1"""
     loadMigrationProfile(context, 'profile-plone.app.upgrade.v51:to51alpha1')
     _fix_typo_in_toolbar_less_variable(context)
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index 7aaa51c..415aaf6 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -5,7 +5,7 @@
 
   <genericsetup:registerProfile
       name="to51alpha1"
-      title="Upgrade profile for Plone 5.0.3 to Plone 5.1alpha1"
+      title="Upgrade profile for Plone 5.0.4 to Plone 5.1alpha1"
       description=""
       directory="profiles/to_alpha1"
       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-03-31T17:29:39+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.upgrade/commit/a2adc360a8a120090e448719abf943c0e994c3d1

Add actions controlpanel when migrating to 5.1a1

Files changed:
A plone/app/upgrade/v51/profiles/to_alpha1/controlpanel.xml
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index a24d47e..62434e2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ Incompatibilities:
 
 New:
 
-- *add item here*
+- Add actions controlpanel when migrating to 5.1a1.
+  [esteele]
+
 
 Fixes:
 
diff --git a/plone/app/upgrade/v51/profiles/to_alpha1/controlpanel.xml b/plone/app/upgrade/v51/profiles/to_alpha1/controlpanel.xml
new file mode 100644
index 0000000..f971227
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_alpha1/controlpanel.xml
@@ -0,0 +1,10 @@
+<?xml version="1.0"?>
+<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"
+  i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">
+ <configlet title="Actions" action_id="ActionSettings" appId="Plone"
+    category="plone-general" condition_expr=""
+    url_expr="string:${portal_url}/@@actions-controlpanel" visible="True"
+    i18n:attributes="title">
+  <permission>Manage portal</permission>
+ </configlet>
+</object>


