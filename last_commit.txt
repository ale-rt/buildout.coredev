Repository: plone.tiles


Branch: refs/heads/master
Date: 2017-03-20T10:44:57-03:00
Author: hvelarde (hvelarde) <hector.velarde@gmail.com>
Commit: https://github.com/plone/plone.tiles/commit/23a47499937de98bdcce01e6ff16e3c955e636e5

Do not swallow AttributeError inside index() on template rendering

Files changed:
M CHANGES.rst
M plone/tiles/esi.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 408ed6c..7cf915c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,9 +4,15 @@ Changelog
 2.0.0b2 (unreleased)
 --------------------
 
+Bug fixes:
+
+- Do not swallow ``AttributeError`` inside ``index()`` on template rendering.
+  [hvelarde]
+
 - Fix code analysis errors.
   [gforcada]
 
+
 2.0.0b1 (2017-02-24)
 --------------------
 
diff --git a/plone/tiles/esi.py b/plone/tiles/esi.py
index d57d995..291757d 100644
--- a/plone/tiles/esi.py
+++ b/plone/tiles/esi.py
@@ -76,10 +76,12 @@ def __call__(self, *args, **kwargs):
                 queryString=self.request.get('QUERY_STRING', ''),
                 esiMode=mode
             )
+        # Do not hide AttributeError inside index()
         try:
-            return self.index(*args, **kwargs)
+            self.index
         except AttributeError:
             return self.render()
+        return self.index(*args, **kwargs)
 
 
 # Convenience base classes


Repository: plone.tiles


Branch: refs/heads/master
Date: 2017-03-20T19:20:41+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.tiles/commit/5f13cc63efc3c0ee429ff103685b19161333afd7

Merge pull request #23 from plone/hvelarde-attribute-2.0

Do not swallow AttributeError inside index() on template rendering

Files changed:
M CHANGES.rst
M plone/tiles/esi.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 408ed6c..7cf915c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,9 +4,15 @@ Changelog
 2.0.0b2 (unreleased)
 --------------------
 
+Bug fixes:
+
+- Do not swallow ``AttributeError`` inside ``index()`` on template rendering.
+  [hvelarde]
+
 - Fix code analysis errors.
   [gforcada]
 
+
 2.0.0b1 (2017-02-24)
 --------------------
 
diff --git a/plone/tiles/esi.py b/plone/tiles/esi.py
index d57d995..291757d 100644
--- a/plone/tiles/esi.py
+++ b/plone/tiles/esi.py
@@ -76,10 +76,12 @@ def __call__(self, *args, **kwargs):
                 queryString=self.request.get('QUERY_STRING', ''),
                 esiMode=mode
             )
+        # Do not hide AttributeError inside index()
         try:
-            return self.index(*args, **kwargs)
+            self.index
         except AttributeError:
             return self.render()
+        return self.index(*args, **kwargs)
 
 
 # Convenience base classes


