Repository: Products.PasswordResetTool


Branch: refs/heads/master
Date: 2016-07-05T23:19:54+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.PasswordResetTool/commit/6354ef656e2a65f7da9dc2df4e11c216c3820ee5

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.txt
M Products/PasswordResetTool/PasswordResetTool.py
M Products/PasswordResetTool/browser.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 4436534..741f3df 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.2.2 (2016-06-27)
diff --git a/Products/PasswordResetTool/PasswordResetTool.py b/Products/PasswordResetTool/PasswordResetTool.py
index 20d95aa..5479671 100644
--- a/Products/PasswordResetTool/PasswordResetTool.py
+++ b/Products/PasswordResetTool/PasswordResetTool.py
@@ -36,7 +36,7 @@
 import socket
 from DateTime import DateTime
 from zope.component import getUtility
-from zope.interface import implements
+from zope.interface import implementer
 
 module_security = ModuleSecurityInfo('Products.PasswordResetTool.PasswordResetTool')
 
@@ -61,6 +61,7 @@ def __str__(self):
         return repr(self.value)
 
 
+@implementer(IPWResetTool)
 class PasswordResetTool (UniqueObject, SimpleItem):
     """Provides a default implementation for a password reset scheme.
 
@@ -71,15 +72,6 @@ class PasswordResetTool (UniqueObject, SimpleItem):
 
     The user visits that URL (the 'reset form') and enters their username,
     """
-    ## other things needed for this to work
-    # skins:
-    #  - handler script for forgotten password form (probably over-riding
-    #    existing Plone one)
-    #  - email template
-    #  - password reset form
-    #  - password reset form handler script
-
-    implements(IPWResetTool)
 
     id = 'portal_password_reset'
     meta_type = 'Password Reset Tool'
diff --git a/Products/PasswordResetTool/browser.py b/Products/PasswordResetTool/browser.py
index 910c1aa..3e54e8e 100644
--- a/Products/PasswordResetTool/browser.py
+++ b/Products/PasswordResetTool/browser.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import getMultiAdapter
 from Products.Five import BrowserView
 from plone.memoize import view
@@ -19,8 +19,8 @@
     HAS_REGISTRY_MAIL_SETTINGS = False
 
 
+@implementer(IPasswordResetToolView)
 class PasswordResetToolView(BrowserView):
-    implements(IPasswordResetToolView)
 
     @view.memoize_contextless
     def portal_state(self):


Repository: Products.PasswordResetTool


Branch: refs/heads/master
Date: 2016-07-10T19:02:09+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.PasswordResetTool/commit/4d4789c9588ce0f63e8984f578c5bfaee54d7f31

Merge pull request #13 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.txt
M Products/PasswordResetTool/PasswordResetTool.py
M Products/PasswordResetTool/browser.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 4436534..741f3df 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.2.2 (2016-06-27)
diff --git a/Products/PasswordResetTool/PasswordResetTool.py b/Products/PasswordResetTool/PasswordResetTool.py
index 20d95aa..5479671 100644
--- a/Products/PasswordResetTool/PasswordResetTool.py
+++ b/Products/PasswordResetTool/PasswordResetTool.py
@@ -36,7 +36,7 @@
 import socket
 from DateTime import DateTime
 from zope.component import getUtility
-from zope.interface import implements
+from zope.interface import implementer
 
 module_security = ModuleSecurityInfo('Products.PasswordResetTool.PasswordResetTool')
 
@@ -61,6 +61,7 @@ def __str__(self):
         return repr(self.value)
 
 
+@implementer(IPWResetTool)
 class PasswordResetTool (UniqueObject, SimpleItem):
     """Provides a default implementation for a password reset scheme.
 
@@ -71,15 +72,6 @@ class PasswordResetTool (UniqueObject, SimpleItem):
 
     The user visits that URL (the 'reset form') and enters their username,
     """
-    ## other things needed for this to work
-    # skins:
-    #  - handler script for forgotten password form (probably over-riding
-    #    existing Plone one)
-    #  - email template
-    #  - password reset form
-    #  - password reset form handler script
-
-    implements(IPWResetTool)
 
     id = 'portal_password_reset'
     meta_type = 'Password Reset Tool'
diff --git a/Products/PasswordResetTool/browser.py b/Products/PasswordResetTool/browser.py
index 910c1aa..3e54e8e 100644
--- a/Products/PasswordResetTool/browser.py
+++ b/Products/PasswordResetTool/browser.py
@@ -1,4 +1,4 @@
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import getMultiAdapter
 from Products.Five import BrowserView
 from plone.memoize import view
@@ -19,8 +19,8 @@
     HAS_REGISTRY_MAIL_SETTINGS = False
 
 
+@implementer(IPasswordResetToolView)
 class PasswordResetToolView(BrowserView):
-    implements(IPasswordResetToolView)
 
     @view.memoize_contextless
     def portal_state(self):


