Repository: plone.app.collection


Branch: refs/heads/1.0.x
Date: 2016-08-30T18:35:33+03:00
Author: ichim-david (ichim-david) <ichim.david@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/dda7755501d2de8f989493bb69b9e8355afda9f8

Cherry-pick isPrincipiaFolderish check from master branch

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 76cae26..12bd4cf 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,8 +1,64 @@
 Changelog
 =========
 
-1.0.15 (unreleased)
--------------------
+1.2.2 (unreleased)
+------------------
+
+Breaking changes:
+
+- *add item here*
+
+New features:
+
+- *add item here*
+
+Bug fixes:
+
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
+
+
+1.2.1 (2016-08-15)
+------------------
+
+Bug fixes:
+
+- Use zope.interface decorator.
+  [gforcada]
+
+
+1.2.0 (2016-05-18)
+------------------
+
+New:
+
+- Added uninstall profile.  The Collection type is removed when you
+  uninstall this package.  [maurits]
+
+
+1.1.6 (2016-02-27)
+------------------
+
+Fixes:
+
+- Fix test isolation problems.
+  [gforcada]
+
+
+1.1.5 (2016-02-11)
+------------------
+
+Fixes:
+
+- Remove existing type information object (FTI) from portal_types when
+  installing.  This might be a dexterity FTI, which would give an
+  error when installing: ValueError: undefined property
+  ``content_meta_type``.  [maurits]
+
+- Pull typesUseViewActionInListings value from portal_registry.
+  [esteele]
+>>>>>>> f9c2019... - Check with getattr if item isPrincipiaFolderish as Comment does
 
 - Nothing changed yet.
 
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 404b5b4..de8e379 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -188,7 +188,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


Repository: plone.app.collection


Branch: refs/heads/1.0.x
Date: 2016-08-30T22:22:27+03:00
Author: David Ichim (ichim-david) <ichim.david@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/6027d2149dfd6d9dc15c9bb664e3db1a422c9c49

Cleanup CHanges.rst of history entry added by cherry-picking from previous commit

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 12bd4cf..207d527 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,8 +1,8 @@
 Changelog
 =========
 
-1.2.2 (unreleased)
-------------------
+1.0.15 (unreleased)
+-------------------
 
 Breaking changes:
 
@@ -19,50 +19,6 @@ Bug fixes:
   [ichim-david]
 
 
-1.2.1 (2016-08-15)
-------------------
-
-Bug fixes:
-
-- Use zope.interface decorator.
-  [gforcada]
-
-
-1.2.0 (2016-05-18)
-------------------
-
-New:
-
-- Added uninstall profile.  The Collection type is removed when you
-  uninstall this package.  [maurits]
-
-
-1.1.6 (2016-02-27)
-------------------
-
-Fixes:
-
-- Fix test isolation problems.
-  [gforcada]
-
-
-1.1.5 (2016-02-11)
-------------------
-
-Fixes:
-
-- Remove existing type information object (FTI) from portal_types when
-  installing.  This might be a dexterity FTI, which would give an
-  error when installing: ValueError: undefined property
-  ``content_meta_type``.  [maurits]
-
-- Pull typesUseViewActionInListings value from portal_registry.
-  [esteele]
->>>>>>> f9c2019... - Check with getattr if item isPrincipiaFolderish as Comment does
-
-- Nothing changed yet.
-
-
 1.0.14 (2015-09-23)
 -------------------
 


Repository: plone.app.collection


Branch: refs/heads/1.0.x
Date: 2016-08-30T22:44:37+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/f4e0e691292bfe30888a93bf9d4d2fa95c07b0cf

Merge pull request #38 from ichim-david/1.0.x

Check with getattr if item isPrincipiaFolderish

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 76cae26..207d527 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,19 @@ Changelog
 1.0.15 (unreleased)
 -------------------
 
-- Nothing changed yet.
+Breaking changes:
+
+- *add item here*
+
+New features:
+
+- *add item here*
+
+Bug fixes:
+
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
 
 
 1.0.14 (2015-09-23)
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 404b5b4..de8e379 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -188,7 +188,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


