Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-04-11T16:21:55+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/21ff333230e3addecaf6f3073c373daeb88147a6

Add Plone 5.1 beta 4 upgrade profile.

Files changed:
A plone/app/upgrade/v51/profiles/to_beta4/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 332dd59..3460c0c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add Plone 5.1 beta 4 upgrade profile.
+  [thet]
 
 Bug fixes:
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 52f420c..c6c7e9a 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -138,6 +138,14 @@ Add image scaling options to image handling control panel.
             handler="..v50.final.fix_double_smaxage"
             />
 
+        <gs:upgradeDepends
+            title="Run to51beta4 upgrade profile."
+            description="
+Update plone-logged-in bundle.
+            "
+            import_profile="plone.app.upgrade.v51:to51beta4"
+            />
+
     </gs:upgradeSteps>
 
 </configure>
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index 24d8510..2c758e6 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -41,4 +41,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to51beta4"
+      title="Upgrade profile for Plone 5.1beta3 to Plone 5.1beta4"
+      description=""
+      directory="profiles/to_beta4"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
new file mode 100644
index 0000000..8db3d7e
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
@@ -0,0 +1,10 @@
+<?xml version="1.0"?>
+<registry>
+
+  <!-- Update ``last_compilation`` to deliver new bundles -->
+  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2017-04-11 16:10:00</value>
+  </records>
+
+</registry>
+


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-04-12T13:11:31+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/c47b9424a914a3bece67e3c6a750d65e7cadfdca

Merge pull request #114 from plone/thet-51beta4

Add Plone 5.1 beta 4 upgrade profile.

Files changed:
A plone/app/upgrade/v51/profiles/to_beta4/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 332dd59..3460c0c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add Plone 5.1 beta 4 upgrade profile.
+  [thet]
 
 Bug fixes:
 
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 52f420c..c6c7e9a 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -138,6 +138,14 @@ Add image scaling options to image handling control panel.
             handler="..v50.final.fix_double_smaxage"
             />
 
+        <gs:upgradeDepends
+            title="Run to51beta4 upgrade profile."
+            description="
+Update plone-logged-in bundle.
+            "
+            import_profile="plone.app.upgrade.v51:to51beta4"
+            />
+
     </gs:upgradeSteps>
 
 </configure>
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index 24d8510..2c758e6 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -41,4 +41,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to51beta4"
+      title="Upgrade profile for Plone 5.1beta3 to Plone 5.1beta4"
+      description=""
+      directory="profiles/to_beta4"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles/to_beta4/registry.xml b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
new file mode 100644
index 0000000..8db3d7e
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_beta4/registry.xml
@@ -0,0 +1,10 @@
+<?xml version="1.0"?>
+<registry>
+
+  <!-- Update ``last_compilation`` to deliver new bundles -->
+  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2017-04-11 16:10:00</value>
+  </records>
+
+</registry>
+


