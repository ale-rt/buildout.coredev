Repository: borg.localrole


Branch: refs/heads/master
Date: 2016-07-05T23:10:48+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/borg.localrole/commit/5a9fc099abfb3da500843629e2f88880b8fd62fa

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.txt
M borg/localrole/default_adapter.py
M borg/localrole/factory_adapter.py
M borg/localrole/tests.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 039a6f1..7ae1e7c 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 3.1.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use zope.interface decorator.
+  [gforcada]
 
 
 3.1.1 (2014-10-23)
@@ -89,4 +90,3 @@ Changelog
 ------------------
 
 - Baseline for Plone 3.1
-
diff --git a/borg/localrole/default_adapter.py b/borg/localrole/default_adapter.py
index dad7321..de6e232 100644
--- a/borg/localrole/default_adapter.py
+++ b/borg/localrole/default_adapter.py
@@ -1,8 +1,9 @@
-from zope.interface import Interface, implements
+from zope.interface import Interface, implementer
 from zope.component import adapts
 from borg.localrole.interfaces import ILocalRoleProvider
 
 
+@implementer(ILocalRoleProvider)
 class DefaultLocalRoleAdapter(object):
     """Looks at __ac_local_roles__ to find local roles stored
     persistently on an object::
@@ -50,7 +51,6 @@ class DefaultLocalRoleAdapter(object):
         (('dummy2', ['Role1']),)
 
     """
-    implements(ILocalRoleProvider)
     adapts(Interface)
 
     def __init__(self, context):
diff --git a/borg/localrole/factory_adapter.py b/borg/localrole/factory_adapter.py
index 67777fa..c74c1b8 100644
--- a/borg/localrole/factory_adapter.py
+++ b/borg/localrole/factory_adapter.py
@@ -1,11 +1,12 @@
 from zope.component import adapts
-from zope.interface import implements
+from zope.interface import implementer
 from borg.localrole.interfaces import IFactoryTempFolder
 from borg.localrole.interfaces import ILocalRoleProvider
 from Acquisition import aq_inner, aq_parent
 from Products.CMFCore.utils import getToolByName
 
 
+@implementer(ILocalRoleProvider)
 class FactoryTempFolderProvider(object):
     """A simple local role provider which just gathers the roles from
     the desired context::
@@ -92,7 +93,6 @@ class FactoryTempFolderProvider(object):
 
     """
     adapts(IFactoryTempFolder)
-    implements(ILocalRoleProvider)
 
     def __init__(self, obj):
         self.folder = obj
diff --git a/borg/localrole/tests.py b/borg/localrole/tests.py
index 51517c6..7ddaf5a 100644
--- a/borg/localrole/tests.py
+++ b/borg/localrole/tests.py
@@ -1,7 +1,7 @@
 import doctest
 import unittest
 
-from zope.interface import implements
+from zope.interface import implementer
 from plone.testing import layered
 from plone.app.testing.bbb import PTC_FUNCTIONAL_TESTING
 from Testing import ZopeTestCase as ztc
@@ -11,8 +11,8 @@
 from borg.localrole import default_adapter
 
 
+@implementer(borg.localrole.interfaces.ILocalRoleProvider)
 class SimpleLocalRoleProvider(object):
-    implements(borg.localrole.interfaces.ILocalRoleProvider)
 
     def __init__(self, context):
         self.context = context


Repository: borg.localrole


Branch: refs/heads/master
Date: 2016-07-09T08:51:52+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/borg.localrole/commit/22112ff9010799479ccc9c5747d6d6b404f17000

Merge pull request #4 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.txt
M borg/localrole/default_adapter.py
M borg/localrole/factory_adapter.py
M borg/localrole/tests.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 039a6f1..7ae1e7c 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 3.1.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use zope.interface decorator.
+  [gforcada]
 
 
 3.1.1 (2014-10-23)
@@ -89,4 +90,3 @@ Changelog
 ------------------
 
 - Baseline for Plone 3.1
-
diff --git a/borg/localrole/default_adapter.py b/borg/localrole/default_adapter.py
index dad7321..de6e232 100644
--- a/borg/localrole/default_adapter.py
+++ b/borg/localrole/default_adapter.py
@@ -1,8 +1,9 @@
-from zope.interface import Interface, implements
+from zope.interface import Interface, implementer
 from zope.component import adapts
 from borg.localrole.interfaces import ILocalRoleProvider
 
 
+@implementer(ILocalRoleProvider)
 class DefaultLocalRoleAdapter(object):
     """Looks at __ac_local_roles__ to find local roles stored
     persistently on an object::
@@ -50,7 +51,6 @@ class DefaultLocalRoleAdapter(object):
         (('dummy2', ['Role1']),)
 
     """
-    implements(ILocalRoleProvider)
     adapts(Interface)
 
     def __init__(self, context):
diff --git a/borg/localrole/factory_adapter.py b/borg/localrole/factory_adapter.py
index 67777fa..c74c1b8 100644
--- a/borg/localrole/factory_adapter.py
+++ b/borg/localrole/factory_adapter.py
@@ -1,11 +1,12 @@
 from zope.component import adapts
-from zope.interface import implements
+from zope.interface import implementer
 from borg.localrole.interfaces import IFactoryTempFolder
 from borg.localrole.interfaces import ILocalRoleProvider
 from Acquisition import aq_inner, aq_parent
 from Products.CMFCore.utils import getToolByName
 
 
+@implementer(ILocalRoleProvider)
 class FactoryTempFolderProvider(object):
     """A simple local role provider which just gathers the roles from
     the desired context::
@@ -92,7 +93,6 @@ class FactoryTempFolderProvider(object):
 
     """
     adapts(IFactoryTempFolder)
-    implements(ILocalRoleProvider)
 
     def __init__(self, obj):
         self.folder = obj
diff --git a/borg/localrole/tests.py b/borg/localrole/tests.py
index 51517c6..7ddaf5a 100644
--- a/borg/localrole/tests.py
+++ b/borg/localrole/tests.py
@@ -1,7 +1,7 @@
 import doctest
 import unittest
 
-from zope.interface import implements
+from zope.interface import implementer
 from plone.testing import layered
 from plone.app.testing.bbb import PTC_FUNCTIONAL_TESTING
 from Testing import ZopeTestCase as ztc
@@ -11,8 +11,8 @@
 from borg.localrole import default_adapter
 
 
+@implementer(borg.localrole.interfaces.ILocalRoleProvider)
 class SimpleLocalRoleProvider(object):
-    implements(borg.localrole.interfaces.ILocalRoleProvider)
 
     def __init__(self, context):
         self.context = context


