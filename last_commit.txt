Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-11-04T13:40:09+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.widgets/commit/037d45e6ee86dcc8f2d68b429f55447d450b862f

No longer test on Travis.

We are tested on jenkins.plone.org, and the Travis setup on master is pretty broken.

The master branch has been failing for a long time with this error:

An error occurred while generating the build script.

https://lint.travis-ci.org was complaining about the addons section.
This can be tricky to get right, because the linter errors are not entirely obvious:
- value for addons section is empty, dropping
- in addons section: dropping sauce_connect section: unexpected sequence

In our case, we had dashes in front of the options, and that broke it.

But after fixing that, it was still very broken, missing distributions.

Files changed:
M CHANGES.rst
M Makefile
D .travis.yml
D travis.cfg

diff --git a/.travis.yml b/.travis.yml
deleted file mode 100644
index c369b6d..0000000
--- a/.travis.yml
+++ /dev/null
@@ -1,49 +0,0 @@
-language: python
-python:
-  - 2.7
-addons:
-  sauce_connect:
-    - username: $SAUCE_USERNAME
-    - access_key: $SAUCE_ACCESS_KEY
-install:
-  - mkdir -p buildout-cache/downloads
-  - python bootstrap.py -c travis.cfg
-  - bin/buildout -N -t 3 -c travis.cfg
-script:
-  - if [ "$BROWSER" != "code-analysis" ]; then export ROBOT_DESIRED_CAPABILITIES="$BROWSER,tunnel-identifier:$TRAVIS_JOB_NUMBER"; fi
-  - if [ "$BROWSER" != "code-analysis" ]; then bin/test -vvv --all; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/flake8 setup.py; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/flake8 plone; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/coverage run --source=plone.app.widgets --omit=plone/app/widgets/at_bbb.py,plone/app/widgets/dx_bbb.py,plone/app/widgets/dx_pac_bbb.py,plone/app/widgets/test\* bin/test --layer=\!PloneAppWidgetsLayer; fi
-after_success:
-  - bin/coveralls
-env:
-  matrix:
-    - BROWSER="code-analysis"
-    - BROWSER="platform:OS X 10.8,browserName:iphone,version:6.1,device-orientation:portrait"
-    - BROWSER="platform:OS X 10.8,browserName:ipad,version:6.1,device-orientation:portrait"
-    - BROWSER="platform:Linux,browserName:android,version:4.0,device-type:tablet,device-orientation:portrait"
-    - BROWSER="platform:Windows 7,browserName:firefox,version:25"
-    - BROWSER="platform:Windows 7,browserName:chrome,version:31"
-    - BROWSER="platform:Windows 8.1,browserName:internet explorer,version:11"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:10"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:9"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:8"
-    - BROWSER="platform:Windows 7,browserName:opera,version:12"
-    - BROWSER="platform:OS X 10.8,browserName:safari,version:6"
-  global:
-    - secure: "X9AvF9DYKjG/E52ZKQGxxrMe/Z1FsuwJU9jk39NLia3aA3WyFKuE66BotqeZGi9Jk0V2IQWekMgZcAFIcRH6qbvMKcMtnhD+Wr8aiV7uby3wRjmPi2FznTiy+FvYwm8WiNBHw4Ek++nSCDkly0QGBUmJVvfe3zxNHSHSKx5E/yg="
-    - secure: "CvB/BK4EhZIiruAuiIFw/Bn80Wv/5jGiS2tOCaXd54v7lhld2VBxyCfccIcizKlSkIXzDausw24zEF0HV4E6k4z8AB12h1DH/6p31+epbrvDnQOZ1Br2grusOqMbjOutRkJ0w+upI+BTaeSI9bmYXZQdpkLA5mJCv0sBbqi4SPA="
-    - ROBOT_BUILD_NUMBER=plone.app.widgets-travis-$TRAVIS_BUILD_NUMBER
-    - ROBOT_REMOTE_URL=http://$SAUCE_USERNAME:$SAUCE_ACCESS_KEY@ondemand.saucelabs.com:80/wd/hub
-matrix:
-  allow_failures:
-    - env: BROWSER="platform:OS X 10.8,browserName:iphone,version:6.1,device-orientation:portrait"
-    - env: BROWSER="platform:OS X 10.8,browserName:ipad,version:6.1,device-orientation:portrait"
-    - env: BROWSER="platform:Linux,browserName:android,version:4.0,device-type:tablet,device-orientation:portrait"
-    - env: BROWSER="platform:Windows 8.1,browserName:internet explorer,version:11"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:10"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:9"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:8"
-    - env: BROWSER="platform:Windows 7,browserName:opera,version:12"
-    - env: BROWSER="platform:OS X 10.8,browserName:safari,version:6"
diff --git a/CHANGES.rst b/CHANGES.rst
index 36494ca..424d69c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- No longer test on Travis.  We are tested on jenkins.plone.org, and
+  the Travis setup on master is pretty broken.  [maurits]
+
 - Take more time during robot tests.
   I hope that this makes a sometimes failing test always pass.  [maurits]
 
diff --git a/Makefile b/Makefile
index 1153a4b..8f35575 100644
--- a/Makefile
+++ b/Makefile
@@ -3,9 +3,6 @@ NIX_PATH=~/.nix-defexpr/channels/
 all: bootstrap
 	bin/buildout -v
 
-travis: bootstrap
-	bin/buildout -c travis.cfg -v
-
 bootstrap:
 	NIX_PATH=${NIX_PATH} nix-build --out-link nixenv dev.nix
 	./nixenv/bin/virtualenv --distribute --clear .
diff --git a/travis.cfg b/travis.cfg
deleted file mode 100644
index 6b5edf2..0000000
--- a/travis.cfg
+++ /dev/null
@@ -1,24 +0,0 @@
-[buildout]
-extends =
-    https://raw.github.com/collective/buildout.plonetest/master/travis-4.3.x.cfg
-    versions.cfg
-allow-hosts +=
-    code.google.com
-    robotframework.googlecode.com
-package-name = plone.app.widgets
-package-extras = [test,archetypes,dexterity]
-test-eggs = Pillow
-parts += extra
-develop += plone.app.contenttypes
-
-[extra]
-recipe = zc.recipe.egg
-eggs =
-    flake8
-    createcoverage
-    coveralls
-
-[versions]
-coverage = 3.7
-plone.app.robotframework = 0.8.2
-plone.app.contenttypes =


Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-11-06T18:59:21+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.widgets/commit/2302e846cc0660c0e920b439baef5df0300ad40d

Merge pull request #151 from plone/fix-travis-setup

Fixed Travis Sauce Labs setup.

Files changed:
M CHANGES.rst
M Makefile
D .travis.yml
D travis.cfg

diff --git a/.travis.yml b/.travis.yml
deleted file mode 100644
index c369b6d..0000000
--- a/.travis.yml
+++ /dev/null
@@ -1,49 +0,0 @@
-language: python
-python:
-  - 2.7
-addons:
-  sauce_connect:
-    - username: $SAUCE_USERNAME
-    - access_key: $SAUCE_ACCESS_KEY
-install:
-  - mkdir -p buildout-cache/downloads
-  - python bootstrap.py -c travis.cfg
-  - bin/buildout -N -t 3 -c travis.cfg
-script:
-  - if [ "$BROWSER" != "code-analysis" ]; then export ROBOT_DESIRED_CAPABILITIES="$BROWSER,tunnel-identifier:$TRAVIS_JOB_NUMBER"; fi
-  - if [ "$BROWSER" != "code-analysis" ]; then bin/test -vvv --all; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/flake8 setup.py; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/flake8 plone; fi
-  - if [ "$BROWSER" == "code-analysis" ]; then bin/coverage run --source=plone.app.widgets --omit=plone/app/widgets/at_bbb.py,plone/app/widgets/dx_bbb.py,plone/app/widgets/dx_pac_bbb.py,plone/app/widgets/test\* bin/test --layer=\!PloneAppWidgetsLayer; fi
-after_success:
-  - bin/coveralls
-env:
-  matrix:
-    - BROWSER="code-analysis"
-    - BROWSER="platform:OS X 10.8,browserName:iphone,version:6.1,device-orientation:portrait"
-    - BROWSER="platform:OS X 10.8,browserName:ipad,version:6.1,device-orientation:portrait"
-    - BROWSER="platform:Linux,browserName:android,version:4.0,device-type:tablet,device-orientation:portrait"
-    - BROWSER="platform:Windows 7,browserName:firefox,version:25"
-    - BROWSER="platform:Windows 7,browserName:chrome,version:31"
-    - BROWSER="platform:Windows 8.1,browserName:internet explorer,version:11"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:10"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:9"
-    - BROWSER="platform:Windows 7,browserName:internet explorer,version:8"
-    - BROWSER="platform:Windows 7,browserName:opera,version:12"
-    - BROWSER="platform:OS X 10.8,browserName:safari,version:6"
-  global:
-    - secure: "X9AvF9DYKjG/E52ZKQGxxrMe/Z1FsuwJU9jk39NLia3aA3WyFKuE66BotqeZGi9Jk0V2IQWekMgZcAFIcRH6qbvMKcMtnhD+Wr8aiV7uby3wRjmPi2FznTiy+FvYwm8WiNBHw4Ek++nSCDkly0QGBUmJVvfe3zxNHSHSKx5E/yg="
-    - secure: "CvB/BK4EhZIiruAuiIFw/Bn80Wv/5jGiS2tOCaXd54v7lhld2VBxyCfccIcizKlSkIXzDausw24zEF0HV4E6k4z8AB12h1DH/6p31+epbrvDnQOZ1Br2grusOqMbjOutRkJ0w+upI+BTaeSI9bmYXZQdpkLA5mJCv0sBbqi4SPA="
-    - ROBOT_BUILD_NUMBER=plone.app.widgets-travis-$TRAVIS_BUILD_NUMBER
-    - ROBOT_REMOTE_URL=http://$SAUCE_USERNAME:$SAUCE_ACCESS_KEY@ondemand.saucelabs.com:80/wd/hub
-matrix:
-  allow_failures:
-    - env: BROWSER="platform:OS X 10.8,browserName:iphone,version:6.1,device-orientation:portrait"
-    - env: BROWSER="platform:OS X 10.8,browserName:ipad,version:6.1,device-orientation:portrait"
-    - env: BROWSER="platform:Linux,browserName:android,version:4.0,device-type:tablet,device-orientation:portrait"
-    - env: BROWSER="platform:Windows 8.1,browserName:internet explorer,version:11"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:10"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:9"
-    - env: BROWSER="platform:Windows 7,browserName:internet explorer,version:8"
-    - env: BROWSER="platform:Windows 7,browserName:opera,version:12"
-    - env: BROWSER="platform:OS X 10.8,browserName:safari,version:6"
diff --git a/CHANGES.rst b/CHANGES.rst
index 36494ca..424d69c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- No longer test on Travis.  We are tested on jenkins.plone.org, and
+  the Travis setup on master is pretty broken.  [maurits]
+
 - Take more time during robot tests.
   I hope that this makes a sometimes failing test always pass.  [maurits]
 
diff --git a/Makefile b/Makefile
index 1153a4b..8f35575 100644
--- a/Makefile
+++ b/Makefile
@@ -3,9 +3,6 @@ NIX_PATH=~/.nix-defexpr/channels/
 all: bootstrap
 	bin/buildout -v
 
-travis: bootstrap
-	bin/buildout -c travis.cfg -v
-
 bootstrap:
 	NIX_PATH=${NIX_PATH} nix-build --out-link nixenv dev.nix
 	./nixenv/bin/virtualenv --distribute --clear .
diff --git a/travis.cfg b/travis.cfg
deleted file mode 100644
index 6b5edf2..0000000
--- a/travis.cfg
+++ /dev/null
@@ -1,24 +0,0 @@
-[buildout]
-extends =
-    https://raw.github.com/collective/buildout.plonetest/master/travis-4.3.x.cfg
-    versions.cfg
-allow-hosts +=
-    code.google.com
-    robotframework.googlecode.com
-package-name = plone.app.widgets
-package-extras = [test,archetypes,dexterity]
-test-eggs = Pillow
-parts += extra
-develop += plone.app.contenttypes
-
-[extra]
-recipe = zc.recipe.egg
-eggs =
-    flake8
-    createcoverage
-    coveralls
-
-[versions]
-coverage = 3.7
-plone.app.robotframework = 0.8.2
-plone.app.contenttypes =


