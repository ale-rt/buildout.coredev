Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-11-21T14:05:01+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/6fcc23c4a90da4d6e3a6dbfd4c5f064f112c3b9f

Allow to work in an Archtypes free Plone 5.1.

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/helper_views.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e45c27f..a502afe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Allow to work in an Archtypes free Plone 5.1.
+  [jensens]
 
 
 5.0 (2016-11-17)
diff --git a/src/plone/app/multilingual/browser/helper_views.py b/src/plone/app/multilingual/browser/helper_views.py
index 9ecf3ba..a379c45 100644
--- a/src/plone/app/multilingual/browser/helper_views.py
+++ b/src/plone/app/multilingual/browser/helper_views.py
@@ -21,13 +21,20 @@
 from zope.component import getUtility
 from zope.component.hooks import getSite
 from zope.interface import implementer
+from zope.interface import Interface
 from zope.publisher.interfaces import IPublishTraverse
 from zope.publisher.interfaces import NotFound
 
 try:
     from Products.ATContentTypes.interfaces.factory import IFactoryTool
 except ImportError:
-    from Products.CMFPlone.interfaces.factory import IFactoryTool
+    try:
+        from Products.CMFPlone.interfaces.factory import IFactoryTool
+    except ImportError:
+        # gone in Plone 5.1 w/o ATCT
+
+        class IFactoryTool(Interface):
+            pass
 
 
 @implementer(IPublishTraverse)


Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-11-21T17:25:32+01:00
Author: agitator (agitator) <hpeter@agitator.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/033e9f10b4565487dc6dafa1aa3ef3a7b3c6b65a

Merge pull request #253 from plone/jensens-fix-wo-at

Allow to work in an Archtypes free Plone 5.1.

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/helper_views.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e45c27f..a502afe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Allow to work in an Archtypes free Plone 5.1.
+  [jensens]
 
 
 5.0 (2016-11-17)
diff --git a/src/plone/app/multilingual/browser/helper_views.py b/src/plone/app/multilingual/browser/helper_views.py
index 9ecf3ba..a379c45 100644
--- a/src/plone/app/multilingual/browser/helper_views.py
+++ b/src/plone/app/multilingual/browser/helper_views.py
@@ -21,13 +21,20 @@
 from zope.component import getUtility
 from zope.component.hooks import getSite
 from zope.interface import implementer
+from zope.interface import Interface
 from zope.publisher.interfaces import IPublishTraverse
 from zope.publisher.interfaces import NotFound
 
 try:
     from Products.ATContentTypes.interfaces.factory import IFactoryTool
 except ImportError:
-    from Products.CMFPlone.interfaces.factory import IFactoryTool
+    try:
+        from Products.CMFPlone.interfaces.factory import IFactoryTool
+    except ImportError:
+        # gone in Plone 5.1 w/o ATCT
+
+        class IFactoryTool(Interface):
+            pass
 
 
 @implementer(IPublishTraverse)


