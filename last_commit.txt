Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2017-10-23T17:40:09+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.Archetypes/commit/2b696b5667484c0bfe43105ddc0bee50d44f3cac

Revert "Do not redefine 'set' in a macro"

This reverts commit 18b50d7878bfb6e99bcf078b4c1895bb31e2f4ee.

It renamed 'set' to 'fieldset', but 'fieldset' was already used here, leading to problems.
I will redo it and pick a different name.

Files changed:
M Products/Archetypes/skins/archetypes/edit_macros.pt

diff --git a/Products/Archetypes/skins/archetypes/edit_macros.pt b/Products/Archetypes/skins/archetypes/edit_macros.pt
index b12a197c..4c01ee86 100644
--- a/Products/Archetypes/skins/archetypes/edit_macros.pt
+++ b/Products/Archetypes/skins/archetypes/edit_macros.pt
@@ -49,13 +49,13 @@
 
       <div id="archetypes-schemata-links"
            tal:condition="python: fieldsets and not allow_tabbing">
-        <tal:block repeat="fieldset fieldsets">
-          <tal:current condition="python:fieldset == fieldset and fieldsets != ['default']">
-            <strong>[<span tal:content="fieldset" i18n:translate="" />]</strong>
+        <tal:block repeat="set fieldsets">
+          <tal:current condition="python:set == fieldset and fieldsets != ['default']">
+            <strong>[<span tal:content="set" i18n:translate="" />]</strong>
           </tal:current>
-          <tal:others condition="python:fieldset != fieldset">
-            <a href="#" tal:attributes="href string:${context/absolute_url}/${template/getId}?fieldset=${fieldset}">
-            [<span tal:content="fieldset" i18n:translate="" />]</a>
+          <tal:others condition="python:set != fieldset">
+            <a href="#" tal:attributes="href string:${context/absolute_url}/${template/getId}?fieldset=${set}">
+            [<span tal:content="set" i18n:translate="" />]</a>
           </tal:others>
         </tal:block>
       </div>


Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2017-10-23T17:42:57+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.Archetypes/commit/7c3abafd0813cfe19081708d60c25b48aa721894

Renamed builtin set to fset in macro.

Files changed:
M Products/Archetypes/skins/archetypes/edit_macros.pt

diff --git a/Products/Archetypes/skins/archetypes/edit_macros.pt b/Products/Archetypes/skins/archetypes/edit_macros.pt
index 4c01ee86..fca38dee 100644
--- a/Products/Archetypes/skins/archetypes/edit_macros.pt
+++ b/Products/Archetypes/skins/archetypes/edit_macros.pt
@@ -49,13 +49,13 @@
 
       <div id="archetypes-schemata-links"
            tal:condition="python: fieldsets and not allow_tabbing">
-        <tal:block repeat="set fieldsets">
-          <tal:current condition="python:set == fieldset and fieldsets != ['default']">
-            <strong>[<span tal:content="set" i18n:translate="" />]</strong>
+        <tal:block repeat="fset fieldsets">
+          <tal:current condition="python:fset == fieldset and fieldsets != ['default']">
+            <strong>[<span tal:content="fset" i18n:translate="" />]</strong>
           </tal:current>
-          <tal:others condition="python:set != fieldset">
-            <a href="#" tal:attributes="href string:${context/absolute_url}/${template/getId}?fieldset=${set}">
-            [<span tal:content="set" i18n:translate="" />]</a>
+          <tal:others condition="python:fset != fieldset">
+            <a href="#" tal:attributes="href string:${context/absolute_url}/${template/getId}?fieldset=${fset}">
+            [<span tal:content="fset" i18n:translate="" />]</a>
           </tal:others>
         </tal:block>
       </div>


