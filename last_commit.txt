Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-05-09T13:04:06+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.forcada@freitag.de>
Commit: https://github.com/plone/plone.releaser/commit/a15ad68d21d440cec8b14ffff3ab3b3401ba21fc

Handle post and dev releases

If a release like '1.0dev0' was made,
when making release 1.1 the versions.cfg line would end like '1.1dev0' instead of '1.1'.

Files changed:
M plone/releaser/buildout.py

diff --git a/plone/releaser/buildout.py b/plone/releaser/buildout.py
index 4421bcc..3056e4d 100644
--- a/plone/releaser/buildout.py
+++ b/plone/releaser/buildout.py
@@ -78,7 +78,7 @@ def __setitem__(self, package_name, new_version):
             versionstxt += newline
 
         reg = re.compile(
-            "(^{0}[\s\=]+)[0-9\.abrc]+".format(package_name),
+            "(^{0}[\s\=]+)[0-9\.abrc]+(.post\d+)?(.dev\d+)?".format(package_name),
             re.MULTILINE
         )
         newVersionsTxt = reg.sub(r"\g<1>{0}".format(new_version), versionstxt)


Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-06-08T22:45:07+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/9865d2a243dbcae59a6aad88dc875dbc3f35a86e

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index af3e0ae..f6a44ba 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Fix new versions if they had dev/post release suffix.
+  [gforcada]
 
 1.5.1 (2016-04-28)
 ------------------


Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-06-08T22:47:17+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/29f919a6126dd07611cc6744579199eb6c1a1a0e

Add line back

Just to test mr.roboto

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index f6a44ba..d789a44 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -17,6 +17,7 @@ Bug fixes:
 - Fix new versions if they had dev/post release suffix.
   [gforcada]
 
+
 1.5.1 (2016-04-28)
 ------------------
 


Repository: plone.releaser


Branch: refs/heads/master
Date: 2016-06-08T22:49:04+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/4faf86ef203e6ba44e09ee0e27f0bf6976369051

Merge pull request #7 from plone/gforcada-patch-1

Handle post and dev releases

Files changed:
M CHANGES.rst
M plone/releaser/buildout.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 5b40044..ecccbfb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix new versions if they had dev/post release suffix.
+  [gforcada]
 
 
 1.5.1 (2016-04-28)
diff --git a/plone/releaser/buildout.py b/plone/releaser/buildout.py
index 4421bcc..3056e4d 100644
--- a/plone/releaser/buildout.py
+++ b/plone/releaser/buildout.py
@@ -78,7 +78,7 @@ def __setitem__(self, package_name, new_version):
             versionstxt += newline
 
         reg = re.compile(
-            "(^{0}[\s\=]+)[0-9\.abrc]+".format(package_name),
+            "(^{0}[\s\=]+)[0-9\.abrc]+(.post\d+)?(.dev\d+)?".format(package_name),
             re.MULTILINE
         )
         newVersionsTxt = reg.sub(r"\g<1>{0}".format(new_version), versionstxt)


