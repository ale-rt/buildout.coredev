Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2016-11-01T10:35:48+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.multilingual/commit/522b5cbadcc991e07abb3400f0f450b7311d0cd9

Robot tests: first wait until page contains element.

Only after this, wait until element is visible.
Otherwise you get an error:
Message: Element not found in the cache - perhaps the page has changed since it was looked up
If the element was already on the page, this is of course not needed.
But here the element was added dynamically, so we need this extra step.
At least for Firefox.

Files changed:
M src/plone/app/multilingual/tests/robot/test_add_translation.robot

diff --git a/src/plone/app/multilingual/tests/robot/test_add_translation.robot b/src/plone/app/multilingual/tests/robot/test_add_translation.robot
index 7600234..08401c5 100644
--- a/src/plone/app/multilingual/tests/robot/test_add_translation.robot
+++ b/src/plone/app/multilingual/tests/robot/test_add_translation.robot
@@ -64,8 +64,9 @@ I link the document in English as a translation
   Wait until page contains  An English Document
 
   Click Element  xpath=(//*[contains(@class, 'plone-modal-footer')]//input[@id='form-buttons-connect_translation'])
+  Wait until page contains element  xpath=(//h3[@class="translationTitle"])
   Wait until element is visible  xpath=(//h3[@class="translationTitle"])
-#  Focus  xpath=(//*[@class="odd"]//a[contains(@href,"a-catalan-document")])
+  Focus  xpath=(//*[@class="odd"]//a[contains(@href,"a-catalan-document")])
   Click Element  xpath=(//*[@class="odd"]//a[contains(@href,"a-catalan-document")])
   Wait until page contains  A Catalan Document
 


