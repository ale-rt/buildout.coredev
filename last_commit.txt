Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2016-07-04T08:58:19+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/1a35725023f357b4e927b8adea87235c16542e62

Marked some robot tests as unstable, non-critical.

These are the single querystring test and the three linkintegrity tests.

Refs https://github.com/plone/Products.CMFPlone/issues/1656

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/robot/test_linkintegrity.robot
M Products/CMFPlone/tests/robot/test_querystring.robot
M Products/CMFPlone/tests/test_robot.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f79aa24..337a5e3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -19,6 +19,9 @@ New features:
 
 Bug fixes:
 
+- Marked two robot tests as unstable, non-critical.
+  Refs https://github.com/plone/Products.CMFPlone/issues/1656  [maurits]
+
 - Use ``Plone Test Setup`` and ``Plone Test Teardown`` from ``plone.app.robotframework`` master.  [maurits]
 
 - Fix select2 related robot test failures and give the test_tinymce.robot scenario a more unique name.
diff --git a/Products/CMFPlone/tests/robot/test_linkintegrity.robot b/Products/CMFPlone/tests/robot/test_linkintegrity.robot
index dd9bcab..74f2a28 100644
--- a/Products/CMFPlone/tests/robot/test_linkintegrity.robot
+++ b/Products/CMFPlone/tests/robot/test_linkintegrity.robot
@@ -24,6 +24,8 @@ Test Teardown  Run keywords  Plone Test Teardown
 *** Test Cases ***************************************************************
 
 Scenario: When page is linked show warning
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
   Given a logged-in site administrator
     a page to link to
     and a page to edit
@@ -32,6 +34,8 @@ Scenario: When page is linked show warning
 
 
 Scenario: After you fix linked page no longer show warning
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
   Given a logged-in site administrator
   a page to link to
     and a page to edit
@@ -42,6 +46,9 @@ Scenario: After you fix linked page no longer show warning
 
 
 Scenario: Show warning when deleting linked item from folder_contents
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
+                   This one seems to fail more often than the others.
   Given a logged-in site administrator
   a page to link to
     and a page to edit
diff --git a/Products/CMFPlone/tests/robot/test_querystring.robot b/Products/CMFPlone/tests/robot/test_querystring.robot
index 4f1b488..bb10bc2 100644
--- a/Products/CMFPlone/tests/robot/test_querystring.robot
+++ b/Products/CMFPlone/tests/robot/test_querystring.robot
@@ -13,6 +13,9 @@ Test Teardown  Run keywords  Plone Test Teardown
 *** Test Cases **************************************************************
 
 Scenario: Location query
+    [Tags]  unstable
+    [Documentation]  This sometimes fails with: Element locator 'jquery=:focus' did not match any elements.
+                     This sometimes fails with: Element locator 'jquery=.pattern-relateditems-tree-select' did not match any elements.
     Given a logged-in site administrator
     and a bunch of folders
     and the querystring pattern
diff --git a/Products/CMFPlone/tests/test_robot.py b/Products/CMFPlone/tests/test_robot.py
index 55ef7f0..d282eab 100644
--- a/Products/CMFPlone/tests/test_robot.py
+++ b/Products/CMFPlone/tests/test_robot.py
@@ -16,7 +16,10 @@ def test_suite():
         doc.startswith('test_')
     ]
     for robot_test in robot_tests:
-        robottestsuite = robotsuite.RobotTestSuite(robot_test)
+        robottestsuite = robotsuite.RobotTestSuite(
+            robot_test,
+            noncritical=['unstable'],
+        )
         robottestsuite.level = ROBOT_TEST_LEVEL
         suite.addTests([
             layered(


Repository: Products.CMFPlone


Branch: refs/heads/5.0.x
Date: 2016-07-04T12:25:57+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/34b19a1dc4263ab37ed609490882075a63a54525

Merge pull request #1661 from plone/maurits-mark-unstable-robot-tests-50

Marked some robot tests as unstable, non-critical. [5.0]

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/robot/test_linkintegrity.robot
M Products/CMFPlone/tests/robot/test_querystring.robot
M Products/CMFPlone/tests/test_robot.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f79aa24..337a5e3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -19,6 +19,9 @@ New features:
 
 Bug fixes:
 
+- Marked two robot tests as unstable, non-critical.
+  Refs https://github.com/plone/Products.CMFPlone/issues/1656  [maurits]
+
 - Use ``Plone Test Setup`` and ``Plone Test Teardown`` from ``plone.app.robotframework`` master.  [maurits]
 
 - Fix select2 related robot test failures and give the test_tinymce.robot scenario a more unique name.
diff --git a/Products/CMFPlone/tests/robot/test_linkintegrity.robot b/Products/CMFPlone/tests/robot/test_linkintegrity.robot
index dd9bcab..74f2a28 100644
--- a/Products/CMFPlone/tests/robot/test_linkintegrity.robot
+++ b/Products/CMFPlone/tests/robot/test_linkintegrity.robot
@@ -24,6 +24,8 @@ Test Teardown  Run keywords  Plone Test Teardown
 *** Test Cases ***************************************************************
 
 Scenario: When page is linked show warning
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
   Given a logged-in site administrator
     a page to link to
     and a page to edit
@@ -32,6 +34,8 @@ Scenario: When page is linked show warning
 
 
 Scenario: After you fix linked page no longer show warning
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
   Given a logged-in site administrator
   a page to link to
     and a page to edit
@@ -42,6 +46,9 @@ Scenario: After you fix linked page no longer show warning
 
 
 Scenario: Show warning when deleting linked item from folder_contents
+  [Tags]  unstable
+  [Documentation]  This sometimes fails with: StaleElementReferenceException: Message: Element not found in the cache.
+                   This one seems to fail more often than the others.
   Given a logged-in site administrator
   a page to link to
     and a page to edit
diff --git a/Products/CMFPlone/tests/robot/test_querystring.robot b/Products/CMFPlone/tests/robot/test_querystring.robot
index 4f1b488..bb10bc2 100644
--- a/Products/CMFPlone/tests/robot/test_querystring.robot
+++ b/Products/CMFPlone/tests/robot/test_querystring.robot
@@ -13,6 +13,9 @@ Test Teardown  Run keywords  Plone Test Teardown
 *** Test Cases **************************************************************
 
 Scenario: Location query
+    [Tags]  unstable
+    [Documentation]  This sometimes fails with: Element locator 'jquery=:focus' did not match any elements.
+                     This sometimes fails with: Element locator 'jquery=.pattern-relateditems-tree-select' did not match any elements.
     Given a logged-in site administrator
     and a bunch of folders
     and the querystring pattern
diff --git a/Products/CMFPlone/tests/test_robot.py b/Products/CMFPlone/tests/test_robot.py
index 55ef7f0..d282eab 100644
--- a/Products/CMFPlone/tests/test_robot.py
+++ b/Products/CMFPlone/tests/test_robot.py
@@ -16,7 +16,10 @@ def test_suite():
         doc.startswith('test_')
     ]
     for robot_test in robot_tests:
-        robottestsuite = robotsuite.RobotTestSuite(robot_test)
+        robottestsuite = robotsuite.RobotTestSuite(
+            robot_test,
+            noncritical=['unstable'],
+        )
         robottestsuite.level = ROBOT_TEST_LEVEL
         suite.addTests([
             layered(


