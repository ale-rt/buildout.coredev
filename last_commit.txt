Repository: plone.app.contenttypes


Branch: refs/heads/1.2.x
Date: 2017-05-23T11:38:09+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/15756f11663bbd86c9cffaa1dfae01490dc0ff98

Fix flaky test in test_indexes.

Files changed:
M CHANGES.rst
M plone/app/contenttypes/tests/test_indexes.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 772fdc72..f3f393cc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Fix flaky test in test_indexes.
+  [thet]
 
 1.2.23 (2017-05-09)
 -------------------
diff --git a/plone/app/contenttypes/tests/test_indexes.py b/plone/app/contenttypes/tests/test_indexes.py
index 42b4a249..c8a1530f 100644
--- a/plone/app/contenttypes/tests/test_indexes.py
+++ b/plone/app/contenttypes/tests/test_indexes.py
@@ -149,13 +149,13 @@ def test_text_in_searchable_text_index(self):
             SearchableText=u'Lorem ipsum',
         ))
         self.assertEqual(len(brains), 2)
-        self.assertEqual(
-            brains[0].getPath(),
-            '/plone/folder/news_item'
+
+        paths = [it.getPath() for it in brains]
+        self.assertTrue(
+            '/plone/folder/news_item' in paths
         )
-        self.assertEqual(
-            brains[1].getPath(),
-            '/plone/folder/document'
+        self.assertTrue(
+            '/plone/folder/document' in paths
         )
 
     def test_html_stripped_searchable_text_index(self):


Repository: plone.app.contenttypes


Branch: refs/heads/1.2.x
Date: 2017-05-23T13:20:25+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/cb830f21f62f29a692175f87e64b8bb209965926

Merge pull request #401 from plone/thet-fixflakytest-1.2.x

Fix flaky test in test_indexes.

Files changed:
M CHANGES.rst
M plone/app/contenttypes/tests/test_indexes.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 772fdc72..f3f393cc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Fix flaky test in test_indexes.
+  [thet]
 
 1.2.23 (2017-05-09)
 -------------------
diff --git a/plone/app/contenttypes/tests/test_indexes.py b/plone/app/contenttypes/tests/test_indexes.py
index 42b4a249..c8a1530f 100644
--- a/plone/app/contenttypes/tests/test_indexes.py
+++ b/plone/app/contenttypes/tests/test_indexes.py
@@ -149,13 +149,13 @@ def test_text_in_searchable_text_index(self):
             SearchableText=u'Lorem ipsum',
         ))
         self.assertEqual(len(brains), 2)
-        self.assertEqual(
-            brains[0].getPath(),
-            '/plone/folder/news_item'
+
+        paths = [it.getPath() for it in brains]
+        self.assertTrue(
+            '/plone/folder/news_item' in paths
         )
-        self.assertEqual(
-            brains[1].getPath(),
-            '/plone/folder/document'
+        self.assertTrue(
+            '/plone/folder/document' in paths
         )
 
     def test_html_stripped_searchable_text_index(self):


