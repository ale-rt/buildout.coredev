Repository: plone.batching


Branch: refs/heads/master
Date: 2016-01-20T20:11:48+01:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/677f4d677c841e8e4424f1d859c2ef896e7e03b5

Modernize pagination markup to HTML5 and switches deprecated listingBar CSS class reference to pagination

Files changed:
M CHANGES.rst
M plone/batching/batchnavigation.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 04825f4..38451a7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,6 +1,21 @@
 Changelog
 =========
 
+1.1.1 (unreleased)
+------------------
+
+New:
+
+- Make ellipses stylable and provide more CSS hooks to pagination markup. This also deprecates the CSS class ``listingBar`` in favor of more commonly used ``pagination``, which will be the canonical one in Plone 5.0.2 and up.
+  [davilima6]
+- Switches deprecated ``listingBar`` CSS class to ``pagination``.
+  [davilima6]
+
+Fixes:
+
+- *add item here*
+
+
 1.0.8 (unreleased)
 ------------------
 
diff --git a/plone/batching/batchnavigation.pt b/plone/batching/batchnavigation.pt
index 8b5862e..9354ca8 100644
--- a/plone/batching/batchnavigation.pt
+++ b/plone/batching/batchnavigation.pt
@@ -3,90 +3,92 @@
     condition="batch"
     metal:define-macro="navigation">
 
-  <div class="pagination listingBar"
-    i18n:domain="plone"
-    tal:condition="batch/multiple_pages">
+  <nav class="pagination"
+      i18n:domain="plone"
+      tal:condition="batch/multiple_pages">
 
-    <tal:comment replace="nothing">
-      <!-- Link to previous page -->
-    </tal:comment>
-    <a class="previous"
-        tal:condition="batch/has_previous"
-        tal:attributes="href python:view.make_link(batch.previouspage)">
-      &laquo;
-      <span i18n:translate="batch_previous_x_items" tal:omit-tag="">
-        Previous
-        <span i18n:name="number" tal:omit-tag="" tal:content="batch/pagesize">n</span>
-        items
-      </span>
-    </a>
+    <ul>
 
-    <tal:comment replace="nothing">
-      <!-- Link to next page -->
-    </tal:comment>
-    <a class="next"
-        tal:condition="batch/has_next"
-        tal:attributes="href python:view.make_link(batch.nextpage)">
-      <span i18n:translate="batch_next_x_items" tal:omit-tag="">
-        Next
-        <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>
-        items
-      </span>
-      &raquo;
-    </a>
+      <tal:comment replace="nothing">
+        <!-- Previous page -->
+      </tal:comment>
+      <li class="previous" tal:condition="batch/has_previous">
+        <a tal:attributes="href python:view.make_link(batch.previouspage)">
+          &laquo;
+          <span i18n:translate="batch_previous_x_items" tal:omit-tag="">
+            Previous <span i18n:name="number" tal:content="batch/pagesize" tal:omit-tag="">n</span> items
+          </span>
+        </a>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- First page -->
-    </tal:comment>
-    <a class="first"
-        tal:condition="batch/show_link_to_first"
-        tal:attributes="href python:view.make_link(1)">1</a>
+      <tal:comment replace="nothing">
+        <!-- First page -->
+      </tal:comment>
+      <li class="first" tal:condition="batch/show_link_to_first">
+        <a tal:attributes="href python:view.make_link(1)">1</a>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Ellipsis after first item -->
-    </tal:comment>
-    <span class="disabled"
-        tal:condition="batch/second_page_not_in_navlist">
-       ...
-    </span>
+      <tal:comment replace="nothing">
+        <!-- Ellipsis after first item -->
+      </tal:comment>
+      <li class="disabled" tal:condition="batch/second_page_not_in_navlist">
+        ...
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Pagelist with links to previous pages for quick navigation -->
-    </tal:comment>
-    <a tal:repeat="pagenumber batch/previous_pages"
-        tal:content="pagenumber"
-        tal:attributes="href python:view.make_link(pagenumber)" />
+      <tal:comment replace="nothing">
+        <!-- Pagelist with links to previous pages for quick navigation -->
+      </tal:comment>
+      <li tal:repeat="pagenumber batch/previous_pages">
+        <a tal:content="pagenumber"
+            tal:attributes="href python:view.make_link(pagenumber)" />
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Current page -->
-    </tal:comment>
-    <span class="current"
-        tal:condition="batch/navlist"
-        tal:content="batch/pagenumber" />
+      <tal:comment replace="nothing">
+        <!-- Active page -->
+      </tal:comment>
+      <li class="active" tal:condition="batch/navlist">
+        [<span tal:content="batch/pagenumber" />]
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Pagelist with links to next pages for quick navigation -->
-    </tal:comment>
-    <a tal:repeat="pagenumber batch/next_pages"
-        tal:content="pagenumber"
-        tal:attributes="href python:view.make_link(pagenumber)" />
+      <tal:comment replace="nothing">
+        <!-- Pagelist with links to next pages for quick navigation -->
+      </tal:comment>
+      <li tal:repeat="pagenumber batch/next_pages">
+        <a tal:content="pagenumber"
+            tal:attributes="href python:view.make_link(pagenumber)" />
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Ellipsis before last item -->
-    </tal:comment>
-    <span class="disabled"
-        tal:condition="batch/before_last_page_not_in_navlist">
-       ...
-    </span>
+      <tal:comment replace="nothing">
+        <!-- Ellipsis before last item -->
+      </tal:comment>
+      <li class="disabled"
+          tal:condition="batch/before_last_page_not_in_navlist">
+        ...
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Link to last -->
-    </tal:comment>
-    <a class="last"
-        tal:condition="batch/show_link_to_last"
-        tal:attributes="href python:view.make_link(batch.lastpage)"
-        tal:content="batch/lastpage" />
+      <tal:comment replace="nothing">
+        <!-- Last page -->
+      </tal:comment>
+      <li class="last" tal:condition="batch/show_link_to_last">
+        <a tal:attributes="href python:view.make_link(batch.lastpage)"
+            tal:content="batch/lastpage" />
+      </li>
 
-  </div>
+      <tal:comment replace="nothing">
+        <!-- Next page -->
+      </tal:comment>
+      <li class="next" tal:condition="batch/has_next">
+        <a tal:attributes="href python:view.make_link(batch.nextpage)">
+          <span i18n:translate="batch_next_x_items" tal:omit-tag="">
+            Next
+            <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>
+            items
+          </span>
+          &raquo;
+        </a>
+      </li>
+    </ul>
+
+  </nav>
 
 </tal:batchnavigation>


Repository: plone.batching


Branch: refs/heads/master
Date: 2016-01-20T20:11:48+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/c54672aeecfa7d9e961249ba6ecc7e247bd73729

rm useless brackets around active. add spans where there are no "a" to allow styling like "a"

Files changed:
M plone/batching/batchnavigation.pt

diff --git a/plone/batching/batchnavigation.pt b/plone/batching/batchnavigation.pt
index 9354ca8..6e0d448 100644
--- a/plone/batching/batchnavigation.pt
+++ b/plone/batching/batchnavigation.pt
@@ -32,7 +32,7 @@
         <!-- Ellipsis after first item -->
       </tal:comment>
       <li class="disabled" tal:condition="batch/second_page_not_in_navlist">
-        ...
+        <span>...</span>
       </li>
 
       <tal:comment replace="nothing">
@@ -47,7 +47,7 @@
         <!-- Active page -->
       </tal:comment>
       <li class="active" tal:condition="batch/navlist">
-        [<span tal:content="batch/pagenumber" />]
+        <span tal:content="batch/pagenumber" />
       </li>
 
       <tal:comment replace="nothing">
@@ -61,9 +61,8 @@
       <tal:comment replace="nothing">
         <!-- Ellipsis before last item -->
       </tal:comment>
-      <li class="disabled"
-          tal:condition="batch/before_last_page_not_in_navlist">
-        ...
+      <li class="disabled" tal:condition="batch/before_last_page_not_in_navlist">
+        <span>...</span>
       </li>
 
       <tal:comment replace="nothing">


Repository: plone.batching


Branch: refs/heads/master
Date: 2016-01-20T20:11:48+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/db4d3a51b33145677b46e682dcaf72683d13a9a1

update metadata, upgrade warning

Files changed:
M CHANGES.rst
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 38451a7..1f50734 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,13 +1,19 @@
 Changelog
 =========
 
-1.1.1 (unreleased)
-------------------
+1.1 (unreleased)
+----------------
+
+.. warning:: Upgrade Warning!
+    If you customized the batchnavigation.pt file or use specific CSS styles for it, you might have to update them to reflect the new HTML structure.
 
 New:
 
 - Make ellipses stylable and provide more CSS hooks to pagination markup. This also deprecates the CSS class ``listingBar`` in favor of more commonly used ``pagination``, which will be the canonical one in Plone 5.0.2 and up.
   [davilima6]
+- Refactor batchnavigation HTML layout to use nav/ul/li elements instead of div/span.
+  [davilima6]
+
 - Switches deprecated ``listingBar`` CSS class to ``pagination``.
   [davilima6]
 
diff --git a/setup.py b/setup.py
index 1815e79..e346d13 100644
--- a/setup.py
+++ b/setup.py
@@ -2,7 +2,7 @@
 from setuptools import find_packages
 from setuptools import setup
 
-version = '1.0.8.dev0'
+version = '1.1.dev0'
 
 setup(
     name='plone.batching',


Repository: plone.batching


Branch: refs/heads/master
Date: 2016-01-20T20:13:04+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/a86ec087b15a35288e6bb55492ba2b8817b3b848

aftermerge work

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 1f50734..45284e6 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -9,14 +9,15 @@ Changelog
 
 New:
 
-- Make ellipses stylable and provide more CSS hooks to pagination markup. This also deprecates the CSS class ``listingBar`` in favor of more commonly used ``pagination``, which will be the canonical one in Plone 5.0.2 and up.
-  [davilima6]
 - Refactor batchnavigation HTML layout to use nav/ul/li elements instead of div/span.
   [davilima6]
 
 - Switches deprecated ``listingBar`` CSS class to ``pagination``.
   [davilima6]
 
+- Make ellipses stylable and provide more CSS hooks to pagination markup.
+  [davilima6]
+
 Fixes:
 
 - *add item here*


Repository: plone.batching


Branch: refs/heads/master
Date: 2016-01-21T10:34:25+01:00
Author: agitator (agitator) <hpeter@agitator.com>
Commit: https://github.com/plone/plone.batching/commit/1af82c2486df562756101f5e1496df90c5fc330f

Merge pull request #15 from plone/pagination_markup

Modernize pagination markup to HTML5 and switches deprecated listingB…

Files changed:
M CHANGES.rst
M plone/batching/batchnavigation.pt
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 04825f4..45284e6 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,6 +1,28 @@
 Changelog
 =========
 
+1.1 (unreleased)
+----------------
+
+.. warning:: Upgrade Warning!
+    If you customized the batchnavigation.pt file or use specific CSS styles for it, you might have to update them to reflect the new HTML structure.
+
+New:
+
+- Refactor batchnavigation HTML layout to use nav/ul/li elements instead of div/span.
+  [davilima6]
+
+- Switches deprecated ``listingBar`` CSS class to ``pagination``.
+  [davilima6]
+
+- Make ellipses stylable and provide more CSS hooks to pagination markup.
+  [davilima6]
+
+Fixes:
+
+- *add item here*
+
+
 1.0.8 (unreleased)
 ------------------
 
diff --git a/plone/batching/batchnavigation.pt b/plone/batching/batchnavigation.pt
index 8b5862e..6e0d448 100644
--- a/plone/batching/batchnavigation.pt
+++ b/plone/batching/batchnavigation.pt
@@ -3,90 +3,91 @@
     condition="batch"
     metal:define-macro="navigation">
 
-  <div class="pagination listingBar"
-    i18n:domain="plone"
-    tal:condition="batch/multiple_pages">
+  <nav class="pagination"
+      i18n:domain="plone"
+      tal:condition="batch/multiple_pages">
 
-    <tal:comment replace="nothing">
-      <!-- Link to previous page -->
-    </tal:comment>
-    <a class="previous"
-        tal:condition="batch/has_previous"
-        tal:attributes="href python:view.make_link(batch.previouspage)">
-      &laquo;
-      <span i18n:translate="batch_previous_x_items" tal:omit-tag="">
-        Previous
-        <span i18n:name="number" tal:omit-tag="" tal:content="batch/pagesize">n</span>
-        items
-      </span>
-    </a>
+    <ul>
 
-    <tal:comment replace="nothing">
-      <!-- Link to next page -->
-    </tal:comment>
-    <a class="next"
-        tal:condition="batch/has_next"
-        tal:attributes="href python:view.make_link(batch.nextpage)">
-      <span i18n:translate="batch_next_x_items" tal:omit-tag="">
-        Next
-        <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>
-        items
-      </span>
-      &raquo;
-    </a>
+      <tal:comment replace="nothing">
+        <!-- Previous page -->
+      </tal:comment>
+      <li class="previous" tal:condition="batch/has_previous">
+        <a tal:attributes="href python:view.make_link(batch.previouspage)">
+          &laquo;
+          <span i18n:translate="batch_previous_x_items" tal:omit-tag="">
+            Previous <span i18n:name="number" tal:content="batch/pagesize" tal:omit-tag="">n</span> items
+          </span>
+        </a>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- First page -->
-    </tal:comment>
-    <a class="first"
-        tal:condition="batch/show_link_to_first"
-        tal:attributes="href python:view.make_link(1)">1</a>
+      <tal:comment replace="nothing">
+        <!-- First page -->
+      </tal:comment>
+      <li class="first" tal:condition="batch/show_link_to_first">
+        <a tal:attributes="href python:view.make_link(1)">1</a>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Ellipsis after first item -->
-    </tal:comment>
-    <span class="disabled"
-        tal:condition="batch/second_page_not_in_navlist">
-       ...
-    </span>
+      <tal:comment replace="nothing">
+        <!-- Ellipsis after first item -->
+      </tal:comment>
+      <li class="disabled" tal:condition="batch/second_page_not_in_navlist">
+        <span>...</span>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Pagelist with links to previous pages for quick navigation -->
-    </tal:comment>
-    <a tal:repeat="pagenumber batch/previous_pages"
-        tal:content="pagenumber"
-        tal:attributes="href python:view.make_link(pagenumber)" />
+      <tal:comment replace="nothing">
+        <!-- Pagelist with links to previous pages for quick navigation -->
+      </tal:comment>
+      <li tal:repeat="pagenumber batch/previous_pages">
+        <a tal:content="pagenumber"
+            tal:attributes="href python:view.make_link(pagenumber)" />
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Current page -->
-    </tal:comment>
-    <span class="current"
-        tal:condition="batch/navlist"
-        tal:content="batch/pagenumber" />
+      <tal:comment replace="nothing">
+        <!-- Active page -->
+      </tal:comment>
+      <li class="active" tal:condition="batch/navlist">
+        <span tal:content="batch/pagenumber" />
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Pagelist with links to next pages for quick navigation -->
-    </tal:comment>
-    <a tal:repeat="pagenumber batch/next_pages"
-        tal:content="pagenumber"
-        tal:attributes="href python:view.make_link(pagenumber)" />
+      <tal:comment replace="nothing">
+        <!-- Pagelist with links to next pages for quick navigation -->
+      </tal:comment>
+      <li tal:repeat="pagenumber batch/next_pages">
+        <a tal:content="pagenumber"
+            tal:attributes="href python:view.make_link(pagenumber)" />
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Ellipsis before last item -->
-    </tal:comment>
-    <span class="disabled"
-        tal:condition="batch/before_last_page_not_in_navlist">
-       ...
-    </span>
+      <tal:comment replace="nothing">
+        <!-- Ellipsis before last item -->
+      </tal:comment>
+      <li class="disabled" tal:condition="batch/before_last_page_not_in_navlist">
+        <span>...</span>
+      </li>
 
-    <tal:comment replace="nothing">
-      <!-- Link to last -->
-    </tal:comment>
-    <a class="last"
-        tal:condition="batch/show_link_to_last"
-        tal:attributes="href python:view.make_link(batch.lastpage)"
-        tal:content="batch/lastpage" />
+      <tal:comment replace="nothing">
+        <!-- Last page -->
+      </tal:comment>
+      <li class="last" tal:condition="batch/show_link_to_last">
+        <a tal:attributes="href python:view.make_link(batch.lastpage)"
+            tal:content="batch/lastpage" />
+      </li>
 
-  </div>
+      <tal:comment replace="nothing">
+        <!-- Next page -->
+      </tal:comment>
+      <li class="next" tal:condition="batch/has_next">
+        <a tal:attributes="href python:view.make_link(batch.nextpage)">
+          <span i18n:translate="batch_next_x_items" tal:omit-tag="">
+            Next
+            <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>
+            items
+          </span>
+          &raquo;
+        </a>
+      </li>
+    </ul>
+
+  </nav>
 
 </tal:batchnavigation>
diff --git a/setup.py b/setup.py
index 1815e79..e346d13 100644
--- a/setup.py
+++ b/setup.py
@@ -2,7 +2,7 @@
 from setuptools import find_packages
 from setuptools import setup
 
-version = '1.0.8.dev0'
+version = '1.1.dev0'
 
 setup(
     name='plone.batching',


