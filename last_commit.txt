Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-02-16T11:15:58-06:00
Author: nathan.vangheem () <nathan.vangheem@wildcardcorp.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/183ad08d4b7c9d8958d95747b3ede96b0d6e3a8b

Registry upgrades for Plone 5.0.3

Files changed:
A plone/app/upgrade/v50/profiles/to_503/registry.xml
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/final.py
M plone/app/upgrade/v50/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 19ff450..a819c40 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,9 @@ Changelog
 
 New:
 
+- Registry upgrades for Plone 5.0.3
+  [vangheem]
+
 - Hidden the v50 module from the installable products, just like our
   other modules.  [maurits]
 
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index b1bc42b..edaaf8d 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -284,4 +284,17 @@
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5013"
+        destination="5014"
+        profile="Products.CMFPlone:plone">
+
+      <gs:upgradeStep
+           title="Run to503 upgrade profile."
+           description=""
+           handler=".final.to503"
+           />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v50/final.py b/plone/app/upgrade/v50/final.py
index ffd33e4..55e8afc 100644
--- a/plone/app/upgrade/v50/final.py
+++ b/plone/app/upgrade/v50/final.py
@@ -90,3 +90,8 @@ def to502(context):
     # plone.app.querystring is 13 at this point but the upgrade-step
     # upgrade_to_5 has not been run. Let's run it.
     loadMigrationProfile(context, 'profile-plone.app.querystring:upgrade_to_5')
+
+
+def to503(context):
+    """5.0.2 -> 5.0.3"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to503')
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index d5d2922..16cf6db 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -102,4 +102,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to503"
+      title="Upgrade profile for Plone 5.0.2 to Plone 5.0.3"
+      description=""
+      directory="profiles/to_503"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v50/profiles/to_503/registry.xml b/plone/app/upgrade/v50/profiles/to_503/registry.xml
new file mode 100644
index 0000000..6b8dcea
--- /dev/null
+++ b/plone/app/upgrade/v50/profiles/to_503/registry.xml
@@ -0,0 +1,15 @@
+<?xml version="1.0"?>
+<registry>
+  <records prefix="plone.bundles/plone-logged-in"
+           interface='Products.CMFPlone.interfaces.IBundleRegistry'>
+    <value key="last_compilation">2015-02-16 00:00:00</value>
+    <value key="stub_js_modules" purge="False">
+      <element>mockup-patterns-moment</element>
+      <element>moment</element>
+    </value>
+  </records>
+  <records prefix="plone.bundles/plone"
+            interface='Products.CMFPlone.interfaces.IBundleRegistry'>
+    <value key="last_compilation">2015-02-16 00:00:00</value>
+  </records>
+</registry>


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-02-17T00:48:59+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/07b9ef32dc4ebe2e3c1cabdda69d55e9a72be6bc

Merge pull request #67 from plone/503-upgrades

Registry upgrades for Plone 5.0.3

Files changed:
A plone/app/upgrade/v50/profiles/to_503/registry.xml
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/final.py
M plone/app/upgrade/v50/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 19ff450..a819c40 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,9 @@ Changelog
 
 New:
 
+- Registry upgrades for Plone 5.0.3
+  [vangheem]
+
 - Hidden the v50 module from the installable products, just like our
   other modules.  [maurits]
 
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index b1bc42b..edaaf8d 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -284,4 +284,17 @@
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5013"
+        destination="5014"
+        profile="Products.CMFPlone:plone">
+
+      <gs:upgradeStep
+           title="Run to503 upgrade profile."
+           description=""
+           handler=".final.to503"
+           />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v50/final.py b/plone/app/upgrade/v50/final.py
index ffd33e4..55e8afc 100644
--- a/plone/app/upgrade/v50/final.py
+++ b/plone/app/upgrade/v50/final.py
@@ -90,3 +90,8 @@ def to502(context):
     # plone.app.querystring is 13 at this point but the upgrade-step
     # upgrade_to_5 has not been run. Let's run it.
     loadMigrationProfile(context, 'profile-plone.app.querystring:upgrade_to_5')
+
+
+def to503(context):
+    """5.0.2 -> 5.0.3"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to503')
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index d5d2922..16cf6db 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -102,4 +102,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to503"
+      title="Upgrade profile for Plone 5.0.2 to Plone 5.0.3"
+      description=""
+      directory="profiles/to_503"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v50/profiles/to_503/registry.xml b/plone/app/upgrade/v50/profiles/to_503/registry.xml
new file mode 100644
index 0000000..6b8dcea
--- /dev/null
+++ b/plone/app/upgrade/v50/profiles/to_503/registry.xml
@@ -0,0 +1,15 @@
+<?xml version="1.0"?>
+<registry>
+  <records prefix="plone.bundles/plone-logged-in"
+           interface='Products.CMFPlone.interfaces.IBundleRegistry'>
+    <value key="last_compilation">2015-02-16 00:00:00</value>
+    <value key="stub_js_modules" purge="False">
+      <element>mockup-patterns-moment</element>
+      <element>moment</element>
+    </value>
+  </records>
+  <records prefix="plone.bundles/plone"
+            interface='Products.CMFPlone.interfaces.IBundleRegistry'>
+    <value key="last_compilation">2015-02-16 00:00:00</value>
+  </records>
+</registry>


