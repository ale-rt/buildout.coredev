Repository: plone.app.event


Branch: refs/heads/2.0.x
Date: 2016-05-30T09:55:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/ce70a3c8e270375b04b25172b651bd5502865f6d

Fixed possible cross site scripting (XSS) attack in location field.

Files changed:
M CHANGES.rst
M plone/app/event/bbb/portlets/portlet_events.pt
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/portlets/portlet_events.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 58cf32c..5620a30 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,8 @@ New features:
 
 Bug fixes:
 
+- Fixed possible cross site scripting (XSS) attack in location field.  [maurits]
+
 - Don't validate the ``validate_start_end`` invariant, if start or end are ``None``.
   This can happen on non-required, default empty start or end fields during editing.
   [thet]
diff --git a/plone/app/event/bbb/portlets/portlet_events.pt b/plone/app/event/bbb/portlets/portlet_events.pt
index 52f36eb..835db64 100644
--- a/plone/app/event/bbb/portlets/portlet_events.pt
+++ b/plone/app/event/bbb/portlets/portlet_events.pt
@@ -38,7 +38,7 @@
             </span>
             <span class="location"
                 tal:condition="item/location"> &mdash;
-                <tal:location content="structure item/location">Location</tal:location>
+                <tal:location content="item/location">Location</tal:location>
             </span>
         </span>
     </dd>
diff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt
index a945dc6..f54e74c 100644
--- a/plone/app/event/browser/event_listing.pt
+++ b/plone/app/event/browser/event_listing.pt
@@ -65,7 +65,7 @@
             <tal:date tal:replace="structure python:view.formatted_date(data)"/>
             <div itemprop="location" class="location"
                 tal:condition="data/location"
-                tal:content="structure data/location">location</div>
+                tal:content="data/location">location</div>
           </div>
 
           <p itemprop="description" class="description" tal:condition="data/description" tal:content="data/description" />
diff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt
index 4e010e4..7eb538c 100644
--- a/plone/app/event/browser/event_summary.pt
+++ b/plone/app/event/browser/event_summary.pt
@@ -73,7 +73,7 @@
     <tal:cond condition="data/location">
       <li class="event-location">
         <strong i18n:translate="event_where">Where</strong>
-        <span itemprop="location" tal:content="structure data/location">Location</span>
+        <span itemprop="location" tal:content="data/location">Location</span>
       </li>
     </tal:cond>
     </tal:cond>
diff --git a/plone/app/event/portlets/portlet_events.pt b/plone/app/event/portlets/portlet_events.pt
index cb2775b..647217d 100644
--- a/plone/app/event/portlets/portlet_events.pt
+++ b/plone/app/event/portlets/portlet_events.pt
@@ -44,7 +44,7 @@
           </span>
           <span class="location"
               tal:condition="item_location"> &mdash;
-            <tal:location content="structure item_location">Location</tal:location>
+            <tal:location content="item_location">Location</tal:location>
           </span>
         </span>
       </li>


Repository: plone.app.event


Branch: refs/heads/2.0.x
Date: 2016-06-06T10:14:43+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/3d95a2937337d113b29a19b5faf57e765f2c9861

Merge pull request #232 from plone/maurits-xss-20

Fixed possible XSS attack in location field. [2.0]

Files changed:
M CHANGES.rst
M plone/app/event/bbb/portlets/portlet_events.pt
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/portlets/portlet_events.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 58cf32c..5620a30 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,8 @@ New features:
 
 Bug fixes:
 
+- Fixed possible cross site scripting (XSS) attack in location field.  [maurits]
+
 - Don't validate the ``validate_start_end`` invariant, if start or end are ``None``.
   This can happen on non-required, default empty start or end fields during editing.
   [thet]
diff --git a/plone/app/event/bbb/portlets/portlet_events.pt b/plone/app/event/bbb/portlets/portlet_events.pt
index 52f36eb..835db64 100644
--- a/plone/app/event/bbb/portlets/portlet_events.pt
+++ b/plone/app/event/bbb/portlets/portlet_events.pt
@@ -38,7 +38,7 @@
             </span>
             <span class="location"
                 tal:condition="item/location"> &mdash;
-                <tal:location content="structure item/location">Location</tal:location>
+                <tal:location content="item/location">Location</tal:location>
             </span>
         </span>
     </dd>
diff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt
index a945dc6..f54e74c 100644
--- a/plone/app/event/browser/event_listing.pt
+++ b/plone/app/event/browser/event_listing.pt
@@ -65,7 +65,7 @@
             <tal:date tal:replace="structure python:view.formatted_date(data)"/>
             <div itemprop="location" class="location"
                 tal:condition="data/location"
-                tal:content="structure data/location">location</div>
+                tal:content="data/location">location</div>
           </div>
 
           <p itemprop="description" class="description" tal:condition="data/description" tal:content="data/description" />
diff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt
index 4e010e4..7eb538c 100644
--- a/plone/app/event/browser/event_summary.pt
+++ b/plone/app/event/browser/event_summary.pt
@@ -73,7 +73,7 @@
     <tal:cond condition="data/location">
       <li class="event-location">
         <strong i18n:translate="event_where">Where</strong>
-        <span itemprop="location" tal:content="structure data/location">Location</span>
+        <span itemprop="location" tal:content="data/location">Location</span>
       </li>
     </tal:cond>
     </tal:cond>
diff --git a/plone/app/event/portlets/portlet_events.pt b/plone/app/event/portlets/portlet_events.pt
index cb2775b..647217d 100644
--- a/plone/app/event/portlets/portlet_events.pt
+++ b/plone/app/event/portlets/portlet_events.pt
@@ -44,7 +44,7 @@
           </span>
           <span class="location"
               tal:condition="item_location"> &mdash;
-            <tal:location content="structure item_location">Location</tal:location>
+            <tal:location content="item_location">Location</tal:location>
           </span>
         </span>
       </li>


