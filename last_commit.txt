Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-10-27T13:23:24+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/a70db0de53b61b4fc6a4db35ba5e62c5e749be57

Enabled update from latest Plone 4.3.

Otherwise we would skip a few upgrade steps when migrating to Plone 5.

We use the not existing revision 4399, which GenericSetup sorts nicely
into the correct spot for us.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index ac8d9ce..ff64b99 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -40,6 +40,10 @@ New features:
 
 Bug fixes:
 
+- Enabled update from latest 4.3 profile revision.
+  Otherwise we would skip a few upgrade steps when migrating to
+  Plone 5.  [maurits]
+
 - Don't remove sub skin layers when cleaning ``portal_skins``.
   Created ``utils.cleanUpSkinsTool`` method which has generally useful
   code for cleaning up the skins.
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index 3cd893b..9fb12f6 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -6,8 +6,12 @@
 
     <include file="profiles.zcml" />
 
+    <!-- Upgrade from latest 4.3 profile revision.  This source step
+         does not need to exist, it just needs to be higher than other
+         4.3 profile revisions.  GenericSetup will then sort it nicely
+         for us. -->
     <gs:upgradeSteps
-        source="4310"
+        source="4399"
         destination="5000"
         profile="Products.CMFPlone:plone">
 


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-10-27T15:51:10+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/e44393679777601060ac3ded804f3944c6a02f5a

Merge pull request #95 from plone/enable-update-from-latest-43-source

Enabled update from latest 4.3, revision 4315 instead of 4310.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index ac8d9ce..ff64b99 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -40,6 +40,10 @@ New features:
 
 Bug fixes:
 
+- Enabled update from latest 4.3 profile revision.
+  Otherwise we would skip a few upgrade steps when migrating to
+  Plone 5.  [maurits]
+
 - Don't remove sub skin layers when cleaning ``portal_skins``.
   Created ``utils.cleanUpSkinsTool`` method which has generally useful
   code for cleaning up the skins.
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index 3cd893b..9fb12f6 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -6,8 +6,12 @@
 
     <include file="profiles.zcml" />
 
+    <!-- Upgrade from latest 4.3 profile revision.  This source step
+         does not need to exist, it just needs to be higher than other
+         4.3 profile revisions.  GenericSetup will then sort it nicely
+         for us. -->
     <gs:upgradeSteps
-        source="4310"
+        source="4399"
         destination="5000"
         profile="Products.CMFPlone:plone">
 


