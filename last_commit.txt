Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2016-04-19T15:10:52+03:00
Author: Stephan Geulette (sgeulette) <s.geulette@imio.be>
Commit: https://github.com/plone/plone.app.robotframework/commit/1eacb9bda3679837ba7ac34e685494ff537292a4

Removed bad format parameter on ObjectModifiedEvent

Files changed:
M CHANGES.rst
M src/plone/app/robotframework/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 37f42b0..c896e32 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,10 @@ New:
 
 Fixes:
 
-- *add item here*
-
+- Removed bad format parameter on ObjectModifiedEvent: must be an Attributes instance.
+  See zope.lifecycleevent.ObjectModifiedEvent class.
+  Removed because we can't get the interface and the correct fieldname.
+  [sgeulette]
 
 0.9.15 (2016-02-26)
 -------------------
diff --git a/src/plone/app/robotframework/content.py b/src/plone/app/robotframework/content.py
index 7c1c91c..c33e065 100644
--- a/src/plone/app/robotframework/content.py
+++ b/src/plone/app/robotframework/content.py
@@ -205,7 +205,7 @@ def set_field_value(self, uid, field, value, field_type):
 
             setattr(obj, field, value)
             obj.reindexObject()
-            notify(ObjectModifiedEvent(obj, dict(field=value)))
+            notify(ObjectModifiedEvent(obj))
 
     def uid_to_url(self, uid):
         """Return absolute path for an UID"""
@@ -294,4 +294,4 @@ def prefill_image_types_dexterity(kwargs):
 
 
 def prefill_image_types_archetypes(kwargs):
-    kwargs['image'] = random_image()
\ No newline at end of file
+    kwargs['image'] = random_image()


