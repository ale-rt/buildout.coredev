Repository: plone.app.querystring


Branch: refs/heads/1.2.x
Date: 2017-01-16T15:52:04+01:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/6f79f32d6f37e30056f012090b2edc1e3573b518

Import DateTimeError from DateTime.interfaces, class attribute DateTime.DateTimeError was removed in DateTime 3.0

Files changed:
M CHANGES.rst
M plone/app/querystring/queryparser.py

diff --git a/CHANGES.rst b/CHANGES.rst
index db27c94..7deac54 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,17 +4,11 @@ Changelog
 1.2.11 (unreleased)
 -------------------
 
-Breaking changes:
-
-- *add item here*
-
-New features:
-
-- *add item here*
-
 Bug fixes:
 
-- *add item here*
+- Import DateTimeError from DateTime.interfaces, class attribute
+  DateTime.DateTimeError was removed in DateTime 3.0
+  [vincentfretin]
 
 
 1.2.10 (2016-06-27)
diff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py
index 6319ba8..041c4e4 100644
--- a/plone/app/querystring/queryparser.py
+++ b/plone/app/querystring/queryparser.py
@@ -1,5 +1,6 @@
 from Acquisition import aq_parent
 from DateTime import DateTime
+from DateTime.interfaces import DateTimeError
 from Products.CMFCore.utils import getToolByName
 from Products.CMFPlone.browser.navtree import getNavigationRoot
 from Products.CMFPlone.utils import base_hasattr
@@ -198,11 +199,11 @@ def _moreThanRelativeDate(context, row):
 def _betweenDates(context, row):
     try:
         start_date = DateTime(row.values[0])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         start_date = DateTime(0)
     try:
         end_date = DateTime(row.values[1])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         row = Row(index=row.index,
                   operator=row.operator,
                   values=start_date)


