Repository: plone.dexterity


Branch: refs/heads/2.2.x
Date: 2016-02-16T14:48:31+01:00
Author: CÃ©dric Messiant (cedricmessiant) <cedricmessiant@ecreall.com>
Commit: https://github.com/plone/plone.dexterity/commit/07355230168543856fd72a91e5241fd2240e3262

Use attribute for DefaultAddForm and DefaultEditForm success message so it can be easily customized

Conflicts:
	CHANGES.rst

Files changed:
M CHANGES.rst
M plone/dexterity/browser/add.py
M plone/dexterity/browser/edit.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c7ba33a..70013f4 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,6 +1,14 @@
 Changelog
 =========
 
+2.2.5 (unreleased)
+------------------
+
+- Use attribute for DefaultAddForm and DefaultEditForm success message so it can
+  be easily customized.
+  [cedricmessiant]
+
+
 2.2.4 (2014-10-20)
 ------------------
 
diff --git a/plone/dexterity/browser/add.py b/plone/dexterity/browser/add.py
index f5d587a..96c242e 100644
--- a/plone/dexterity/browser/add.py
+++ b/plone/dexterity/browser/add.py
@@ -29,6 +29,7 @@ class DefaultAddForm(DexterityExtensibleForm, form.AddForm):
 
     portal_type = None
     immediate_view = None
+    success_message = _(u"Item created")
 
     def __init__(self, context, request, ti=None):
         super(DefaultAddForm, self).__init__(context, request)
@@ -102,7 +103,7 @@ def handleAdd(self, action):
             # mark only as finished if we get the new object
             self._finishedAdd = True
             IStatusMessage(self.request).addStatusMessage(
-                _(u"Item created"), "info success"
+                self.success_message, "info success"
             )
 
     @button.buttonAndHandler(_(u'Cancel'), name='cancel')
diff --git a/plone/dexterity/browser/edit.py b/plone/dexterity/browser/edit.py
index 87013b6..4f934e6 100644
--- a/plone/dexterity/browser/edit.py
+++ b/plone/dexterity/browser/edit.py
@@ -17,6 +17,8 @@
 
 class DefaultEditForm(DexterityExtensibleForm, form.EditForm):
 
+    success_message = _(u"Changes saved")
+
     @button.buttonAndHandler(_(u'Save'), name='save')
     def handleApply(self, action):
         data, errors = self.extractData()
@@ -25,7 +27,7 @@ def handleApply(self, action):
             return
         self.applyChanges(data)
         IStatusMessage(self.request).addStatusMessage(
-            _(u"Changes saved"), "info success"
+            self.success_message, "info success"
         )
         self.request.response.redirect(self.nextURL())
         notify(EditFinishedEvent(self.context))
diff --git a/setup.py b/setup.py
index b497a5e..a8d5c12 100644
--- a/setup.py
+++ b/setup.py
@@ -3,7 +3,7 @@
 from setuptools import find_packages
 
 
-version = '2.2.4'
+version = '2.2.5.dev0'
 
 short_description = """\
 Framework for content types as filesystem code and TTW (Zope/CMF/Plone)\


