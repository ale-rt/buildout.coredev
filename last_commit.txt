Repository: plone.resource


Branch: refs/heads/master
Date: 2016-01-26T16:29:20+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.resource/commit/d98b9e7104885da0d0cce9633f52beebe7a252e6

Test fix: clearZCML was removed from zope.component.tests.

Files changed:
M CHANGES.txt
M plone/resource/tests/test_zcml.py

diff --git a/CHANGES.txt b/CHANGES.txt
index bfc54a4..0fb5d2b 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,6 +4,9 @@ Changelog
 1.0.5 (unreleased)
 ------------------
 
+- Test fix: ``clearZCML`` was removed from ``zope.component.tests``.
+  [thet]
+
 - Cleanup: PEP8, plone-coding conventions, ReST fixes, documentation
   overhaul, et al.
   [jensens]
diff --git a/plone/resource/tests/test_zcml.py b/plone/resource/tests/test_zcml.py
index 2ee72f1..248777c 100644
--- a/plone/resource/tests/test_zcml.py
+++ b/plone/resource/tests/test_zcml.py
@@ -1,5 +1,4 @@
 import unittest2 as unittest
-from zope.component.tests import clearZCML
 from zope.component.testing import tearDown
 from zope.configuration.exceptions import ConfigurationError
 
@@ -10,6 +9,17 @@
 from plone.resource.interfaces import IResourceDirectory
 
 
+def clearZCML(test=None):
+    # Copy from ``zope.component.tests.examples``
+    from zope.configuration.xmlconfig import XMLConfig
+    import zope.component
+    from zope.component.testing import setUp
+    from zope.component.testing import tearDown
+    tearDown()
+    setUp()
+    XMLConfig('meta.zcml', zope.component)()
+
+
 def runSnippet(snippet, dist='plone.resource.tests'):
     template = """\
     <configure xmlns="http://namespaces.zope.org/zope"


Repository: plone.resource


Branch: refs/heads/master
Date: 2016-01-29T02:26:27+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.resource/commit/f5fb8d8644dd5e43ae968f959a8db445cb1354e8

Merge pull request #9 from plone/thet-zope4

Zope4

Files changed:
M CHANGES.txt
M plone/resource/tests/test_zcml.py

diff --git a/CHANGES.txt b/CHANGES.txt
index bfc54a4..0fb5d2b 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,6 +4,9 @@ Changelog
 1.0.5 (unreleased)
 ------------------
 
+- Test fix: ``clearZCML`` was removed from ``zope.component.tests``.
+  [thet]
+
 - Cleanup: PEP8, plone-coding conventions, ReST fixes, documentation
   overhaul, et al.
   [jensens]
diff --git a/plone/resource/tests/test_zcml.py b/plone/resource/tests/test_zcml.py
index 2ee72f1..248777c 100644
--- a/plone/resource/tests/test_zcml.py
+++ b/plone/resource/tests/test_zcml.py
@@ -1,5 +1,4 @@
 import unittest2 as unittest
-from zope.component.tests import clearZCML
 from zope.component.testing import tearDown
 from zope.configuration.exceptions import ConfigurationError
 
@@ -10,6 +9,17 @@
 from plone.resource.interfaces import IResourceDirectory
 
 
+def clearZCML(test=None):
+    # Copy from ``zope.component.tests.examples``
+    from zope.configuration.xmlconfig import XMLConfig
+    import zope.component
+    from zope.component.testing import setUp
+    from zope.component.testing import tearDown
+    tearDown()
+    setUp()
+    XMLConfig('meta.zcml', zope.component)()
+
+
 def runSnippet(snippet, dist='plone.resource.tests'):
     template = """\
     <configure xmlns="http://namespaces.zope.org/zope"


