Repository: icalendar


Branch: refs/heads/master
Date: 2016-04-25T23:56:07+02:00
Author: Christian Geier (geier) <geier@lostpackets.de>
Commit: https://github.com/collective/icalendar/commit/70a049e06cd4c3b84126555be8bc1a6eb89a2ece

Reintroduce cal.Component.is_broken

cal.Component.is_broken got removed with 3.9.2 but should not have been
removed before 4.0.0

Files changed:
M CHANGES.rst
M src/icalendar/cal.py
M src/icalendar/tests/test_fixed_issues.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 5fbf217..405ebcb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,7 @@ New:
 Fixes:
 
 - Fix testsuite for use with ``dateutil>=2.5``. Refs #195.
+- Reintroduce cal.Component.is_broken that was removed with 3.9.2 [geier]
 
 
 3.9.2 (2016-02-05)
diff --git a/src/icalendar/cal.py b/src/icalendar/cal.py
index 9828c54..8448dba 100644
--- a/src/icalendar/cal.py
+++ b/src/icalendar/cal.py
@@ -106,6 +106,10 @@ def is_empty(self):
         """
         return True if not (list(self.values()) + self.subcomponents) else False  # noqa
 
+    @property
+    def is_broken(self):
+        return bool(self.errors)
+
     #############################
     # handling of property values
 
diff --git a/src/icalendar/tests/test_fixed_issues.py b/src/icalendar/tests/test_fixed_issues.py
index ae29535..6b375d3 100644
--- a/src/icalendar/tests/test_fixed_issues.py
+++ b/src/icalendar/tests/test_fixed_issues.py
@@ -200,6 +200,7 @@ def test_issue_104__ignore_exceptions(self):
 END:VEVENT"""
         event = icalendar.Calendar.from_ical(ical_str)
         self.assertTrue(isinstance(event, icalendar.Event))
+        self.assertTrue(event.is_broken)  # REMOVE FOR NEXT MAJOR RELEASE
         self.assertEqual(
             event.errors,
             [(None, "Content line could not be parsed into parts: 'X': Invalid content line")]  # noqa


Repository: icalendar


Branch: refs/heads/master
Date: 2016-05-26T10:58:45+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/collective/icalendar/commit/7ad5491760d2ff8db03aa55df500f6803d9ab20a

Merge pull request #185 from collective/fix_184

Reintroduce cal.Component.is_broken

Files changed:
M CHANGES.rst
M src/icalendar/cal.py
M src/icalendar/tests/test_fixed_issues.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 065d9b1..b323e83 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -13,6 +13,7 @@ New:
 Fixes:
 
 - Fix testsuite for use with ``dateutil>=2.5``. Refs #195.
+- Reintroduce cal.Component.is_broken that was removed with 3.9.2 [geier]
 
 
 3.9.2 (2016-02-05)
diff --git a/src/icalendar/cal.py b/src/icalendar/cal.py
index adfd075..9c854eb 100644
--- a/src/icalendar/cal.py
+++ b/src/icalendar/cal.py
@@ -106,6 +106,10 @@ def is_empty(self):
         """
         return True if not (list(self.values()) + self.subcomponents) else False  # noqa
 
+    @property
+    def is_broken(self):
+        return bool(self.errors)
+
     #############################
     # handling of property values
 
diff --git a/src/icalendar/tests/test_fixed_issues.py b/src/icalendar/tests/test_fixed_issues.py
index ae29535..6b375d3 100644
--- a/src/icalendar/tests/test_fixed_issues.py
+++ b/src/icalendar/tests/test_fixed_issues.py
@@ -200,6 +200,7 @@ def test_issue_104__ignore_exceptions(self):
 END:VEVENT"""
         event = icalendar.Calendar.from_ical(ical_str)
         self.assertTrue(isinstance(event, icalendar.Event))
+        self.assertTrue(event.is_broken)  # REMOVE FOR NEXT MAJOR RELEASE
         self.assertEqual(
             event.errors,
             [(None, "Content line could not be parsed into parts: 'X': Invalid content line")]  # noqa


