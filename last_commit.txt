Repository: plone.formwidget.autocomplete


Branch: refs/heads/master
Date: 2016-09-30T13:04:19+02:00
Author: Peter Holzer (agitator) <hpeter@agitator.com>
Commit: https://github.com/plone/plone.formwidget.autocomplete/commit/fd7942e369e040f4402c9a4514bd4e8bf034287d

better handling of undefined data

Files changed:
M CHANGES.rst
M plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js

diff --git a/CHANGES.rst b/CHANGES.rst
index fec1bed..35f9e33 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Better handling of undefined data
+  [agitator]
 
 
 1.2.10 (2016-08-08)
diff --git a/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js b/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
index 1003883..42ad767 100644
--- a/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
+++ b/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
@@ -58,7 +58,7 @@ function formwidget_autocomplete_parser(formatResult, fieldNum) {
 		var parsed = [];
         // If the server responds with 204 No Content, then data will not
         // be a string.
-        if(data.split){
+        if (data !== undefined && data.split){
             var rows = data.split("\n");
             for (var i=0; i < rows.length; i++) {
                 var row = $.trim(rows[i]);


Repository: plone.formwidget.autocomplete


Branch: refs/heads/master
Date: 2016-09-30T14:25:37+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.formwidget.autocomplete/commit/9863af230cb439402cba9e190a219dad97cf86b8

Merge pull request #19 from plone/better-undefined-handling

better handling of undefined data

Files changed:
M CHANGES.rst
M plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js

diff --git a/CHANGES.rst b/CHANGES.rst
index fec1bed..35f9e33 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Better handling of undefined data
+  [agitator]
 
 
 1.2.10 (2016-08-08)
diff --git a/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js b/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
index 1003883..42ad767 100644
--- a/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
+++ b/plone/formwidget/autocomplete/jquery-autocomplete/formwidget-autocomplete.js
@@ -58,7 +58,7 @@ function formwidget_autocomplete_parser(formatResult, fieldNum) {
 		var parsed = [];
         // If the server responds with 204 No Content, then data will not
         // be a string.
-        if(data.split){
+        if (data !== undefined && data.split){
             var rows = data.split("\n");
             for (var i=0; i < rows.length; i++) {
                 var row = $.trim(rows[i]);


