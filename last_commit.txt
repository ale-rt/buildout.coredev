Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2016-03-17T17:19:56+01:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/99abb2f63c83a13aee7daa8faa7c667a27ed3333

Revert "Add zopectl.command commands"

This reverts commit 27004df913cfff739df951e0688476ca149d548a.

Files changed:
M CHANGES.rst
M src/plone/recipe/zope2instance/ctl.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 25492ac..dd4d9ed 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,10 @@ New:
 
 Fixes:
 
-- *add item here*
+- Revert changes made on previous release.
+  The way zopectl and this recipe handle commands
+  is totally different.
+  [gforcada]
 
 
 4.2.19 (2016-02-15)
diff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py
index 7866ad2..8b9e0e0 100644
--- a/src/plone/recipe/zope2instance/ctl.py
+++ b/src/plone/recipe/zope2instance/ctl.py
@@ -596,15 +596,6 @@ def main(args=None):
         if func_name not in dir(c):
             setattr(c.__class__, func_name, func)
 
-    # Mix in any additional commands supplied by other packages
-    # registered for zopectl:
-    for ep in iter_entry_points('zopectl.command'):
-        func_name = 'do_' + ep.name
-        func = ep.load()
-        # avoid overwriting the standard commands
-        if func_name not in dir(c):
-            setattr(c.__class__, func_name, func)
-
     # If a command was specified: call the corresponding do_*() method.
     #
     # If that method set an exit status, exit this Python script


