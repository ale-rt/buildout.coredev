Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-03T18:04:39+01:00
Author: Andreas Zeidler (witsch) <az@zitc.de>
Commit: https://github.com/plone/plone.testing/commit/3835e49c07b98a06c65a473e49ea5921d56daa28

Fix the buildout by using (a working version of) Zope 2.13.

Files changed:
M buildout.cfg

diff --git a/buildout.cfg b/buildout.cfg
index 4619f63..cb2eb19 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -1,6 +1,6 @@
 [buildout]
 extends =
-    http://download.zope.org/Zope2/index/2.12.12/versions.cfg
+    http://download.zope.org/Zope2/index/2.13.21/versions.cfg
 parts = coverage test report report-xml
 develop = .
 versions = versions


Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-03T18:05:05+01:00
Author: Andreas Zeidler (witsch) <az@zitc.de>
Commit: https://github.com/plone/plone.testing/commit/5c5f5de7ce03f72088fbd22ef44d76c1fe91f646

Add convenience `Makefile` to run the tests.

Files changed:
A Makefile
M buildout.cfg

diff --git a/Makefile b/Makefile
new file mode 100644
index 0000000..d03f2f5
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,21 @@
+# convenience makefile to boostrap & run buildout
+
+virtualenv = virtualenv-2.7
+
+all: .installed.cfg
+	bin/test
+
+.installed.cfg: bin/buildout *.cfg
+	bin/buildout
+
+bin/buildout: bin/pip
+	bin/pip install --upgrade setuptools pip zc.buildout
+	@touch -c $@
+
+bin/python bin/pip:
+	$(virtualenv) --clear .
+
+clean:
+	git clean -Xdf
+
+.PHONY: all clean
diff --git a/buildout.cfg b/buildout.cfg
index cb2eb19..7c01374 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -10,6 +10,8 @@ collective.xmltestreport = 1.2.6
 # Newer versions of zope.testrunner are not compatible
 # with zope2
 zope.testrunner = 4.0.0
+zc.buildout =
+setuptools =
 
 [test]
 recipe = collective.xmltestreport


Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-03T18:10:00+01:00
Author: Andreas Zeidler (witsch) <az@zitc.de>
Commit: https://github.com/plone/plone.testing/commit/408df88d64c144d0c0c5846763df3aeb42a156bb

Fix `tox` configuration (by using buildout instead of pytest).

Files changed:
M tox.ini

diff --git a/tox.ini b/tox.ini
index f1870bf..b3640dd 100644
--- a/tox.ini
+++ b/tox.ini
@@ -1,26 +1,18 @@
 [tox]
-envlist = py26, py27
+envlist = py27
 minversion = 1.6
+skipsdist = True
 
 [testenv]
+basepython =
+    python2.7
+changedir = {toxinidir}
+commands =
+    {envbindir}/buildout \
+        buildout:bin-directory={envdir}/bin \
+        buildout:parts-directory={envdir}/parts \
+                buildout:installed={envdir}/.installed.cfg \
+                instance:var={envdir}/var
+    {envbindir}/test {posargs}
 deps =
-     ZODB3
-     Zope2
-     pytest
-     pytest-cov
-     zope.app.publisher
-     zope.component
-     zope.configuration
-     zope.event
-     zope.interface
-     zope.publisher
-     zope.security
-     zope.testbrowser
-commands = py.test
-usedevelop = True
-
-[testenv:py26]
-deps = {[testenv]deps}
-       unittest2
-commands = py.test
-usedevelop = True
\ No newline at end of file
+    zc.buildout


Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-03T18:15:54+01:00
Author: Florian Schulze (fschulze) <florian.schulze@gmx.net>
Commit: https://github.com/plone/plone.testing/commit/77952a49bd7c21c948604177967562be97912c43

Add .travis.yml.

Files changed:
A .travis.yml

diff --git a/.travis.yml b/.travis.yml
new file mode 100644
index 0000000..0506afa
--- /dev/null
+++ b/.travis.yml
@@ -0,0 +1,15 @@
+language: python
+python: 2.7
+sudo: false
+cache:
+  pip: true
+  directories:
+    - $HOME/buildout-cache
+before_install:
+  - mkdir -p $HOME/buildout-cache/{eggs,downloads}
+  - virtualenv .
+  - bin/pip install --upgrade pip setuptools zc.buildout
+install:
+  - bin/buildout -N -t 3
+script:
+  - bin/test


Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-04T17:52:52+01:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.testing/commit/3b221f1d58bc8ecb87540d00415149531ae88469

Use virtualenv's `--python` option to not having to rely on `virtualenv-2.7` to exist.

Files changed:
M Makefile

diff --git a/Makefile b/Makefile
index d03f2f5..b8f0d74 100644
--- a/Makefile
+++ b/Makefile
@@ -1,6 +1,6 @@
 # convenience makefile to boostrap & run buildout
 
-virtualenv = virtualenv-2.7
+version = 2.7
 
 all: .installed.cfg
 	bin/test
@@ -13,7 +13,7 @@ bin/buildout: bin/pip
 	@touch -c $@
 
 bin/python bin/pip:
-	$(virtualenv) --clear .
+	virtualenv --clear --python=python$(version) .
 
 clean:
 	git clean -Xdf


Repository: plone.testing


Branch: refs/heads/4.1.x
Date: 2017-03-04T18:11:33+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.testing/commit/90556e8c4e4574451cc652093b9b55ac92a1ebbf

Merge pull request #29 from witsch/testing-fixes

Testing fixes

Files changed:
A .travis.yml
A Makefile
M buildout.cfg
M tox.ini

diff --git a/.travis.yml b/.travis.yml
new file mode 100644
index 0000000..0506afa
--- /dev/null
+++ b/.travis.yml
@@ -0,0 +1,15 @@
+language: python
+python: 2.7
+sudo: false
+cache:
+  pip: true
+  directories:
+    - $HOME/buildout-cache
+before_install:
+  - mkdir -p $HOME/buildout-cache/{eggs,downloads}
+  - virtualenv .
+  - bin/pip install --upgrade pip setuptools zc.buildout
+install:
+  - bin/buildout -N -t 3
+script:
+  - bin/test
diff --git a/Makefile b/Makefile
new file mode 100644
index 0000000..b8f0d74
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,21 @@
+# convenience makefile to boostrap & run buildout
+
+version = 2.7
+
+all: .installed.cfg
+	bin/test
+
+.installed.cfg: bin/buildout *.cfg
+	bin/buildout
+
+bin/buildout: bin/pip
+	bin/pip install --upgrade setuptools pip zc.buildout
+	@touch -c $@
+
+bin/python bin/pip:
+	virtualenv --clear --python=python$(version) .
+
+clean:
+	git clean -Xdf
+
+.PHONY: all clean
diff --git a/buildout.cfg b/buildout.cfg
index 4619f63..7c01374 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -1,6 +1,6 @@
 [buildout]
 extends =
-    http://download.zope.org/Zope2/index/2.12.12/versions.cfg
+    http://download.zope.org/Zope2/index/2.13.21/versions.cfg
 parts = coverage test report report-xml
 develop = .
 versions = versions
@@ -10,6 +10,8 @@ collective.xmltestreport = 1.2.6
 # Newer versions of zope.testrunner are not compatible
 # with zope2
 zope.testrunner = 4.0.0
+zc.buildout =
+setuptools =
 
 [test]
 recipe = collective.xmltestreport
diff --git a/tox.ini b/tox.ini
index f1870bf..b3640dd 100644
--- a/tox.ini
+++ b/tox.ini
@@ -1,26 +1,18 @@
 [tox]
-envlist = py26, py27
+envlist = py27
 minversion = 1.6
+skipsdist = True
 
 [testenv]
+basepython =
+    python2.7
+changedir = {toxinidir}
+commands =
+    {envbindir}/buildout \
+        buildout:bin-directory={envdir}/bin \
+        buildout:parts-directory={envdir}/parts \
+                buildout:installed={envdir}/.installed.cfg \
+                instance:var={envdir}/var
+    {envbindir}/test {posargs}
 deps =
-     ZODB3
-     Zope2
-     pytest
-     pytest-cov
-     zope.app.publisher
-     zope.component
-     zope.configuration
-     zope.event
-     zope.interface
-     zope.publisher
-     zope.security
-     zope.testbrowser
-commands = py.test
-usedevelop = True
-
-[testenv:py26]
-deps = {[testenv]deps}
-       unittest2
-commands = py.test
-usedevelop = True
\ No newline at end of file
+    zc.buildout


