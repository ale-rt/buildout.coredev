Repository: Products.PlacelessTranslationService


Branch: refs/heads/master
Date: 2016-07-05T23:20:02+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/Products.PlacelessTranslationService/commit/e7965a29196d706c0219b8bd7ddae57ddca18a11

Use zope.interface decorator

This not only makes code more pleasent to read,
but also makes the code python 3 compatible
(while maintaining python 2 compatibility).

Files changed:
M CHANGES.txt
M Products/PlacelessTranslationService/Negotiator.py
M Products/PlacelessTranslationService/PlacelessTranslationService.py
M Products/PlacelessTranslationService/utility.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 1e19389..807c416 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 2.0.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.0.5 (2014-04-16)
diff --git a/Products/PlacelessTranslationService/Negotiator.py b/Products/PlacelessTranslationService/Negotiator.py
index 3dca9ac..2bde399 100644
--- a/Products/PlacelessTranslationService/Negotiator.py
+++ b/Products/PlacelessTranslationService/Negotiator.py
@@ -1,6 +1,6 @@
 import types
 
-from zope.interface import implements
+from zope.interface import implementer
 from zope.i18n.interfaces import IUserPreferredLanguages
 
 
@@ -221,14 +221,13 @@ def negotiate(langs, request):
     return negotiator.negotiate(langs, request, 'language')
 
 
+@implementer(IUserPreferredLanguages)
 class PTSLanguages(object):
     """Languages adapter that chooses languages for the zope.i18n machinery.
 
     This used to be part of Products.Five.i18n.
     """
 
-    implements(IUserPreferredLanguages)
-
     def __init__(self, context):
         self.context = context
 
diff --git a/Products/PlacelessTranslationService/PlacelessTranslationService.py b/Products/PlacelessTranslationService/PlacelessTranslationService.py
index 95acfad..8b633e2 100644
--- a/Products/PlacelessTranslationService/PlacelessTranslationService.py
+++ b/Products/PlacelessTranslationService/PlacelessTranslationService.py
@@ -9,7 +9,7 @@
 from zope.i18n import translate as z3translate
 from zope.i18n import _interp_regex
 from zope.i18n import NAME_RE
-from zope.interface import implements
+from zope.interface import implementer
 from zope.publisher.interfaces.browser import IBrowserRequest
 
 import Globals
@@ -87,11 +87,11 @@ def negotiate_language(self, context, domain):
 InitializeClass(PTSWrapper)
 
 
+@implementer(IPlacelessTranslationService)
 class PlacelessTranslationService(Folder):
     """
     The Placeless Translation Service
     """
-    implements(IPlacelessTranslationService)
 
     meta_type = title = 'Placeless Translation Service'
     icon = 'misc_/PlacelessTranslationService/PlacelessTranslationService.png'
diff --git a/Products/PlacelessTranslationService/utility.py b/Products/PlacelessTranslationService/utility.py
index d0ef342..ea7820f 100644
--- a/Products/PlacelessTranslationService/utility.py
+++ b/Products/PlacelessTranslationService/utility.py
@@ -1,6 +1,6 @@
 import zope.deprecation
 
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import queryUtility
 from zope.i18n import interpolate
 
@@ -10,13 +10,12 @@
 from interfaces import IPTSTranslationDomain
 
 
+@implementer(IPTSTranslationDomain)
 class PTSTranslationDomain(object):
     """Makes translation domains that are still kept in PTS available as
     ITranslationDomain utilities. That way they are usable from Zope 3 code
     such as Zope 3 PageTemplates."""
 
-    implements(IPTSTranslationDomain)
-
     def __init__(self, domain):
         self.domain = domain
 


Repository: Products.PlacelessTranslationService


Branch: refs/heads/master
Date: 2016-07-10T20:31:14+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.PlacelessTranslationService/commit/efcb243bfb4dba257e11c4a4be8bbf96b6953e19

Merge pull request #1 from plone/gforcada-use-zope-decorators

Use zope.interface decorator

Files changed:
M CHANGES.txt
M Products/PlacelessTranslationService/Negotiator.py
M Products/PlacelessTranslationService/PlacelessTranslationService.py
M Products/PlacelessTranslationService/utility.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 1e19389..807c416 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 2.0.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use zope.interface decorator.
+  [gforcada]
 
 
 2.0.5 (2014-04-16)
diff --git a/Products/PlacelessTranslationService/Negotiator.py b/Products/PlacelessTranslationService/Negotiator.py
index 3dca9ac..2bde399 100644
--- a/Products/PlacelessTranslationService/Negotiator.py
+++ b/Products/PlacelessTranslationService/Negotiator.py
@@ -1,6 +1,6 @@
 import types
 
-from zope.interface import implements
+from zope.interface import implementer
 from zope.i18n.interfaces import IUserPreferredLanguages
 
 
@@ -221,14 +221,13 @@ def negotiate(langs, request):
     return negotiator.negotiate(langs, request, 'language')
 
 
+@implementer(IUserPreferredLanguages)
 class PTSLanguages(object):
     """Languages adapter that chooses languages for the zope.i18n machinery.
 
     This used to be part of Products.Five.i18n.
     """
 
-    implements(IUserPreferredLanguages)
-
     def __init__(self, context):
         self.context = context
 
diff --git a/Products/PlacelessTranslationService/PlacelessTranslationService.py b/Products/PlacelessTranslationService/PlacelessTranslationService.py
index 95acfad..8b633e2 100644
--- a/Products/PlacelessTranslationService/PlacelessTranslationService.py
+++ b/Products/PlacelessTranslationService/PlacelessTranslationService.py
@@ -9,7 +9,7 @@
 from zope.i18n import translate as z3translate
 from zope.i18n import _interp_regex
 from zope.i18n import NAME_RE
-from zope.interface import implements
+from zope.interface import implementer
 from zope.publisher.interfaces.browser import IBrowserRequest
 
 import Globals
@@ -87,11 +87,11 @@ def negotiate_language(self, context, domain):
 InitializeClass(PTSWrapper)
 
 
+@implementer(IPlacelessTranslationService)
 class PlacelessTranslationService(Folder):
     """
     The Placeless Translation Service
     """
-    implements(IPlacelessTranslationService)
 
     meta_type = title = 'Placeless Translation Service'
     icon = 'misc_/PlacelessTranslationService/PlacelessTranslationService.png'
diff --git a/Products/PlacelessTranslationService/utility.py b/Products/PlacelessTranslationService/utility.py
index d0ef342..ea7820f 100644
--- a/Products/PlacelessTranslationService/utility.py
+++ b/Products/PlacelessTranslationService/utility.py
@@ -1,6 +1,6 @@
 import zope.deprecation
 
-from zope.interface import implements
+from zope.interface import implementer
 from zope.component import queryUtility
 from zope.i18n import interpolate
 
@@ -10,13 +10,12 @@
 from interfaces import IPTSTranslationDomain
 
 
+@implementer(IPTSTranslationDomain)
 class PTSTranslationDomain(object):
     """Makes translation domains that are still kept in PTS available as
     ITranslationDomain utilities. That way they are usable from Zope 3 code
     such as Zope 3 PageTemplates."""
 
-    implements(IPTSTranslationDomain)
-
     def __init__(self, domain):
         self.domain = domain
 


