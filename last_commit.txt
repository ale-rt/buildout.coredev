Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2017-07-07T10:42:34+03:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/87e1f6e6206099cb654dadaa88b0fff70b3514b8

add beta5 profiles

Files changed:
A plone/app/upgrade/v51/profiles/to_beta5/registry.xml
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 6b7c556..24dad71 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -156,4 +156,21 @@ Add image scaling options to image handling control panel.
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5107"
+        destination="5108"
+        profile="Products.CMFPlone:plone">
+
+        <gs:upgradeDepends
+            title="Run to51beta5 upgrade profile."
+            description="Fix safe_html in PortalTransforms."
+            import_profile="plone.app.upgrade.v51:to51beta5"
+            />
+
+        <!--<gs:upgradeStep
+            title="Move safe_html settings from portal_transforms to Plone registry"
+            handler=".betas.move_safe_html_settings_to_registry"
+            />-->
+
+    </gs:upgradeSteps>
 </configure>
diff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml
index 2c758e6..7cee992 100644
--- a/plone/app/upgrade/v51/profiles.zcml
+++ b/plone/app/upgrade/v51/profiles.zcml
@@ -50,4 +50,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to51beta5"
+      title="Upgrade profile for Plone 5.1beta4 to Plone 5.1beta5"
+      description=""
+      directory="profiles/to_beta5"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v51/profiles/to_beta5/registry.xml b/plone/app/upgrade/v51/profiles/to_beta5/registry.xml
new file mode 100644
index 0000000..f63487b
--- /dev/null
+++ b/plone/app/upgrade/v51/profiles/to_beta5/registry.xml
@@ -0,0 +1,7 @@
+<?xml version="1.0"?>
+<registry>
+
+  <records interface="Products.CMFPlone.interfaces.IFilterSchema"
+           prefix="plone" />
+
+</registry>


