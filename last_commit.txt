Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-06-21T16:30:27+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/c1299923ddc681090d67964f3923c83fb7e8a601

Changes for CMFPlones bower components update
- Update ``last_compilation`` to deliver new bundles.
- Add missing ``jquery.browser`` dependency which is needed by patternslib.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v51/profiles/to_alpha2/registry.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 5600e99..4e31110 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,12 @@ Incompatibilities:
 
 New:
 
+- Update ``last_compilation`` to deliver new bundles.
+  [thet]
+
+- Add missing ``jquery.browser`` dependency which is needed by patternslib.
+  [thet]
+
 - Adds controlpanel setting to enable navigation root bound keyword vocabularies.
   [jensens]
 
diff --git a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
index 0258edf..67f1f70 100644
--- a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
+++ b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
@@ -9,4 +9,19 @@
       False
     </value>
   </records>
+
+  <!-- Add missing ``jquery.browser`` dependency which is needed by patternslib -->
+  <records prefix="plone.resources/jquery.browser" interface="Products.CMFPlone.interfaces.IResourceRegistry">
+      <value key="js">++plone++static/components/jquery.browser/dist/jquery.browser.js</value>
+      <value key="deps">jquery</value>
+  </records>
+
+  <!-- Update ``last_compilation`` to deliver new bundles -->
+  <records prefix="plone.bundles/plone" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2016-06-21 00:00:00</value>
+  </records>
+  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2016-06-21 00:00:00</value>
+  </records>
+
 </registry>


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-06-23T14:50:17+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/85bc7387861d4110e456f0b3ae5665df7e14231a

Remove deprecated mockup-registry and mockup-parser resources.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles/to_alpha2/registry.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 4e31110..32de99e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -9,6 +9,9 @@ Incompatibilities:
 - *add item here*
 
 New:
+  
+- Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources.
+  [thet]
 
 - Update ``last_compilation`` to deliver new bundles.
   [thet]
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 3e4acba..499110e 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -26,7 +26,12 @@
 
       <gs:upgradeStep
            title="Run to51alpha2 upgrade profile."
-           description=""
+           description="
+Limit tags/keywords to the current navigation root,
+Add missing ``jquery.browser`` dependency which is needed by patternslib,
+Update ``last_compilation`` to deliver new bundles,
+Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources.
+           "
            handler=".alphas.to51alpha2"
            />
 
diff --git a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
index 67f1f70..0c8f535 100644
--- a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
+++ b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
@@ -1,5 +1,7 @@
 <?xml version="1.0"?>
 <registry>
+
+  <!-- Limit tags/keywords to the current navigation root -->
   <records
       interface="Products.CMFPlone.interfaces.controlpanel.IEditingSchema"
       prefix="plone">
@@ -24,4 +26,8 @@
     <value key="last_compilation">2016-06-21 00:00:00</value>
   </records>
 
+  <!-- Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources -->
+  <records prefix="plone.resources/mockup-registry" interface='Products.CMFPlone.interfaces.IResourceRegistry' remove="True"/>
+  <records prefix="plone.resources/mockup-parser" interface='Products.CMFPlone.interfaces.IResourceRegistry' remove="True"/>
+
 </registry>


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2016-06-23T18:40:52+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/0df42b64e377c2f264a95c025b303a5a59c04444

Merge pull request #79 from plone/thet-updbower

Changes for CMFPlones bower components update

Files changed:
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles/to_alpha2/registry.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 119ec62..ab15d13 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -21,6 +21,15 @@ Bug fixes:
 -------------------
 
 New:
+  
+- Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources.
+  [thet]
+
+- Update ``last_compilation`` to deliver new bundles.
+  [thet]
+
+- Add missing ``jquery.browser`` dependency which is needed by patternslib.
+  [thet]
 
 - Adds controlpanel setting to enable navigation root bound keyword vocabularies.
   [jensens]
diff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml
index 3e4acba..499110e 100644
--- a/plone/app/upgrade/v51/configure.zcml
+++ b/plone/app/upgrade/v51/configure.zcml
@@ -26,7 +26,12 @@
 
       <gs:upgradeStep
            title="Run to51alpha2 upgrade profile."
-           description=""
+           description="
+Limit tags/keywords to the current navigation root,
+Add missing ``jquery.browser`` dependency which is needed by patternslib,
+Update ``last_compilation`` to deliver new bundles,
+Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources.
+           "
            handler=".alphas.to51alpha2"
            />
 
diff --git a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
index 0258edf..0c8f535 100644
--- a/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
+++ b/plone/app/upgrade/v51/profiles/to_alpha2/registry.xml
@@ -1,5 +1,7 @@
 <?xml version="1.0"?>
 <registry>
+
+  <!-- Limit tags/keywords to the current navigation root -->
   <records
       interface="Products.CMFPlone.interfaces.controlpanel.IEditingSchema"
       prefix="plone">
@@ -9,4 +11,23 @@
       False
     </value>
   </records>
+
+  <!-- Add missing ``jquery.browser`` dependency which is needed by patternslib -->
+  <records prefix="plone.resources/jquery.browser" interface="Products.CMFPlone.interfaces.IResourceRegistry">
+      <value key="js">++plone++static/components/jquery.browser/dist/jquery.browser.js</value>
+      <value key="deps">jquery</value>
+  </records>
+
+  <!-- Update ``last_compilation`` to deliver new bundles -->
+  <records prefix="plone.bundles/plone" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2016-06-21 00:00:00</value>
+  </records>
+  <records prefix="plone.bundles/plone-logged-in" interface="Products.CMFPlone.interfaces.IBundleRegistry" purge="False">
+    <value key="last_compilation">2016-06-21 00:00:00</value>
+  </records>
+
+  <!-- Remove deprecated ``mockup-registry`` and ``mockup-parser`` resources -->
+  <records prefix="plone.resources/mockup-registry" interface='Products.CMFPlone.interfaces.IResourceRegistry' remove="True"/>
+  <records prefix="plone.resources/mockup-parser" interface='Products.CMFPlone.interfaces.IResourceRegistry' remove="True"/>
+
 </registry>


