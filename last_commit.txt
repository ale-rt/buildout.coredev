Repository: archetypes.schemaextender


Branch: refs/heads/master
Date: 2016-10-23T09:51:19-04:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/archetypes.schemaextender/commit/a92017e702510608bca5abf79d2c1be806676161

Fix imports since Globals was removed in Zope4

Files changed:
M CHANGES.rst
M archetypes/schemaextender/extender.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 7afe1d3..b60bfc7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Fix imports from Globals that was removed in Zope4
+  [pbauer]
 
 2.1.6 (2016-08-11)
 ------------------
diff --git a/archetypes/schemaextender/extender.py b/archetypes/schemaextender/extender.py
index 1a447e6..a1dffdc 100644
--- a/archetypes/schemaextender/extender.py
+++ b/archetypes/schemaextender/extender.py
@@ -1,6 +1,6 @@
 import os
 
-from Globals import DevelopmentMode
+from App.config import getConfiguration
 from Products.Archetypes.interfaces import ISchema
 from Products.Archetypes.utils import OrderedDict
 from archetypes.schemaextender.interfaces import ISchemaExtender
@@ -190,7 +190,7 @@ def instanceSchemaFactory(context):
                 # we need to get the current order first
                 order = get_schema_order(schema)
             order = extender.getOrder(order)
-            if DevelopmentMode:
+            if getConfiguration().debug_mode:
                 validate_schema_order(schema, order)
     if order is not None:
         set_schema_order(schema, order)


