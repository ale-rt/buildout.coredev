Repository: Products.LinguaPlone


Branch: refs/heads/master
Date: 2017-02-16T03:03:25+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.LinguaPlone/commit/696490c35477dd07e2961adb2ccdf2ba527e3788

Don't fail while uninstalling, if LinguaPlone is already uninstalled.

Files changed:
M CHANGES.rst
M Products/LinguaPlone/setuphandlers.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c7094b7..e2e1565 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Don't fail while uninstalling, if LinguaPlone is already uninstalled.
+  [thet]
 
 
 4.1.8 (2017-01-12)
diff --git a/Products/LinguaPlone/setuphandlers.py b/Products/LinguaPlone/setuphandlers.py
index 81f5c64..28342c7 100644
--- a/Products/LinguaPlone/setuphandlers.py
+++ b/Products/LinguaPlone/setuphandlers.py
@@ -32,7 +32,11 @@ def uninstall(context):
     site = context.getSite()
     logger = context.getLogger('LinguaPlone')
     qi = getToolByName(site, 'portal_quickinstaller')
-    qi.uninstallProducts(products=['LinguaPlone'])
+    try:
+        qi.uninstallProducts(products=['LinguaPlone'])
+    except AttributeError:
+        # Already uninstalled. Don't fail.
+        pass
     o = qi._getOb('LinguaPlone', None)
     if o:
         assert(not o.isInstalled())


Repository: Products.LinguaPlone


Branch: refs/heads/master
Date: 2017-02-16T18:27:58+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.LinguaPlone/commit/f22b66d388bb76979ccaf21e99ab47623f2da891

Merge pull request #22 from plone/thet-fixunin

Don't fail while uninstalling, if LinguaPlone is already uninstalled.

Files changed:
M CHANGES.rst
M Products/LinguaPlone/setuphandlers.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c7094b7..e2e1565 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Don't fail while uninstalling, if LinguaPlone is already uninstalled.
+  [thet]
 
 
 4.1.8 (2017-01-12)
diff --git a/Products/LinguaPlone/setuphandlers.py b/Products/LinguaPlone/setuphandlers.py
index 81f5c64..28342c7 100644
--- a/Products/LinguaPlone/setuphandlers.py
+++ b/Products/LinguaPlone/setuphandlers.py
@@ -32,7 +32,11 @@ def uninstall(context):
     site = context.getSite()
     logger = context.getLogger('LinguaPlone')
     qi = getToolByName(site, 'portal_quickinstaller')
-    qi.uninstallProducts(products=['LinguaPlone'])
+    try:
+        qi.uninstallProducts(products=['LinguaPlone'])
+    except AttributeError:
+        # Already uninstalled. Don't fail.
+        pass
     o = qi._getOb('LinguaPlone', None)
     if o:
         assert(not o.isInstalled())


